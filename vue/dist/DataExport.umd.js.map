{"version":3,"sources":["webpack://DataExport/webpack/universalModuleDefinition","webpack://DataExport/webpack/bootstrap","webpack://DataExport/./plugins/CoreHome/vue/src/noAdblockFlag.ts","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue?571a","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue?231c","webpack://DataExport/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://DataExport/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue","webpack://DataExport/./plugins/CoreHome/vue/src/translate.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Periods.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/utilities.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Day.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Week.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Month.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Year.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/Range.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Matomo/Matomo.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Periods/index.ts","webpack://DataExport/./plugins/CoreHome/vue/src/MatomoUrl/MatomoUrl.ts","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxHelper/AjaxHelper.ts","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxHelper/AjaxHelper.adapter.ts","webpack://DataExport/./plugins/CoreHome/vue/src/PopoverHandler/PopoverHandler.ts","webpack://DataExport/./plugins/CoreHome/vue/src/CookieHelper/CookieHelper.ts","webpack://DataExport/./plugins/CoreHome/vue/src/zenMode.ts","webpack://DataExport/./plugins/CoreHome/vue/src/externalLink.ts","webpack://DataExport/./plugins/CoreHome/vue/src/createVueApp.ts","webpack://DataExport/./plugins/CoreHome/vue/src/importPluginUmd.ts","webpack://DataExport/./plugins/CoreHome/vue/src/useExternalPluginComponent.ts","webpack://DataExport/./plugins/CoreHome/vue/src/directiveUtilities.ts","webpack://DataExport/./plugins/CoreHome/vue/src/debounce.ts","webpack://DataExport/./plugins/CoreHome/vue/src/getFormattedEvolution.ts","webpack://DataExport/./plugins/CoreHome/vue/src/clone.ts","webpack://DataExport/./plugins/CoreHome/vue/src/VueEntryContainer/VueEntryContainer.vue","webpack://DataExport/./plugins/CoreHome/vue/src/VueEntryContainer/VueEntryContainer.vue?0841","webpack://DataExport/./plugins/CoreHome/vue/src/VueEntryContainer/VueEntryContainer.vue?0322","webpack://DataExport/./plugins/CoreHome/vue/src/VueEntryContainer/VueEntryContainer.vue?84f3","webpack://DataExport/./plugins/CoreHome/vue/src/ActivityIndicator/ActivityIndicator.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ActivityIndicator/ActivityIndicator.vue?0bf6","webpack://DataExport/./plugins/CoreHome/vue/src/ActivityIndicator/ActivityIndicator.vue?e347","webpack://DataExport/./plugins/CoreHome/vue/src/ActivityIndicator/ActivityIndicator.vue?6f80","webpack://DataExport/./plugins/CoreHome/vue/src/Alert/Alert.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Alert/Alert.vue?14a2","webpack://DataExport/./plugins/CoreHome/vue/src/Alert/Alert.vue?9098","webpack://DataExport/./plugins/CoreHome/vue/src/Alert/Alert.vue?cc69","webpack://DataExport/./plugins/CoreHome/vue/src/DropdownMenu/DropdownMenu.ts","webpack://DataExport/./plugins/CoreHome/vue/src/FocusAnywhereButHere/FocusAnywhereButHere.ts","webpack://DataExport/./plugins/CoreHome/vue/src/FocusIf/FocusIf.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Tooltips/Tooltips.ts","webpack://DataExport/./plugins/CoreHome/vue/src/MatomoDialog/MatomoDialog.vue","webpack://DataExport/./plugins/CoreHome/vue/src/MatomoDialog/MatomoDialog.vue?c435","webpack://DataExport/./plugins/CoreHome/vue/src/MatomoDialog/MatomoDialog.vue?54c3","webpack://DataExport/./plugins/CoreHome/vue/src/MatomoDialog/MatomoDialog.vue?7b62","webpack://DataExport/./plugins/CoreHome/vue/src/ExpandOnClick/ExpandOnClick.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ExpandOnHover/ExpandOnHover.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ShowSensitiveData/ShowSensitiveData.ts","webpack://DataExport/./plugins/CoreHome/vue/src/DropdownButton/DropdownButton.ts","webpack://DataExport/./plugins/CoreHome/vue/src/SelectOnFocus/SelectOnFocus.ts","webpack://DataExport/./plugins/CoreHome/vue/src/CopyToClipboard/CopyToClipboard.ts","webpack://DataExport/./plugins/CoreHome/vue/src/SideNav/SideNav.ts","webpack://DataExport/./plugins/CoreHome/vue/src/EnrichedHeadline/EnrichedHeadline.vue","webpack://DataExport/./plugins/CoreHome/vue/src/EnrichedHeadline/EnrichedHeadline.vue?7f4f","webpack://DataExport/./plugins/CoreHome/vue/src/EnrichedHeadline/EnrichedHeadline.vue?2223","webpack://DataExport/./plugins/CoreHome/vue/src/EnrichedHeadline/EnrichedHeadline.vue?9cf5","webpack://DataExport/./plugins/CoreHome/vue/src/ContentBlock/ContentBlock.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ContentBlock/ContentBlock.vue?4b9f","webpack://DataExport/./plugins/CoreHome/vue/src/ContentBlock/ContentBlock.vue?1ed1","webpack://DataExport/./plugins/CoreHome/vue/src/ContentBlock/ContentBlock.vue?5539","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Segmentation/Segments.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.store.instance.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.vue?027a","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.vue?fcbf","webpack://DataExport/./plugins/CoreHome/vue/src/Comparisons/Comparisons.vue?5565","webpack://DataExport/./plugins/CoreHome/vue/src/MenuItemsDropdown/MenuItemsDropdown.vue","webpack://DataExport/./plugins/CoreHome/vue/src/MenuItemsDropdown/MenuItemsDropdown.vue?4726","webpack://DataExport/./plugins/CoreHome/vue/src/MenuItemsDropdown/MenuItemsDropdown.vue?8943","webpack://DataExport/./plugins/CoreHome/vue/src/MenuItemsDropdown/MenuItemsDropdown.vue?4ce0","webpack://DataExport/./plugins/CoreHome/vue/src/DatePicker/DatePicker.vue","webpack://DataExport/./plugins/CoreHome/vue/src/DatePicker/DatePicker.vue?189b","webpack://DataExport/./plugins/CoreHome/vue/src/DatePicker/DatePicker.vue?08b6","webpack://DataExport/./plugins/CoreHome/vue/src/DatePicker/DatePicker.vue?0d65","webpack://DataExport/./plugins/CoreHome/vue/src/DateRangePicker/DateRangePicker.vue","webpack://DataExport/./plugins/CoreHome/vue/src/DateRangePicker/DateRangePicker.vue?2e06","webpack://DataExport/./plugins/CoreHome/vue/src/DateRangePicker/DateRangePicker.vue?ac91","webpack://DataExport/./plugins/CoreHome/vue/src/DateRangePicker/DateRangePicker.vue?368d","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodDatePicker/PeriodDatePicker.vue","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodDatePicker/PeriodDatePicker.vue?c684","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodDatePicker/PeriodDatePicker.vue?35ea","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodDatePicker/PeriodDatePicker.vue?3717","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/Notification.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/Notification.vue?4c45","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/Notification.vue?e954","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/Notification.vue?6bbb","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/NotificationGroup.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/Notifications.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/NotificationGroup.vue?deab","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/NotificationGroup.vue?54c0","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/NotificationGroup.vue?fed5","webpack://DataExport/./plugins/CoreHome/vue/src/Notification/index.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ShowHelpLink/ShowHelpLink.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ShowHelpLink/ShowHelpLink.vue?3cfe","webpack://DataExport/./plugins/CoreHome/vue/src/ShowHelpLink/ShowHelpLink.vue?6897","webpack://DataExport/./plugins/CoreHome/vue/src/ShowHelpLink/ShowHelpLink.vue?e2f6","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/SitesStore.ts","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/SiteSelector.vue","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/AllSitesLink.vue","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/AllSitesLink.vue?80c2","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/AllSitesLink.vue?5203","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/AllSitesLink.vue?2602","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/SiteSelector.vue?7ec2","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/SiteSelector.vue?e55f","webpack://DataExport/./plugins/CoreHome/vue/src/SiteSelector/SiteSelector.vue?e196","webpack://DataExport/./plugins/CoreHome/vue/src/QuickAccess/QuickAccess.vue","webpack://DataExport/./plugins/CoreHome/vue/src/QuickAccess/QuickAccess.vue?501c","webpack://DataExport/./plugins/CoreHome/vue/src/QuickAccess/QuickAccess.vue?2ea8","webpack://DataExport/./plugins/CoreHome/vue/src/QuickAccess/QuickAccess.vue?7c88","webpack://DataExport/./plugins/CoreHome/vue/src/FieldArray/FieldArray.vue","webpack://DataExport/./plugins/CoreHome/vue/src/FieldArray/FieldArray.vue?7d99","webpack://DataExport/./plugins/CoreHome/vue/src/FieldArray/FieldArray.vue?c446","webpack://DataExport/./plugins/CoreHome/vue/src/FieldArray/FieldArray.vue?56fa","webpack://DataExport/./plugins/CoreHome/vue/src/MultiPairField/MultiPairField.vue","webpack://DataExport/./plugins/CoreHome/vue/src/MultiPairField/MultiPairField.vue?aeef","webpack://DataExport/./plugins/CoreHome/vue/src/MultiPairField/MultiPairField.vue?ab7d","webpack://DataExport/./plugins/CoreHome/vue/src/MultiPairField/MultiPairField.vue?75cc","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodSelector/PeriodSelector.vue","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodSelector/PeriodSelector.vue?3b1d","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodSelector/PeriodSelector.vue?209c","webpack://DataExport/./plugins/CoreHome/vue/src/PeriodSelector/PeriodSelector.vue?dbce","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/ReportingMenu.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPages/ReportingPages.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Orderable.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/Category.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/Subcategory.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/ReportingMenu.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Widget/Widgets.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/ReportingMenu.vue?6c95","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/ReportingMenu.vue?b225","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingMenu/ReportingMenu.vue?e011","webpack://DataExport/./plugins/CoreHome/vue/src/ReportMetadata/ReportMetadata.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetLoader/WidgetLoader.vue","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetLoader/WidgetLoader.vue?a9ec","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetLoader/WidgetLoader.vue?92b2","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetLoader/WidgetLoader.vue?8129","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetContainer/WidgetContainer.vue","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetContainer/WidgetContainer.vue?dc13","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetContainer/WidgetContainer.vue?b3fd","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetContainer/WidgetContainer.vue?b736","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetByDimensionContainer/WidgetByDimensionContainer.vue","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetByDimensionContainer/WidgetByDimensionContainer.vue?b01b","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetByDimensionContainer/WidgetByDimensionContainer.vue?8c76","webpack://DataExport/./plugins/CoreHome/vue/src/WidgetByDimensionContainer/WidgetByDimensionContainer.vue?2a5f","webpack://DataExport/./plugins/CoreHome/vue/src/Widget/Widget.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Widget/Widget.vue?8b42","webpack://DataExport/./plugins/CoreHome/vue/src/Widget/Widget.vue?df39","webpack://DataExport/./plugins/CoreHome/vue/src/Widget/Widget.vue?b66c","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPage/ReportingPage.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPage/ReportingPage.store.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPage/ReportingPage.vue?96fe","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPage/ReportingPage.vue?8fc3","webpack://DataExport/./plugins/CoreHome/vue/src/ReportingPage/ReportingPage.vue?e6c0","webpack://DataExport/./plugins/CoreHome/vue/src/ReportExport/ReportExportPopover.vue","webpack://DataExport/./plugins/CoreHome/vue/src/ReportExport/ReportExportPopover.vue?e7ff","webpack://DataExport/./plugins/CoreHome/vue/src/ReportExport/ReportExportPopover.vue?2741","webpack://DataExport/./plugins/CoreHome/vue/src/ReportExport/ReportExportPopover.vue?531b","webpack://DataExport/./plugins/CoreHome/vue/src/ReportExport/ReportExport.ts","webpack://DataExport/./plugins/CoreHome/vue/src/Sparkline/Sparkline.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Sparkline/Sparkline.vue?8384","webpack://DataExport/./plugins/CoreHome/vue/src/Sparkline/Sparkline.vue?c6c3","webpack://DataExport/./plugins/CoreHome/vue/src/Sparkline/Sparkline.vue?e0d5","webpack://DataExport/./plugins/CoreHome/vue/src/Progressbar/Progressbar.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Progressbar/Progressbar.vue?0766","webpack://DataExport/./plugins/CoreHome/vue/src/Progressbar/Progressbar.vue?5d15","webpack://DataExport/./plugins/CoreHome/vue/src/Progressbar/Progressbar.vue?4e7c","webpack://DataExport/./plugins/CoreHome/vue/src/ContentIntro/ContentIntro.ts","webpack://DataExport/./plugins/CoreHome/vue/src/ContentTable/ContentTable.ts","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxForm/AjaxForm.vue","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxForm/AjaxForm.vue?76ae","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxForm/AjaxForm.vue?54c5","webpack://DataExport/./plugins/CoreHome/vue/src/AjaxForm/AjaxForm.vue?8bc2","webpack://DataExport/./plugins/CoreHome/vue/src/Passthrough/Passthrough.vue","webpack://DataExport/./plugins/CoreHome/vue/src/Passthrough/Passthrough.vue?a844","webpack://DataExport/./plugins/CoreHome/vue/src/Passthrough/Passthrough.vue?f72f","webpack://DataExport/./plugins/CoreHome/vue/src/Passthrough/Passthrough.vue?2bbb","webpack://DataExport/./plugins/CoreHome/vue/src/DataTable/DataTableActions.vue","webpack://DataExport/./plugins/CoreHome/vue/src/DataTable/DataTableActions.vue?7903","webpack://DataExport/./plugins/CoreHome/vue/src/DataTable/DataTableActions.vue?bf43","webpack://DataExport/./plugins/CoreHome/vue/src/DataTable/DataTableActions.vue?049a","webpack://DataExport/./plugins/CoreHome/vue/src/VersionInfoHeaderMessage/VersionInfoHeaderMessage.vue","webpack://DataExport/./plugins/CoreHome/vue/src/VersionInfoHeaderMessage/VersionInfoHeaderMessage.vue?82f6","webpack://DataExport/./plugins/CoreHome/vue/src/VersionInfoHeaderMessage/VersionInfoHeaderMessage.vue?aad6","webpack://DataExport/./plugins/CoreHome/vue/src/VersionInfoHeaderMessage/VersionInfoHeaderMessage.vue?7886","webpack://DataExport/./plugins/CoreHome/vue/src/MobileLeftMenu/MobileLeftMenu.vue","webpack://DataExport/./plugins/CoreHome/vue/src/MobileLeftMenu/MobileLeftMenu.vue?c087","webpack://DataExport/./plugins/CoreHome/vue/src/MobileLeftMenu/MobileLeftMenu.vue?16cc","webpack://DataExport/./plugins/CoreHome/vue/src/MobileLeftMenu/MobileLeftMenu.vue?6096","webpack://DataExport/./plugins/CoreHome/vue/src/scrollToAnchorInUrl.ts","webpack://DataExport/./plugins/CoreHome/vue/src/index.ts","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue?6294","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue?bdce","webpack://DataExport/./plugins/DataExport/vue/src/CsvSection/CsvSection.vue?ed72","webpack://DataExport/./plugins/DataExport/vue/src/index.ts","webpack://DataExport/./node_modules/@vue/cli-service/lib/commands/build/entry-lib-no-default.js"],"names":[],"mappings":"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","file":"DataExport.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataExport\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"DataExport\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"plugins/DataExport/vue/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fae3\");\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n// see https://github.com/matomo-org/matomo/issues/5094 used to detect an ad blocker\nwindow.hasBlockedContent = false;\n","// extracted by mini-css-extract-plugin","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CsvSection.vue?vue&type=style&index=0&id=1f77e6ee&lang=less&scoped=true\"","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","<!--\n   2024 Jorge Powers. All rights reserved.\n\n  @link https://jorgeuos.com\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"card\">\n    <div class=\"card-content\">\n      <h2 class=\"card-title\">{{ translate('DataExport_CsvCardTitle') }}</h2>\n\n      <div>\n        <p>\n          <label for=\"csvSite\">Select a site: <span v-bind=\"this.site\">\n            {{ site }}</span></label><br>\n        </p>\n        <p>\n          <SiteSelector id=\"csvSite\" v-model=\"site\" :show-all-sites-item=\"false\"\n            :switch-site-on-select=\"false\"\n            :show-selected-site=\"true\"\n            :default-to-first-site=\"true\"\n            @update:model-value=\"site = $event; websiteChanged()\"\n            ></SiteSelector>\n        </p>\n        <p>\n          <label for=\"date\">\n            <b>\n              Date:\n            </b>\n          </label>\n        </p>\n        <p>\n          <input type=\"date\" id=\"date\" name=\"date\" v-model=\"date\" @change=\"dateChanged\"\n           style=\"max-width:200px;\">\n        </p>\n        <p>\n          <button @click=\"downloadCSV\" class=\"btn\">Download CSV</button>\n        </p>\n      </div>\n\n      <MatomoDialog v-model=\"showDialog\">\n        <div class=\"ui-confirm exampleDialog\">\n          <h2>CSV Export - Select all visits and actions by siteId</h2>\n          <h2>Alert</h2>\n          <p>\n            The count is greater than 1 right now!\n          </p>\n\n          <input type=\"button\" value=\"OK\" role=\"yes\" />\n        </div>\n      </MatomoDialog>\n    </div>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.example-component {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  button {\n    background-color: indigo;\n    color: white;\n    margin: 8px;\n  }\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport {\n  translate,\n  AjaxHelper,\n  MatomoDialog,\n  SiteSelector,\n  SiteRef,\n  Site,\n  Matomo,\n} from '../../../../CoreHome/vue/src/index.ts';\n// } from 'CoreHome';\n\ninterface CsvSectionState {\n  isLoading: boolean;\n  count: number;\n  showDialog: boolean;\n  idSite: string | number;\n  siteName: string;\n  site: SiteRef;\n  sites: Record<string, Site>;\n  tokenAuth: string;\n  login: string;\n  date: string;\n}\n\nexport default defineComponent({\n  props: {\n    defaultSite: {\n      type: Object,\n      required: true,\n    },\n  },\n  components: {\n    MatomoDialog,\n    SiteSelector,\n  },\n  data(): CsvSectionState {\n    return {\n      isLoading: false,\n      count: 12,\n      showDialog: false,\n      idSite: '',\n      siteName: '',\n      site: this.defaultSite as SiteRef,\n      sites: {},\n      tokenAuth: '', // Placeholder for the token_auth\n      login: '',\n      date: '',\n    };\n  },\n  async mounted() {\n    console.log('Mounted...');\n    console.log('Sites:', this.sites);\n  },\n  setup() {\n    console.log('Setup...');\n    const sitesPromise = AjaxHelper.fetch<(string | number)[]>({\n      method: 'SitesManager.getSitesIdWithAdminAccess',\n      filter_limit: '-1',\n    });\n\n    return {\n      translate,\n      getSites() {\n        return sitesPromise;\n      },\n    };\n  },\n  methods: {\n    downloadCSV() {\n      console.log('Download CSV for site ID:', this.site);\n      console.log('Date:', this.date);\n\n      if (!this.site) {\n        console.error('Site ID is undefined or not selected.');\n        return;\n      }\n      const redirectParams = {\n        module: 'DataExport',\n        action: 'selectAllVisitsAndActions',\n        idSite: this.site.id,\n        date: this.date,\n      };\n      // Redirect because download is not possible with ajax\n      Matomo.helper.redirect(redirectParams);\n    },\n    websiteChanged() {\n      console.log('websiteChanged this.site:', this.site);\n      console.log('websiteChanged this.site:', this.site);\n    },\n    dateChanged() {\n      console.log('dateChanged this.date:', this.date);\n    },\n    sendRequest() {\n      console.log('sendRequest: selectAllVisitsAndActionsSiteId');\n    },\n  },\n});\n</script>\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport function translate(\n  translationStringId: string,\n  ...values: (string|string[]|number|number[]|boolean|boolean[])[]\n): string {\n  if (!translationStringId) {\n    return '';\n  }\n\n  let pkArgs = values as (string|number|boolean)[];\n  // handle variadic args AND single array of values (to match _pk_translate signature)\n  if (values.length === 1 && values[0] && Array.isArray(values[0])) {\n    [pkArgs] = values as (string|number|boolean)[][];\n  }\n  return window._pk_translate(translationStringId, pkArgs); // eslint-disable-line\n}\n\nexport function translateOrDefault(\n  translationStringIdOrText?: string,\n  ...values: (string|string[]|number|number[]|boolean|boolean[])[]\n): string {\n  if (!translationStringIdOrText || !window.piwik_translations[translationStringIdOrText]) {\n    return translationStringIdOrText!;\n  }\n\n  return translate(translationStringIdOrText!, ...values);\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\ninterface Period {\n  getPrettyString(): string;\n  getDateRange(): Date[];\n  containsToday(): boolean;\n}\n\ninterface PeriodClass {\n  parse(strDate: string|Date): Period;\n  getDisplayText(): string;\n}\n\n/**\n * Matomo period management service for the frontend.\n *\n * Usage:\n *\n *     var DayPeriod = matomoPeriods.get('day');\n *     var day = new DayPeriod(new Date());\n *\n * or\n *\n *     var day = matomoPeriods.parse('day', '2013-04-05');\n *\n * Adding custom periods:\n *\n * To add your own period to the frontend, create a period class for it\n * w/ the following methods:\n *\n * - **getPrettyString()**: returns a human readable display string for the period.\n * - **getDateRange()**: returns an array w/ two elements, the first being the start\n *                       Date of the period, the second being the end Date. The dates\n *                       must be Date objects, not strings, and are inclusive.\n * - **containsToday()**: returns true if the date period contains today. False if not.\n * - (_static_) **parse(strDate)**: creates a new instance of this period from the\n *                                  value of the 'date' query parameter.\n * - (_static_) **getDisplayText**: returns translated text for the period, eg, 'month',\n *                                  'week', etc.\n *\n * Then call Periods.addCustomPeriod w/ your period class:\n *\n *     Periods.addCustomPeriod('mycustomperiod', MyCustomPeriod);\n *\n * NOTE: currently only single date periods like day, week, month year can\n *       be extended. Other types of periods that require a special UI to\n *       view/edit aren't, since there is currently no way to use a\n *       custom UI for a custom period.\n */\nclass Periods {\n  periods: {[name: string]: PeriodClass} = {};\n\n  periodOrder: string[] = [];\n\n  addCustomPeriod(name: string, periodClass: PeriodClass) {\n    if (this.periods[name]) {\n      throw new Error(`The \"${name}\" period already exists! It cannot be overridden.`);\n    }\n\n    this.periods[name] = periodClass;\n    this.periodOrder.push(name);\n  }\n\n  getAllLabels(): string[] {\n    return Array<string>().concat(this.periodOrder);\n  }\n\n  get(strPeriod: string): PeriodClass {\n    const periodClass = this.periods[strPeriod];\n    if (!periodClass) {\n      throw new Error(`Invalid period label: ${strPeriod}`);\n    }\n    return periodClass;\n  }\n\n  parse(strPeriod: string, strDate: string): Period {\n    return this.get(strPeriod).parse(strDate);\n  }\n\n  isRecognizedPeriod(strPeriod: string): boolean {\n    return !!this.periods[strPeriod];\n  }\n}\n\nexport default new Periods();\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport function format(date: Date): string {\n  return $.datepicker.formatDate('yy-mm-dd', date);\n}\n\nexport function getToday(): Date {\n  const date = new Date(Date.now());\n\n  // undo browser timezone\n  date.setTime(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n\n  // apply Matomo site timezone (if it exists)\n  date.setHours(date.getHours() + ((window.piwik.timezoneOffset || 0) / 3600));\n\n  // get rid of hours/minutes/seconds/etc.\n  date.setHours(0);\n  date.setMinutes(0);\n  date.setSeconds(0);\n  date.setMilliseconds(0);\n  return date;\n}\n\nexport function parseDate(date: string|Date): Date {\n  if (date instanceof Date) {\n    return date;\n  }\n\n  const strDate = decodeURIComponent(date).trim();\n  if (strDate === '') {\n    throw new Error('Invalid date, empty string.');\n  }\n\n  if (strDate === 'today'\n    || strDate === 'now'\n  ) {\n    return getToday();\n  }\n\n  if (strDate === 'yesterday'\n    // note: ignoring the 'same time' part since the frontend doesn't care about the time\n    || strDate === 'yesterdaySameTime'\n  ) {\n    const yesterday = getToday();\n    yesterday.setDate(yesterday.getDate() - 1);\n    return yesterday;\n  }\n\n  if (strDate.match(/last[ -]?week/i)) {\n    const lastWeek = getToday();\n    lastWeek.setDate(lastWeek.getDate() - 7);\n    return lastWeek;\n  }\n\n  if (strDate.match(/last[ -]?month/i)) {\n    const lastMonth = getToday();\n    lastMonth.setDate(1);\n    lastMonth.setMonth(lastMonth.getMonth() - 1);\n    return lastMonth;\n  }\n\n  if (strDate.match(/last[ -]?year/i)) {\n    const lastYear = getToday();\n    lastYear.setFullYear(lastYear.getFullYear() - 1);\n    return lastYear;\n  }\n\n  return $.datepicker.parseDate('yy-mm-dd', strDate);\n}\n\nexport function todayIsInRange(dateRange: Date[]): boolean {\n  if (dateRange.length !== 2) {\n    return false;\n  }\n\n  if (getToday() >= dateRange[0] && getToday() <= dateRange[1]) {\n    return true;\n  }\n\n  return false;\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from '../translate';\nimport Periods from './Periods';\nimport { parseDate, format, todayIsInRange } from './utilities';\n\nexport default class DayPeriod {\n  constructor(private dateInPeriod: Date) {}\n\n  static parse(strDate: string): DayPeriod {\n    return new DayPeriod(parseDate(strDate));\n  }\n\n  static getDisplayText(): string {\n    return translate('Intl_PeriodDay');\n  }\n\n  getPrettyString(): string {\n    return format(this.dateInPeriod);\n  }\n\n  getDateRange(): Date[] {\n    return [new Date(this.dateInPeriod.getTime()), new Date(this.dateInPeriod.getTime())];\n  }\n\n  containsToday(): boolean {\n    return todayIsInRange(this.getDateRange());\n  }\n}\n\nPeriods.addCustomPeriod('day', DayPeriod);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from '../translate';\nimport Periods from './Periods';\nimport { parseDate, format, todayIsInRange } from './utilities';\n\nexport default class WeekPeriod {\n  constructor(private dateInPeriod: Date) {}\n\n  static parse(strDate: string): WeekPeriod {\n    return new WeekPeriod(parseDate(strDate));\n  }\n\n  static getDisplayText(): string {\n    return translate('Intl_PeriodWeek');\n  }\n\n  getPrettyString(): string {\n    const weekDates = this.getDateRange();\n    const startWeek = format(weekDates[0]);\n    const endWeek = format(weekDates[1]);\n\n    return translate('General_DateRangeFromTo', [startWeek, endWeek]);\n  }\n\n  getDateRange(): Date[] {\n    const daysToMonday = (this.dateInPeriod.getDay() + 6) % 7;\n\n    const startWeek = new Date(this.dateInPeriod.getTime());\n    startWeek.setDate(this.dateInPeriod.getDate() - daysToMonday);\n\n    const endWeek = new Date(startWeek.getTime());\n    endWeek.setDate(startWeek.getDate() + 6);\n\n    return [startWeek, endWeek];\n  }\n\n  containsToday(): boolean {\n    return todayIsInRange(this.getDateRange());\n  }\n}\n\nPeriods.addCustomPeriod('week', WeekPeriod);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from '../translate';\nimport Periods from './Periods';\nimport { parseDate, todayIsInRange } from './utilities';\n\nexport default class MonthPeriod {\n  constructor(private dateInPeriod: Date) {}\n\n  static parse(strDate: string): MonthPeriod {\n    return new MonthPeriod(parseDate(strDate));\n  }\n\n  static getDisplayText(): string {\n    return translate('Intl_PeriodMonth');\n  }\n\n  getPrettyString(): string {\n    const month = translate(`Intl_Month_Long_StandAlone_${this.dateInPeriod.getMonth() + 1}`);\n    return `${month} ${this.dateInPeriod.getFullYear()}`;\n  }\n\n  getDateRange(): Date[] {\n    const startMonth = new Date(this.dateInPeriod.getTime());\n    startMonth.setDate(1);\n\n    const endMonth = new Date(this.dateInPeriod.getTime());\n    endMonth.setDate(1);\n    endMonth.setMonth(endMonth.getMonth() + 1);\n    endMonth.setDate(0);\n\n    return [startMonth, endMonth];\n  }\n\n  containsToday(): boolean {\n    return todayIsInRange(this.getDateRange());\n  }\n}\n\nPeriods.addCustomPeriod('month', MonthPeriod);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from '../translate';\nimport Periods from './Periods';\nimport { parseDate, todayIsInRange } from './utilities';\n\nexport default class YearPeriod {\n  constructor(private dateInPeriod: Date) {}\n\n  static parse(strDate: string): YearPeriod {\n    return new YearPeriod(parseDate(strDate));\n  }\n\n  static getDisplayText(): string {\n    return translate('Intl_PeriodYear');\n  }\n\n  getPrettyString(): string {\n    return this.dateInPeriod.getFullYear().toString();\n  }\n\n  getDateRange(): Date[] {\n    const startYear = new Date(this.dateInPeriod.getTime());\n    startYear.setMonth(0);\n    startYear.setDate(1);\n\n    const endYear = new Date(this.dateInPeriod.getTime());\n    endYear.setMonth(12);\n    endYear.setDate(0);\n\n    return [startYear, endYear];\n  }\n\n  containsToday(): boolean {\n    return todayIsInRange(this.getDateRange());\n  }\n}\n\nPeriods.addCustomPeriod('year', YearPeriod);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from '../translate';\nimport Periods from './Periods';\nimport {\n  parseDate,\n  format,\n  getToday,\n  todayIsInRange,\n} from './utilities';\n\nexport default class RangePeriod {\n  constructor(\n    public readonly startDate: Date,\n    public readonly endDate: Date,\n    public readonly childPeriodType: string,\n  ) {}\n\n  /**\n   * Returns a range representing the last N childPeriodType periods, including the current one.\n   */\n  static getLastNRange(\n    childPeriodType: string,\n    strAmount: string|number,\n    strEndDate?: Date|string,\n  ): RangePeriod {\n    const nAmount = Math.max(parseInt(strAmount.toString(), 10) - 1, 0);\n    if (Number.isNaN(nAmount)) {\n      throw new Error('Invalid range strAmount');\n    }\n\n    let endDate = strEndDate ? parseDate(strEndDate) : getToday();\n\n    let startDate = new Date(endDate.getTime());\n    if (childPeriodType === 'day') {\n      startDate.setDate(startDate.getDate() - nAmount);\n    } else if (childPeriodType === 'week') {\n      startDate.setDate(startDate.getDate() - (nAmount * 7));\n    } else if (childPeriodType === 'month') {\n      startDate.setDate(1);\n      startDate.setMonth(startDate.getMonth() - nAmount);\n    } else if (childPeriodType === 'year') {\n      startDate.setFullYear(startDate.getFullYear() - nAmount);\n    } else {\n      throw new Error(`Unknown period type '${childPeriodType}'.`);\n    }\n\n    if (childPeriodType !== 'day') {\n      const startPeriod = Periods.periods[childPeriodType].parse(startDate);\n      const endPeriod = Periods.periods[childPeriodType].parse(endDate);\n\n      [startDate] = startPeriod.getDateRange();\n      [, endDate] = endPeriod.getDateRange();\n    }\n\n    const firstWebsiteDate = new Date(1991, 7, 6);\n    if (startDate.getTime() - firstWebsiteDate.getTime() < 0) {\n      switch (childPeriodType) {\n        case 'year':\n          startDate = new Date(1992, 0, 1);\n          break;\n        case 'month':\n          startDate = new Date(1991, 8, 1);\n          break;\n        case 'week':\n          startDate = new Date(1991, 8, 12);\n          break;\n        case 'day':\n        default:\n          startDate = firstWebsiteDate;\n          break;\n      }\n    }\n\n    return new RangePeriod(startDate, endDate, childPeriodType);\n  }\n\n  /**\n   * Returns a range representing a specific child date range counted back from the end date\n   *\n   * @param childPeriodType Type of the period, eg. day, week, year\n   * @param rangeEndDate\n   * @param countBack Return only the child date range for this specific period number\n   * @returns {RangePeriod}\n   */\n  static getLastNRangeChild(\n    childPeriodType: string,\n    rangeEndDate: Date|string,\n    countBack: number,\n  ): RangePeriod {\n    const ed = rangeEndDate ? parseDate(rangeEndDate) : getToday();\n    let startDate = new Date(ed.getTime());\n    let endDate = new Date(ed.getTime());\n\n    if (childPeriodType === 'day') {\n      startDate.setDate(startDate.getDate() - countBack);\n      endDate.setDate(endDate.getDate() - countBack);\n    } else if (childPeriodType === 'week') {\n      startDate.setDate(startDate.getDate() - (countBack * 7));\n      endDate.setDate(endDate.getDate() - (countBack * 7));\n    } else if (childPeriodType === 'month') {\n      startDate.setDate(1);\n      startDate.setMonth(startDate.getMonth() - countBack);\n      endDate.setDate(1);\n      endDate.setMonth(endDate.getMonth() - countBack);\n    } else if (childPeriodType === 'year') {\n      startDate.setFullYear(startDate.getFullYear() - countBack);\n      endDate.setFullYear(endDate.getFullYear() - countBack);\n    } else {\n      throw new Error(`Unknown period type '${childPeriodType}'.`);\n    }\n\n    if (childPeriodType !== 'day') {\n      const startPeriod = Periods.periods[childPeriodType].parse(startDate);\n      const endPeriod = Periods.periods[childPeriodType].parse(endDate);\n\n      [startDate] = startPeriod.getDateRange();\n      [, endDate] = endPeriod.getDateRange();\n    }\n\n    const firstWebsiteDate = new Date(1991, 7, 6);\n    if (startDate.getTime() - firstWebsiteDate.getTime() < 0) {\n      switch (childPeriodType) {\n        case 'year':\n          startDate = new Date(1992, 0, 1);\n          break;\n        case 'month':\n          startDate = new Date(1991, 8, 1);\n          break;\n        case 'week':\n          startDate = new Date(1991, 8, 12);\n          break;\n        case 'day':\n        default:\n          startDate = firstWebsiteDate;\n          break;\n      }\n    }\n\n    return new RangePeriod(startDate, endDate, childPeriodType);\n  }\n\n  static parse(strDate: string, childPeriodType = 'day'): RangePeriod {\n    if (/^previous/.test(strDate)) {\n      const endDate = RangePeriod.getLastNRange(childPeriodType, '2').startDate;\n      return RangePeriod.getLastNRange(childPeriodType, strDate.substring(8), endDate);\n    }\n\n    if (/^last/.test(strDate)) {\n      return RangePeriod.getLastNRange(childPeriodType, strDate.substring(4));\n    }\n\n    const parts = decodeURIComponent(strDate).split(',');\n    return new RangePeriod(parseDate(parts[0]), parseDate(parts[1]), childPeriodType);\n  }\n\n  static getDisplayText(): string {\n    return translate('General_DateRangeInPeriodList');\n  }\n\n  getPrettyString(): string {\n    const start = format(this.startDate);\n    const end = format(this.endDate);\n    return translate('General_DateRangeFromTo', [start, end]);\n  }\n\n  getDateRange(): Date[] {\n    return [this.startDate, this.endDate];\n  }\n\n  containsToday(): boolean {\n    return todayIsInRange(this.getDateRange());\n  }\n\n  getDayCount(): number {\n    return (Math.ceil((this.endDate.getTime() - this.startDate.getTime()) / (1000 * 3600 * 24))\n            + 1);\n  }\n}\n\nPeriods.addCustomPeriod('range', RangePeriod);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport Periods from '../Periods/Periods';\n\nlet originalTitle: string;\n\nconst { piwik, broadcast, piwikHelper } = window;\n\npiwik.helper = piwikHelper;\npiwik.broadcast = broadcast;\n\npiwik.updateDateInTitle = function updateDateInTitle(date: string, period: string) {\n  if (!$('.top_controls #periodString').length) {\n    return;\n  }\n\n  // Cache server-rendered page title\n  originalTitle = originalTitle || document.title;\n\n  if (originalTitle.indexOf(piwik.siteName) === 0) {\n    const dateString = ` - ${Periods.parse(period, date).getPrettyString()} `;\n    document.title = `${piwik.siteName}${dateString}${originalTitle.slice(piwik.siteName.length)}`;\n  }\n};\n\npiwik.hasUserCapability = function hasUserCapability(capability: string) {\n  return Array.isArray(piwik.userCapabilities)\n    && piwik.userCapabilities.indexOf(capability) !== -1;\n};\n\npiwik.on = function addMatomoEventListener(eventName: string, listener: WrappedEventListener) {\n  function listenerWrapper(evt: Event) {\n    listener(...(evt as CustomEvent<any[]>).detail); // eslint-disable-line\n  }\n\n  listener.wrapper = listenerWrapper;\n\n  window.addEventListener(eventName, listenerWrapper);\n};\n\npiwik.off = function removeMatomoEventListener(eventName: string, listener: WrappedEventListener) {\n  if (listener.wrapper) {\n    window.removeEventListener(eventName, listener.wrapper);\n  }\n};\n\npiwik.postEvent = function postMatomoEvent(\n  eventName: string,\n  ...args: any[] // eslint-disable-line\n): void {\n  const event = new CustomEvent(eventName, { detail: args });\n  window.dispatchEvent(event);\n};\n\nconst Matomo = piwik;\nexport default Matomo;\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport { default as Periods } from './Periods';\nexport { default as Day } from './Day';\nexport { default as Week } from './Week';\nexport { default as Month } from './Month';\nexport { default as Year } from './Year';\nexport { default as Range } from './Range';\nexport * from './utilities';\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { computed, ref, readonly } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport { Periods, format } from '../Periods'; // important to load all periods here\n\nconst { piwik, broadcast } = window;\n\nfunction isValidPeriod(periodStr: string, dateStr: string) {\n  try {\n    Periods.parse(periodStr, dateStr);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n// using unknown since readonly does not work well with recursive types like QueryParameters\ntype ParsedQueryParameters = Record<string, unknown>;\n\n/**\n * URL store and helper functions.\n */\nclass MatomoUrl {\n  readonly url = ref<URL|null>(null);\n\n  readonly urlQuery = computed(\n    () => (this.url.value ? this.url.value.search.replace(/^\\?/, '') : ''),\n  );\n\n  readonly hashQuery = computed(\n    () => (this.url.value ? this.url.value.hash.replace(/^[#/?]+/, '') : ''),\n  );\n\n  readonly urlParsed = computed(() => readonly(\n    this.parse(this.urlQuery.value) as ParsedQueryParameters,\n  ));\n\n  readonly hashParsed = computed(() => readonly(\n    this.parse(this.hashQuery.value) as ParsedQueryParameters,\n  ));\n\n  readonly parsed = computed(() => readonly({\n    ...this.urlParsed.value,\n    ...this.hashParsed.value,\n  } as ParsedQueryParameters));\n\n  constructor() {\n    this.url.value = new URL(window.location.href);\n\n    window.addEventListener('hashchange', (event) => {\n      this.url.value = new URL(event.newURL);\n      this.updatePeriodParamsFromUrl();\n    });\n\n    this.updatePeriodParamsFromUrl();\n  }\n\n  updateHashToUrl(urlWithoutLeadingHash: string) {\n    const wholeHash = `#${urlWithoutLeadingHash}`;\n\n    if (window.location.hash === wholeHash) { // trigger event manually since the url is the same\n      window.dispatchEvent(new HashChangeEvent('hashchange', {\n        newURL: window.location.href,\n        oldURL: window.location.href,\n      }));\n    } else {\n      window.location.hash = wholeHash;\n    }\n  }\n\n  updateHash(params: QueryParameters|string) {\n    const modifiedParams = this.getFinalHashParams(params);\n    const serializedParams = this.stringify(modifiedParams);\n\n    this.updateHashToUrl(`?${serializedParams}`);\n  }\n\n  updateUrl(params: QueryParameters|string, hashParams: QueryParameters|string = {}) {\n    const serializedParams: string = typeof params !== 'string' ? this.stringify(params) : params;\n\n    const modifiedHashParams = Object.keys(hashParams).length\n      ? this.getFinalHashParams(hashParams, params)\n      : {};\n\n    const serializedHashParams: string = this.stringify(modifiedHashParams);\n\n    let url = `?${serializedParams}`;\n    if (serializedHashParams.length) {\n      url = `${url}#?${serializedHashParams}`;\n    }\n\n    window.broadcast.propagateNewPage('', undefined, undefined, undefined, url);\n  }\n\n  private getFinalHashParams(\n    params: QueryParameters|string,\n    urlParams: QueryParameters|string = {},\n  ) {\n    const paramsObj = typeof params !== 'string'\n      ? params as QueryParameters\n      : this.parse(params as string);\n\n    const urlParamsObj = typeof params !== 'string'\n      ? urlParams as QueryParameters\n      : this.parse(urlParams as string);\n\n    return {\n      // these params must always be present in the hash\n      period: urlParamsObj.period || this.parsed.value.period,\n      date: urlParamsObj.date || this.parsed.value.date,\n      segment: urlParamsObj.segment || this.parsed.value.segment,\n\n      ...paramsObj,\n    };\n  }\n\n  // if we're in an embedded context, loads an entire new URL, otherwise updates the hash\n  updateLocation(params: QueryParameters|string) {\n    if (Matomo.helper.isReportingPage()) {\n      this.updateHash(params);\n      return;\n    }\n\n    this.updateUrl(params);\n  }\n\n  getSearchParam(paramName: string): string {\n    const hash = window.location.href.split('#');\n\n    const regex = new RegExp(`${paramName}(\\\\[]|=)`);\n    if (hash && hash[1] && regex.test(decodeURIComponent(hash[1]))) {\n      const valueFromHash = window.broadcast.getValueFromHash(paramName, window.location.href);\n\n      // for date, period and idsite fall back to parameter from url, if non in hash was provided\n      if (valueFromHash\n        || (paramName !== 'date' && paramName !== 'period' && paramName !== 'idSite')\n      ) {\n        return valueFromHash;\n      }\n    }\n\n    return window.broadcast.getValueFromUrl(paramName, window.location.search);\n  }\n\n  parse(query: string): QueryParameters {\n    return broadcast.getValuesFromUrl(`?${query}`, true);\n  }\n\n  stringify(search: QueryParameters): string {\n    const searchWithoutEmpty = Object.fromEntries(\n      Object.entries(search).filter(([, value]) => value !== '' && value !== null && value !== undefined),\n    );\n\n    // using jQuery since URLSearchParams does not handle array params the way Matomo uses them\n    return $.param(searchWithoutEmpty).replace(/%5B%5D/g, '[]')\n      // some browsers treat URLs w/ date=a,b differently from date=a%2Cb, causing multiple\n      // entries to show up in the browser history.\n      .replace(/%2C/g, ',')\n      // jquery seems to encode space characters as '+', but certain parts of matomo won't\n      // decode it correctly, so we make sure to use %20 instead\n      .replace(/\\+/g, '%20');\n  }\n\n  updatePeriodParamsFromUrl(): void {\n    let date = this.getSearchParam('date');\n    const period = this.getSearchParam('period');\n    if (!isValidPeriod(period, date)) {\n      // invalid data in URL\n      return;\n    }\n\n    if (piwik.period === period && piwik.currentDateString === date) {\n      // this period / date is already loaded\n      return;\n    }\n\n    piwik.period = period;\n\n    const dateRange = Periods.parse(period, date).getDateRange();\n    piwik.startDateString = format(dateRange[0]);\n    piwik.endDateString = format(dateRange[1]);\n\n    piwik.updateDateInTitle(date, period);\n\n    // do not set anything to previousN/lastN, as it's more useful to plugins\n    // to have the dates than previousN/lastN.\n    if (piwik.period === 'range') {\n      date = `${piwik.startDateString},${piwik.endDateString}`;\n    }\n\n    piwik.currentDateString = date;\n  }\n}\n\nconst instance = new MatomoUrl();\nexport default instance;\n\npiwik.updatePeriodParamsFromUrl = instance.updatePeriodParamsFromUrl.bind(instance);\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n/* eslint-disable max-classes-per-file */\n\nimport jqXHR = JQuery.jqXHR;\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport Matomo from '../Matomo/Matomo';\n\nexport interface AjaxOptions {\n  withTokenInUrl?: boolean;\n  postParams?: QueryParameters;\n  headers?: Record<string, string>;\n  format?: string;\n  createErrorNotification?: boolean;\n  abortController?: AbortController;\n  returnResponseObject?: boolean;\n  errorElement?: HTMLElement|JQuery|string;\n  redirectOnSuccess?: QueryParameters|boolean;\n}\n\ninterface ErrorResponse {\n  result: string;\n  message: string;\n}\n\nconst { $ } = window;\n\nwindow.globalAjaxQueue = [] as unknown as GlobalAjaxQueue;\nwindow.globalAjaxQueue.active = 0;\n\nwindow.globalAjaxQueue.clean = function globalAjaxQueueClean() {\n  for (let i = this.length; i >= 0; i -= 1) {\n    if (!this[i] || this[i]!.readyState === 4) {\n      this.splice(i, 1);\n    }\n  }\n};\n\nwindow.globalAjaxQueue.push = function globalAjaxQueuePush(...args: (XMLHttpRequest|null)[]) {\n  this.active += args.length;\n\n  // cleanup ajax queue\n  this.clean();\n\n  // call original array push\n  return Array.prototype.push.call(this, ...args);\n};\n\nwindow.globalAjaxQueue.abort = function globalAjaxQueueAbort() {\n  // abort all queued requests if possible\n  this.forEach((x) => x && x.abort && x.abort());\n\n  // remove all elements from array\n  this.splice(0, this.length);\n\n  this.active = 0;\n};\n\ntype AnyFunction = (...params:any[]) => any; // eslint-disable-line\n\n/**\n * error callback to use by default\n */\nfunction defaultErrorCallback(deferred: XMLHttpRequest, status: string): void {\n  // do not display error message if request was aborted\n  if (status === 'abort' || !deferred || deferred.status === 0) {\n    return;\n  }\n\n  if (typeof Piwik_Popover === 'undefined') {\n    console.log(`Request failed: ${deferred.responseText}`); // mostly for tests\n    return;\n  }\n\n  if (Piwik_Popover.isOpen() && deferred && deferred.status === 500) {\n    $(document.body).html(piwikHelper.escape(deferred.responseText));\n  } else {\n    $('#loadingError').show();\n  }\n}\n\nclass ApiResponseError extends Error {}\n\n/**\n * Global ajax helper to handle requests within Matomo\n */\nexport default class AjaxHelper<T = any> { // eslint-disable-line\n  /**\n   * Format of response\n   */\n  format = 'json';\n\n  /**\n   * A timeout for the request which will override any global timeout\n   */\n  timeout: number|null = null;\n\n  /**\n   * Callback function to be executed on success\n   */\n  callback: AnyFunction|null = null;\n\n  /**\n   * Use this.callback if an error is returned\n   */\n  useRegularCallbackInCaseOfError = false;\n\n  /**\n   * Callback function to be executed on error\n   *\n   * @deprecated use the jquery promise API\n   */\n  errorCallback: AnyFunction|null;\n\n  withToken = false;\n\n  /**\n   * Callback function to be executed on complete (after error or success)\n   *\n   * @deprecated use the jquery promise API\n   */\n  completeCallback?: AnyFunction;\n\n  /**\n   * Params to be passed as GET params\n   * @see ajaxHelper.mixinDefaultGetParams\n   */\n  getParams: QueryParameters = {};\n\n  /**\n   * Base URL used in the AJAX request. Can be set by setUrl.\n   *\n   * It is set to '?' rather than 'index.php?' to increase chances that it works\n   * including for users who have an automatic 301 redirection from index.php? to ?\n   * POST values are missing when there is such 301 redirection. So by by-passing\n   * this 301 redirection, we avoid this issue.\n   *\n   * @see ajaxHelper.setUrl\n   */\n  getUrl = '?';\n\n  /**\n   * Params to be passed as GET params\n   * @see ajaxHelper.mixinDefaultPostParams\n   */\n  postParams: QueryParameters = {};\n\n  /**\n   * Element to be displayed while loading\n   */\n  loadingElement: HTMLElement|null|JQuery|string = null;\n\n  /**\n   * Element to be displayed on error\n   */\n  errorElement: HTMLElement|JQuery|string = '#ajaxError';\n\n  /**\n   * Extra headers to add to the request.\n   */\n  headers?: Record<string, string> = {\n    'X-Requested-With': 'XMLHttpRequest',\n  };\n\n  /**\n   * Handle for current request\n   */\n  requestHandle: JQuery.jqXHR|null = null;\n\n  abortController: AbortController|null = null;\n\n  defaultParams = ['idSite', 'period', 'date', 'segment'];\n\n  resolveWithHelper = false;\n\n  // helper method entry point\n  static fetch<R = any>( // eslint-disable-line\n    params: QueryParameters|QueryParameters[],\n    options: AjaxOptions = {},\n  ): Promise<R> {\n    const helper = new AjaxHelper<R>();\n    if (options.withTokenInUrl) {\n      helper.withTokenInUrl();\n    }\n    if (options.errorElement) {\n      helper.setErrorElement(options.errorElement);\n    }\n    if (options.redirectOnSuccess) {\n      helper.redirectOnSuccess(\n        options.redirectOnSuccess !== true ? options.redirectOnSuccess : undefined,\n      );\n    }\n    helper.setFormat(options.format || 'json');\n    if (Array.isArray(params)) {\n      helper.setBulkRequests(...(params as QueryParameters[]));\n    } else {\n      Object.keys(params).forEach((key) => {\n        if (/password/i.test(key)) {\n          throw new Error(`Password parameters are not allowed to be sent as GET parameter. Please send ${key} as POST parameter instead.`);\n        }\n      });\n\n      helper.addParams({\n        module: 'API',\n        format: options.format || 'json',\n        ...params,\n        // ajax helper does not encode the segment parameter assuming it is already encoded. this is\n        // probably for pre-angularjs code, so we don't want to do this now, but just treat segment\n        // as a normal query parameter input (so it will have double encoded values in input params\n        // object, then naturally triple encoded in the URL after a $.param call), however we need\n        // to support any existing uses of the old code, so instead we do a manual encode here. new\n        // code that uses .fetch() will not need to pre-encode the parameter, while old code\n        // can pre-encode it.\n        segment: params.segment ? encodeURIComponent(params.segment as string) : undefined,\n      }, 'get');\n    }\n    if (options.postParams) {\n      helper.addParams(options.postParams, 'post');\n    }\n    if (options.headers) {\n      helper.headers = { ...helper.headers, ...options.headers };\n    }\n\n    let createErrorNotification = true;\n    if (typeof options.createErrorNotification !== 'undefined'\n      && !options.createErrorNotification\n    ) {\n      helper.useCallbackInCaseOfError();\n      helper.setErrorCallback(null);\n      createErrorNotification = false;\n    }\n\n    if (options.abortController) {\n      helper.abortController = options.abortController;\n    }\n\n    if (options.returnResponseObject) {\n      helper.resolveWithHelper = true;\n    }\n\n    return helper.send().then((result: R | ErrorResponse | AjaxHelper) => {\n      const data = result instanceof AjaxHelper ? result.requestHandle!.responseJSON : result;\n\n      // check for error if not using default notification behavior\n      const results = helper.postParams.method === 'API.getBulkRequest' && Array.isArray(data) ? data : [data];\n      const errors = results.filter((r) => r.result === 'error').map((r) => r.message as string);\n\n      if (errors.length) {\n        throw new ApiResponseError(errors.filter((e) => e.length).join('\\n'));\n      }\n\n      return result as R;\n    }).catch((xhr: jqXHR) => {\n      if (createErrorNotification || xhr instanceof ApiResponseError) {\n        throw xhr;\n      }\n\n      let message = 'Something went wrong';\n      if (xhr.status === 504) {\n        message = 'Request was possibly aborted';\n      }\n      if (xhr.status === 429) {\n        message = 'Rate Limit was exceed';\n      }\n      throw new Error(message);\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static post<R = any>(\n    params: QueryParameters,\n    // eslint-disable-next-line\n    postParams: any = {},\n    options: AjaxOptions = {},\n  ): Promise<R> {\n    return AjaxHelper.fetch<R>(params, { ...options, postParams });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static oneAtATime<R = any>(\n    method: string,\n    options?: AjaxOptions,\n  ): (params: QueryParameters, postParams?: QueryParameters) => Promise<R> {\n    let abortController: AbortController|null = null;\n\n    return (params: QueryParameters, postParams?: QueryParameters) => {\n      if (abortController) {\n        abortController.abort();\n      }\n\n      abortController = new AbortController();\n      return AjaxHelper.post<R>(\n        {\n          ...params,\n          method,\n        },\n        postParams,\n        {\n          ...options,\n          abortController,\n        },\n      ).finally(() => {\n        abortController = null;\n      });\n    };\n  }\n\n  constructor() {\n    this.errorCallback = defaultErrorCallback;\n  }\n\n  /**\n   * Adds params to the request.\n   * If params are given more then once, the latest given value is used for the request\n   *\n   * @param  initialParams\n   * @param  type  type of given parameters (POST or GET)\n   * @return {void}\n   */\n  addParams(initialParams: QueryParameters|string, type: string): void {\n    const params: QueryParameters = typeof initialParams === 'string'\n      ? window.broadcast.getValuesFromUrl(initialParams) : initialParams;\n\n    const arrayParams = ['compareSegments', 'comparePeriods', 'compareDates'];\n    Object.keys(params).forEach((key) => {\n      let value = params[key];\n      if (arrayParams.indexOf(key) !== -1\n        && !value\n      ) {\n        return;\n      }\n\n      if (typeof value === 'boolean') {\n        value = value ? 1 : 0;\n      }\n\n      if (type.toLowerCase() === 'get') {\n        this.getParams[key] = value;\n      } else if (type.toLowerCase() === 'post') {\n        this.postParams[key] = value;\n      }\n    });\n  }\n\n  withTokenInUrl(): void {\n    this.withToken = true;\n  }\n\n  /**\n   * Sets the base URL to use in the AJAX request.\n   */\n  setUrl(url: string): void {\n    this.addParams(broadcast.getValuesFromUrl(url), 'GET');\n  }\n\n  /**\n   * Gets this helper instance ready to send a bulk request. Each argument to this\n   * function is a single request to use.\n   */\n  setBulkRequests(...urls: Array<string|QueryParameters>): void {\n    const urlsProcessed = urls.map((u) => (typeof u === 'string' ? u : $.param(u)));\n\n    this.addParams({\n      module: 'API',\n      method: 'API.getBulkRequest',\n      urls: urlsProcessed,\n      format: 'json',\n    }, 'post');\n  }\n\n  /**\n   * Set a timeout (in milliseconds) for the request. This will override any global timeout.\n   *\n   * @param timeout  Timeout in milliseconds\n   */\n  setTimeout(timeout: number): void {\n    this.timeout = timeout;\n  }\n\n  /**\n   * Sets the callback called after the request finishes\n   *\n   * @param callback  Callback function\n   * @deprecated use the jquery promise API\n   */\n  setCallback(callback: AnyFunction): void {\n    this.callback = callback;\n  }\n\n  /**\n   * Set that the callback passed to setCallback() should be used if an application error (i.e. an\n   * Exception in PHP) is returned.\n   */\n  useCallbackInCaseOfError(): void {\n    this.useRegularCallbackInCaseOfError = true;\n  }\n\n  /**\n   * Set callback to redirect on success handler\n   * &update=1(+x) will be appended to the current url\n   *\n   * @param [params] to modify in redirect url\n   * @return {void}\n   */\n  redirectOnSuccess(params?: QueryParameters): void {\n    this.setCallback(() => {\n      piwikHelper.redirect(params);\n    });\n  }\n\n  /**\n   * Sets the callback called in case of an error within the request\n   *\n   * @deprecated use the jquery promise API\n   */\n  setErrorCallback(callback: AnyFunction|null): void {\n    this.errorCallback = callback;\n  }\n\n  /**\n   * Sets the complete callback which is called after an error or success callback.\n   *\n   * @deprecated use the jquery promise API\n   */\n  setCompleteCallback(callback: AnyFunction): void {\n    this.completeCallback = callback;\n  }\n\n  /**\n   * Sets the response format for the request\n   *\n   * @param format  response format (e.g. json, html, ...)\n   */\n  setFormat(format: string): void {\n    this.format = format;\n  }\n\n  /**\n   * Set the div element to show while request is loading\n   *\n   * @param [element]  selector for the loading element\n   */\n  setLoadingElement(element: string|HTMLElement|JQuery): void {\n    this.loadingElement = element || '#ajaxLoadingDiv';\n  }\n\n  /**\n   * Set the div element to show on error\n   *\n   * @param element  selector for the error element\n   */\n  setErrorElement(element: HTMLElement|JQuery|string): void {\n    if (!element) {\n      return;\n    }\n    this.errorElement = element;\n  }\n\n  /**\n   * Detect whether are allowed to use the given default parameter or not\n   */\n  private useGETDefaultParameter(parameter: string): boolean {\n    if (parameter && this.defaultParams) {\n      for (let i = 0; i < this.defaultParams.length; i += 1) {\n        if (this.defaultParams[i] === parameter) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Removes a default parameter that is usually send automatically along the request.\n   *\n   * @param parameter  A name such as \"period\", \"date\", \"segment\".\n   */\n  removeDefaultParameter(parameter: string): void {\n    if (parameter && this.defaultParams) {\n      for (let i = 0; i < this.defaultParams.length; i += 1) {\n        if (this.defaultParams[i] === parameter) {\n          this.defaultParams.splice(i, 1);\n        }\n      }\n    }\n  }\n\n  /**\n   * Send the request\n   */\n  send(): Promise<T | ErrorResponse> {\n    if ($(this.errorElement).length) {\n      $(this.errorElement).hide();\n    }\n\n    if (this.loadingElement) {\n      $(this.loadingElement).fadeIn();\n    }\n\n    this.requestHandle = this.buildAjaxCall();\n    window.globalAjaxQueue.push(this.requestHandle);\n\n    if (this.abortController) {\n      this.abortController.signal.addEventListener('abort', () => {\n        if (this.requestHandle) {\n          this.requestHandle.abort();\n        }\n      });\n    }\n\n    const result = new Promise<T | ErrorResponse>((resolve, reject) => {\n      this.requestHandle!.then((data: unknown) => {\n        if (this.resolveWithHelper) {\n          // NOTE: we can't resolve w/ the jquery xhr, because it's a promise, and will\n          // just result in following the promise chain back to 'data'\n          resolve(this as unknown as (T | ErrorResponse)); // casting hack here\n        } else {\n          resolve(data as (T | ErrorResponse)); // ignoring textStatus/jqXHR\n        }\n      }).fail((xhr: jqXHR) => {\n        if (xhr.status === 429) {\n          console.log(`Warning: the '${$.param(this.getParams)}' request was rate limited!`);\n          reject(xhr);\n          return;\n        }\n\n        if (xhr.statusText === 'abort' || xhr.status === 0) {\n          return;\n        }\n\n        console.log(`Warning: the ${$.param(this.getParams)} request failed!`);\n\n        reject(xhr);\n      });\n    });\n\n    return result;\n  }\n\n  /**\n   * Aborts the current request if it is (still) running\n   */\n  abort(): void {\n    if (this.requestHandle && typeof this.requestHandle.abort === 'function') {\n      this.requestHandle.abort();\n      this.requestHandle = null;\n    }\n  }\n\n  /**\n   * Builds and sends the ajax requests\n   */\n  private buildAjaxCall(): JQuery.jqXHR {\n    const self = this;\n    const parameters = this.mixinDefaultGetParams(this.getParams);\n\n    let url = this.getUrl;\n    if (url[url.length - 1] !== '?') {\n      url += '&';\n    }\n\n    // we took care of encoding &segment properly already, so we don't use $.param for it ($.param\n    // URL encodes the values)\n    if (parameters.segment) {\n      url = `${url}segment=${parameters.segment}&`;\n      delete parameters.segment;\n    }\n    if (parameters.date) {\n      url = `${url}date=${decodeURIComponent(parameters.date.toString())}&`;\n      delete parameters.date;\n    }\n    url += $.param(parameters);\n    const ajaxCall = {\n      type: 'POST',\n      async: true,\n      url,\n      dataType: this.format || 'json',\n      complete: this.completeCallback,\n      headers: this.headers ? this.headers : undefined,\n      error: function errorCallback(...args: any[]) { // eslint-disable-line\n        window.globalAjaxQueue.active -= 1;\n\n        if (self.errorCallback) {\n          self.errorCallback.apply(this, args);\n        }\n      },\n      success: (response: any, status: string, request: jqXHR) => { // eslint-disable-line\n        if (this.loadingElement) {\n          $(this.loadingElement).hide();\n        }\n\n        const results = this.postParams.method === 'API.getBulkRequest' && Array.isArray(response) ? response : [response];\n        const errors = results.filter((r) => r.result === 'error')\n          .map((r) => r.message as string)\n          .filter((e) => e.length)\n          // count occurrences of error messages\n          .reduce((acc: Record<string, number>, e: string) => {\n            acc[e] = (acc[e] || 0) + 1;\n            return acc;\n          }, {});\n\n        if (errors && Object.keys(errors).length && !this.useRegularCallbackInCaseOfError) {\n          let errorMessage = '';\n          Object.keys(errors).forEach((error) => {\n            if (errorMessage.length) {\n              errorMessage += '<br />';\n            }\n            // append error count if it occured more than once\n            if (errors[error] > 1) {\n              errorMessage += `${error} (${errors[error]}x)`;\n            } else {\n              errorMessage += error;\n            }\n          });\n          let placeAt = null;\n          let type: string|null = 'toast';\n          if ($(this.errorElement).length && errorMessage.length) {\n            $(this.errorElement).show();\n            placeAt = this.errorElement;\n            type = null;\n          }\n\n          const isLoggedIn = !document.querySelector('#login_form');\n          if (errorMessage && isLoggedIn) {\n            const UI = window['require']('piwik/UI'); // eslint-disable-line\n            const notification = new UI.Notification();\n            notification.show(errorMessage, {\n              placeat: placeAt,\n              context: 'error',\n              type,\n              id: 'ajaxHelper',\n            });\n            notification.scrollToNotification();\n          }\n        } else if (this.callback) {\n          this.callback(response, status, request);\n        }\n\n        window.globalAjaxQueue.active -= 1;\n        if (Matomo.ajaxRequestFinished) {\n          Matomo.ajaxRequestFinished();\n        }\n      },\n      data: this.mixinDefaultPostParams(this.postParams),\n      timeout: this.timeout !== null ? this.timeout : undefined,\n    };\n\n    return $.ajax(ajaxCall);\n  }\n\n  private isRequestToApiMethod() {\n    return (this.getParams && this.getParams.module === 'API' && this.getParams.method)\n      || (this.postParams && this.postParams.module === 'API' && this.postParams.method);\n  }\n\n  isWidgetizedRequest(): boolean {\n    return (broadcast.getValueFromUrl('module') === 'Widgetize');\n  }\n\n  private getDefaultPostParams() {\n    if (this.withToken || this.isRequestToApiMethod() || Matomo.shouldPropagateTokenAuth) {\n      return {\n        token_auth: Matomo.token_auth,\n        // When viewing a widgetized report there won't be any session that can be used, so don't\n        // force session usage\n        force_api_session: broadcast.isWidgetizeRequestWithoutSession() ? 0 : 1,\n      };\n    }\n\n    return {};\n  }\n\n  /**\n   * Mixin the default parameters to send as POST\n   *\n   * @param params   parameter object\n   */\n  private mixinDefaultPostParams(params: QueryParameters): QueryParameters {\n    const defaultParams = this.getDefaultPostParams();\n\n    const mergedParams = {\n      ...defaultParams,\n      ...params,\n    };\n\n    return mergedParams;\n  }\n\n  /**\n   * Mixin the default parameters to send as GET\n   *\n   * @param   params   parameter object\n   */\n  public mixinDefaultGetParams(originalParams: QueryParameters): QueryParameters {\n    const segment = MatomoUrl.getSearchParam('segment');\n\n    const defaultParams: Record<string, string> = {\n      idSite: Matomo.idSite ? Matomo.idSite.toString() : broadcast.getValueFromUrl('idSite'),\n      period: Matomo.period || broadcast.getValueFromUrl('period'),\n      segment,\n    };\n\n    const params = originalParams;\n\n    // never append token_auth to url\n    if (params.token_auth) {\n      params.token_auth = null;\n      delete params.token_auth;\n    }\n\n    Object.keys(defaultParams).forEach((key) => {\n      if (this.useGETDefaultParameter(key)\n        && (params[key] === null || typeof params[key] === 'undefined' || params[key] === '')\n        && (this.postParams[key] === null\n          || typeof this.postParams[key] === 'undefined'\n          || this.postParams[key] === '')\n        && defaultParams[key]\n      ) {\n        params[key] = defaultParams[key];\n      }\n    });\n\n    // handle default date & period if not already set\n    if (this.useGETDefaultParameter('date') && !params.date && !this.postParams.date) {\n      params.date = Matomo.currentDateString;\n    }\n\n    return params;\n  }\n\n  getRequestHandle(): jqXHR|null {\n    return this.requestHandle;\n  }\n}\n","import AjaxHelper from './AjaxHelper';\n\ndeclare global {\n  interface Window {\n    ajaxHelper: typeof AjaxHelper;\n  }\n}\n\nwindow.ajaxHelper = AjaxHelper;\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { watch } from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\n\nconst { $ } = window;\n\nclass PopoverHandler {\n  constructor() {\n    this.setup();\n  }\n\n  private setup() {\n    watch(() => MatomoUrl.parsed.value.popover, () => this.onPopoverParamChanged());\n\n    if (MatomoUrl.parsed.value.popover) {\n      this.onPopoverParamChangedInitial();\n    }\n  }\n\n  // don't initiate the handler until the page had a chance to render,\n  // since some rowactions depend on what's been loaded.\n  private onPopoverParamChangedInitial() {\n    $(() => {\n      setTimeout(() => {\n        this.openOrClose();\n      });\n    });\n  }\n\n  private onPopoverParamChanged() {\n    // make sure all popover handles were registered\n    $(() => {\n      this.openOrClose();\n    });\n  }\n\n  private openOrClose() {\n    this.close();\n\n    // should be rather done by routing\n    const popoverParam = MatomoUrl.parsed.value.popover as string;\n    if (popoverParam) {\n      this.open(popoverParam);\n    } else {\n      // the URL should only be set to an empty popover if there are no popovers in the stack.\n      // to avoid avoid any strange inconsistent states, we reset the popover stack here.\n      window.broadcast.resetPopoverStack();\n    }\n  }\n\n  private close() {\n    window.Piwik_Popover.close();\n  }\n\n  private open(thePopoverParam: string) {\n    // in case the $ was encoded (e.g. when using copy&paste on urls in some browsers)\n    let popoverParam = decodeURIComponent(thePopoverParam);\n\n    // revert special encoding from broadcast.propagateNewPopoverParameter()\n    popoverParam = popoverParam.replace(/\\$/g, '%');\n    popoverParam = decodeURIComponent(popoverParam);\n\n    const popoverParamParts = popoverParam.split(':');\n    const handlerName = popoverParamParts[0];\n    popoverParamParts.shift();\n\n    const param = popoverParamParts.join(':');\n    if (typeof window.broadcast.popoverHandlers[handlerName] !== 'undefined'\n      && !window.broadcast.isLoginPage()\n    ) {\n      window.broadcast.popoverHandlers[handlerName](param);\n    }\n  }\n}\n\nexport default new PopoverHandler();\n","/*\n * General utils for managing cookies in Typescript.\n */\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function setCookie(name: string, val: string, seconds?: number) {\n  const date = new Date();\n\n  // set default day to 3 days\n  if (!seconds) {\n    // eslint-disable-next-line no-param-reassign\n    seconds = 3 * 24 * 60 * 1000;\n  }\n  // Set it expire in n days\n  date.setTime(date.getTime() + (seconds));\n\n  // Set it\n  document.cookie = `${name}=${val}; expires=${date.toUTCString()}; path=/`;\n}\n\n// eslint-disable-next-line consistent-return,@typescript-eslint/explicit-module-boundary-types\nexport function getCookie(name: string) {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n\n  // if cookie not exist return null\n  // eslint-disable-next-line eqeqeq\n  if (parts.length == 2) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const data = parts.pop().split(';').shift();\n    if (typeof data !== 'undefined') {\n      return data;\n    }\n  }\n  return null;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function deleteCookie(name: string) {\n  const date = new Date();\n\n  // Set it expire in -1 days\n  date.setTime(date.getTime() + (-1 * 24 * 60 * 60 * 1000));\n\n  // Set it\n  document.cookie = `${name}=; expires=${date.toUTCString()}; path=/`;\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { translate } from './translate';\nimport Matomo from './Matomo/Matomo';\nimport { setCookie, getCookie } from './CookieHelper/CookieHelper';\n\nconst { $ } = window;\n\nfunction handleZenMode() {\n  let zenMode = !!parseInt(getCookie('zenMode')!, 10);\n  const iconSwitcher = $('.top_controls .icon-arrowup');\n\n  function updateZenMode() {\n    if (zenMode) {\n      $('body').addClass('zenMode');\n      iconSwitcher.addClass('icon-arrowdown').removeClass('icon-arrowup');\n      iconSwitcher.prop('title', translate('CoreHome_ExitZenMode'));\n    } else {\n      $('body').removeClass('zenMode');\n      iconSwitcher.removeClass('icon-arrowdown').addClass('icon-arrowup');\n      iconSwitcher.prop('title', translate('CoreHome_EnterZenMode'));\n    }\n  }\n\n  Matomo.helper.registerShortcut('z', translate('CoreHome_ShortcutZenMode'), (event) => {\n    if (event.altKey) {\n      return;\n    }\n\n    zenMode = !zenMode;\n    setCookie('zenMode', zenMode ? '1' : '0');\n    updateZenMode();\n  });\n\n  iconSwitcher.click(() => {\n    window.Mousetrap.trigger('z');\n  });\n\n  updateZenMode();\n}\n\nMatomo.on('Matomo.topControlsRendered', () => {\n  handleZenMode();\n});\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n/**\n * Takes a raw URL and returns an HTML link tag for the URL, if the URL is for a matomo.org\n * domain then the URL will be modified to include campaign parameters\n *\n * @param url     URL to process\n * @param values  Optional [campaignOverride, sourceOverride, mediumOverride]\n * @return string\n */\nexport function externalRawLink(\n  url: string,\n  ...values: (string|null)[]\n): string {\n  const pkArgs = values as (string|null)[];\n  if (!window._pk_externalRawLink) { // eslint-disable-line\n    return url;\n  }\n  return window._pk_externalRawLink(url, pkArgs); // eslint-disable-line\n}\n\n/**\n * Takes a raw URL and returns an HTML link tag for the URL, if the URL is for a matomo.org\n * domain then the URL will be modified to include campaign parameters\n *\n * @param url              URL to process\n * @param values  Optional [campaignOverride, sourceOverride, mediumOverride]\n * @return string\n */\nexport function externalLink(\n  url: string,\n  ...values: (string|null)[]\n): string {\n  if (!url) {\n    return '';\n  }\n\n  const campaignOverride = (values.length > 0 && values[0] ? values[0] : null);\n  const sourceOverride = (values.length > 1 && values[1] ? values[1] : null);\n  const mediumOverride = (values.length > 2 && values[2] ? values[2] : null);\n  const returnUrl = externalRawLink(url, campaignOverride, sourceOverride, mediumOverride);\n\n  /* eslint-disable prefer-template */\n  return '<a target=\"_blank\" rel=\"noreferrer noopener\" href=\"' + returnUrl + '\">';\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { createApp } from 'vue';\nimport { translate, translateOrDefault } from './translate';\nimport { externalLink, externalRawLink } from './externalLink';\n\nexport default function createVueApp(\n  ...args: Parameters<typeof createApp>\n): ReturnType<typeof createApp> {\n  const app = createApp(...args);\n  app.config.globalProperties.$sanitize = window.vueSanitize;\n  app.config.globalProperties.translate = translate;\n  app.config.globalProperties.translateOrDefault = translateOrDefault;\n  app.config.globalProperties.externalLink = externalLink;\n  app.config.globalProperties.externalRawLink = externalRawLink;\n  return app;\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nconst pluginLoadingPromises: Record<string, Promise<unknown>> = {};\n\nconst PLUGIN_LOAD_TIMEOUT = 120;\nconst POLL_INTERVAL = 50;\nconst POLL_LIMIT = 1000;\n\n// code based off webpack's generated code for import()\n// currently does not load styles on demand\nexport default function importPluginUmd(plugin: string): Promise<unknown> {\n  if (pluginLoadingPromises[plugin]) {\n    return pluginLoadingPromises[plugin];\n  }\n\n  if ((window as any)[plugin]) {\n    return Promise.resolve((window as any)[plugin]);\n  }\n\n  const pluginUmdPath = `?module=Proxy&action=getPluginUmdJs&plugin=${plugin}`;\n\n  let promiseReject: ((value: unknown) => void) | undefined;\n  let promiseResolve: ((value: unknown) => void) | undefined;\n\n  const script = document.createElement('script') as any;\n  script.charset = 'utf-8';\n  script.timeout = PLUGIN_LOAD_TIMEOUT;\n  script.src = pluginUmdPath;\n\n  let timeout: ReturnType<typeof setTimeout>;\n\n  // create error before stack unwound to get useful stacktrace later\n  const error = new Error() as any;\n  const onScriptComplete = (event?: Event) => {\n    // avoid mem leaks in IE.\n    script.onerror = null;\n    script.onload = null;\n    clearTimeout(timeout);\n\n    // the script may not load entirely at the time onload is called, so we poll for a small\n    // amount of time until the window.PluginName object appears\n    let pollProgress = 0;\n    function checkPluginInWindow() {\n      pollProgress += POLL_INTERVAL;\n\n      // promise was already handled\n      if (!promiseReject || !promiseResolve) {\n        return;\n      }\n\n      // promise was not resolved, and window object exists\n      if ((window as any)[plugin] && promiseResolve) {\n        try {\n          promiseResolve((window as any)[plugin]);\n        } finally {\n          promiseReject = undefined;\n          promiseResolve = undefined;\n        }\n        return;\n      }\n\n      // script took too long to execute or failed to execute, and no plugin object appeared in\n      // window, so we report an error\n      if (pollProgress > POLL_LIMIT) {\n        try {\n          const errorType = event && (event.type === 'load' ? 'missing' : event.type);\n          const realSrc = event && event.target && (event.target as HTMLScriptElement).src;\n          error.message = `Loading plugin ${plugin} on demand failed.\\n(${errorType}: ${realSrc})`;\n          error.name = 'PluginOnDemandLoadError';\n          error.type = errorType;\n          error.request = realSrc;\n          promiseReject(error);\n        } finally {\n          promiseReject = undefined;\n          promiseResolve = undefined;\n        }\n\n        return;\n      }\n\n      setTimeout(checkPluginInWindow, POLL_INTERVAL);\n    }\n\n    setTimeout(checkPluginInWindow, POLL_INTERVAL);\n  };\n\n  timeout = setTimeout(() => {\n    onScriptComplete({ type: 'timeout', target: script } as unknown as Event);\n  }, PLUGIN_LOAD_TIMEOUT);\n  script.onerror = onScriptComplete;\n  script.onload = onScriptComplete;\n\n  document.head.appendChild(script);\n\n  return new Promise((resolve, reject) => {\n    promiseResolve = resolve;\n    promiseReject = reject;\n  });\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nimport { defineAsyncComponent } from 'vue';\nimport importPluginUmd from './importPluginUmd';\n\nexport default function useExternalPluginComponent(\n  plugin: string,\n  component: string,\n): typeof defineAsyncComponent {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return defineAsyncComponent(() => importPluginUmd(plugin).then((module: any) => {\n    if (!module) {\n      // @ts-ignore\n      resolve(null); // plugin not loaded\n    }\n\n    return module[component];\n  }));\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\n\nfunction getRef<T>(expander: string | HTMLElement, binding: DirectiveBinding<T>): HTMLElement|null {\n  return expander instanceof HTMLElement\n    ? expander\n    : binding.instance?.$refs[expander] as HTMLElement;\n}\n\nexport default {\n  getRef,\n};\n","const DEFAULT_DEBOUNCE_DELAY = 300;\n\nexport default function debounce<This, Args extends unknown[]>(\n  fn: (this: This, ...args: Args) => void,\n  delayInMs = DEFAULT_DEBOUNCE_DELAY,\n): (this: This, ...args: Args) => void {\n  let timeout: ReturnType<typeof setTimeout>;\n\n  return function wrapper(this: This, ...args: Args): void {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(() => {\n      fn.call(this, ...args);\n    }, delayInMs);\n  };\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport Matomo from './Matomo/Matomo';\n\nfunction calculateEvolution(currentValue: string|number, pastValue: string|number) {\n  const pastValueParsed = parseInt(pastValue as string, 10);\n  const currentValueParsed = parseInt(currentValue as string, 10) - pastValueParsed;\n\n  let evolution: number;\n\n  if (currentValueParsed === 0 || Number.isNaN(currentValueParsed)) {\n    evolution = 0;\n  } else if (pastValueParsed === 0 || Number.isNaN(pastValueParsed)) {\n    evolution = 100;\n  } else {\n    evolution = (currentValueParsed / pastValueParsed) * 100;\n  }\n\n  return evolution;\n}\n\nfunction formatEvolution(evolution: number) {\n  return `${evolution > 0 ? Matomo.numbers.symbolPlus : ''}${Math.round(evolution)}}%`;\n}\n\nexport default function getFormattedEvolution(\n  currentValue: string|number,\n  pastValue: string|number,\n): string {\n  const evolution = calculateEvolution(currentValue, pastValue);\n  return formatEvolution(evolution);\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport default function clone<T>(p: T): T {\n  if (typeof p === 'undefined') {\n    return p;\n  }\n\n  return JSON.parse(JSON.stringify(p)) as T;\n}\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div ref=\"root\">\n    <component v-if=\"componentWrapper\" :is=\"componentWrapper\"/>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, markRaw } from 'vue';\nimport Matomo from '../Matomo/Matomo';\n\nexport default defineComponent({\n  props: {\n    html: String,\n  },\n  mounted() {\n    Matomo.helper.compileVueEntryComponents(this.$refs.root as HTMLElement);\n  },\n  beforeUnmount() {\n    Matomo.helper.destroyVueComponent(this.$refs.root as HTMLElement);\n  },\n  computed: {\n    componentWrapper() {\n      if (!this.html) {\n        return null;\n      }\n\n      return markRaw({\n        template: this.html,\n      });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent, markRaw } from 'vue';\nimport Matomo from '../Matomo/Matomo';\n\nexport default defineComponent({\n  props: {\n    html: String,\n  },\n  mounted() {\n    Matomo.helper.compileVueEntryComponents(this.$refs.root as HTMLElement);\n  },\n  beforeUnmount() {\n    Matomo.helper.destroyVueComponent(this.$refs.root as HTMLElement);\n  },\n  computed: {\n    componentWrapper() {\n      if (!this.html) {\n        return null;\n      }\n\n      return markRaw({\n        template: this.html,\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VueEntryContainer.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VueEntryContainer.vue?vue&type=script&lang=ts\"","import { render } from \"./VueEntryContainer.vue?vue&type=template&id=54e7e876\"\nimport script from \"./VueEntryContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./VueEntryContainer.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div v-show=\"loading\" class=\"loadingPiwik\">\n    <img src=\"plugins/Morpheus/images/loading-blue.gif\" alt=\"\"/>\n    <span>{{ loadingMessage }}</span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\n\nexport default defineComponent({\n  props: {\n    loading: {\n      type: Boolean,\n      required: true,\n      default: false,\n    },\n    loadingMessage: {\n      type: String,\n      required: false,\n      default: translate('General_LoadingData'),\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\n\nexport default defineComponent({\n  props: {\n    loading: {\n      type: Boolean,\n      required: true,\n      default: false,\n    },\n    loadingMessage: {\n      type: String,\n      required: false,\n      default: translate('General_LoadingData'),\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityIndicator.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityIndicator.vue?vue&type=script&lang=ts\"","import { render } from \"./ActivityIndicator.vue?vue&type=template&id=7c5fe406\"\nimport script from \"./ActivityIndicator.vue?vue&type=script&lang=ts\"\nexport * from \"./ActivityIndicator.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    class=\"alert\"\n    :class=\"{ [`alert-${severity}`]: true }\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    severity: {\n      type: String,\n      required: true,\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    severity: {\n      type: String,\n      required: true,\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Alert.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Alert.vue?vue&type=script&lang=ts\"","import { render } from \"./Alert.vue?vue&type=template&id=c3863ae2\"\nimport script from \"./Alert.vue?vue&type=script&lang=ts\"\nexport * from \"./Alert.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding, nextTick } from 'vue';\n\ninterface DropdownArgs {\n  activates?: HTMLElement|string,\n}\n\n/**\n * A materializecss dropdown menu that supports submenus.\n *\n * To use a submenu, just use this directive within another dropdown.\n *\n * Note: if submenus are used, then dropdowns will never scroll.\n *\n * Usage:\n * <a class='dropdown-trigger btn' href='' data-target='mymenu' v-dropdown-menu>Menu</a>\n * <ul id='mymenu' class='dropdown-content'>\n *     <li>\n *         <a class='dropdown-trigger' data-target=\"mysubmenu\" v-dropdown-menu>Submenu</a>\n *         <ul id=\"mysubmenu\" class=\"dropdown-content\">\n *             <li>Submenu Item</li>\n *         </ul>\n *     </li>\n *     <li>\n *         <a href=\"\">Another item</a>\n *     </li>\n * </ul>\n */\nexport default {\n  mounted(element: HTMLElement, binding: DirectiveBinding<DropdownArgs>): void {\n    let options = {};\n\n    $(element).addClass('matomo-dropdown-menu');\n\n    const isSubmenu = !!$(element).parent().closest('.dropdown-content').length;\n    if (isSubmenu) {\n      options = { hover: true };\n      $(element).addClass('submenu');\n      $(binding.value?.activates || $(element).data('target'))\n        .addClass('submenu-dropdown-content');\n\n      // if a submenu is used, the dropdown will never scroll\n      $(element).parents('.dropdown-content').addClass('submenu-container');\n    }\n\n    $(element).dropdown(options);\n  },\n  updated(element: HTMLElement): void {\n    // classes can be overwritten when elements bind to :class, nextTick + using\n    // updated avoids this problem (and doing in both mounted and updated avoids a temporary\n    // state where the classes aren't added)\n    nextTick(() => {\n      $(element).addClass('matomo-dropdown-menu');\n    });\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\n\ninterface FocusAnywhereButHereArgs {\n  // input (provided by user)\n  blur: () => void,\n\n  // state/event handlers\n  isMouseDown?: boolean;\n  hasScrolled?: boolean;\n  onEscapeHandler?: (event: KeyboardEvent) => void;\n  onMouseDown?: () => void;\n  onClickOutsideElement?: (event: MouseEvent) => void;\n  onScroll?: () => void;\n}\n\nfunction onClickOutsideElement(\n  element: HTMLElement,\n  binding: DirectiveBinding<FocusAnywhereButHereArgs>,\n  event: MouseEvent,\n) {\n  const hadUsedScrollbar = binding.value.isMouseDown && binding.value.hasScrolled;\n  binding.value.isMouseDown = false;\n  binding.value.hasScrolled = false;\n\n  if (hadUsedScrollbar) {\n    return;\n  }\n\n  if (!element.contains(event.target as HTMLElement)) {\n    if (binding.value) {\n      binding.value.blur();\n    }\n  }\n}\n\nfunction onScroll(element: HTMLElement, binding: DirectiveBinding<FocusAnywhereButHereArgs>) {\n  binding.value.hasScrolled = true;\n}\n\nfunction onMouseDown(element: HTMLElement, binding: DirectiveBinding<FocusAnywhereButHereArgs>) {\n  binding.value.isMouseDown = true;\n  binding.value.hasScrolled = false;\n}\n\nfunction onEscapeHandler(\n  element: HTMLElement,\n  binding: DirectiveBinding<FocusAnywhereButHereArgs>,\n  event: KeyboardEvent,\n) {\n  if (event.which === 27) {\n    setTimeout(() => {\n      binding.value.isMouseDown = false;\n      binding.value.hasScrolled = false;\n      if (binding.value.blur) {\n        binding.value.blur();\n      }\n    }, 0);\n  }\n}\n\nconst doc = document.documentElement;\n\n/**\n * Usage (in a component):\n *\n * directives: {\n *   // function call is important since we store state in this directive\n *   FocusAnywhereButHere: FocusAnywhereButHere(),\n * }\n *\n * Note: the binding data needs to be static, changes will not be handled.\n */\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<FocusAnywhereButHereArgs>): void {\n    binding.value.isMouseDown = false;\n    binding.value.hasScrolled = false;\n    binding.value.onEscapeHandler = onEscapeHandler.bind(null, el, binding);\n    binding.value.onMouseDown = onMouseDown.bind(null, el, binding);\n    binding.value.onClickOutsideElement = onClickOutsideElement.bind(null, el, binding);\n    binding.value.onScroll = onScroll.bind(null, el, binding);\n\n    doc.addEventListener('keyup', binding.value.onEscapeHandler);\n    doc.addEventListener('mousedown', binding.value.onMouseDown);\n    doc.addEventListener('mouseup', binding.value.onClickOutsideElement);\n    doc.addEventListener('scroll', binding.value.onScroll);\n  },\n  unmounted(el: HTMLElement, binding: DirectiveBinding<FocusAnywhereButHereArgs>): void {\n    doc.removeEventListener('keyup', binding.value.onEscapeHandler!);\n    doc.removeEventListener('mousedown', binding.value.onMouseDown!);\n    doc.removeEventListener('mouseup', binding.value.onClickOutsideElement!);\n    doc.removeEventListener('scroll', binding.value.onScroll!);\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\n\ninterface FocusIfArgs {\n  // input (provided by user)\n  focused?: boolean;\n  afterFocus?: () => void;\n}\n\nfunction doFocusIf(el: HTMLElement, binding: DirectiveBinding<FocusIfArgs>): void {\n  if (binding.value?.focused && !binding.oldValue?.focused) {\n    setTimeout(() => {\n      el.focus();\n\n      if (binding.value.afterFocus) {\n        binding.value.afterFocus();\n      }\n    }, 5);\n  }\n}\n\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<FocusIfArgs>): void {\n    doFocusIf(el, binding);\n  },\n  updated(el: HTMLElement, binding: DirectiveBinding<FocusIfArgs>): void {\n    doFocusIf(el, binding);\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\n\ninterface TooltipsArgs {\n  content?: () => void;\n  delay?: number;\n  duration?: number;\n  show?: unknown;\n  tooltipClass?: string;\n}\n\nconst { $ } = window;\n\nfunction defaultContentTransform(this: HTMLElement) {\n  const title = $(this).attr('title') || '';\n  return window.vueSanitize(title.replace(/\\n/g, '<br />'));\n}\n\nfunction setupTooltips(el: HTMLElement, binding: DirectiveBinding<TooltipsArgs>) {\n  $(el).tooltip({\n    track: true,\n    content: binding.value?.content || defaultContentTransform,\n    show: typeof binding.value?.show !== 'undefined'\n      ? binding.value?.show\n      : {\n        delay: binding.value?.delay || 700,\n        duration: binding.value?.duration || 200,\n      },\n    hide: false,\n    tooltipClass: binding.value?.tooltipClass,\n  });\n}\n\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<TooltipsArgs>): void {\n    setTimeout(() => setupTooltips(el, binding));\n  },\n  updated(el: HTMLElement, binding: DirectiveBinding<TooltipsArgs>): void {\n    setTimeout(() => setupTooltips(el, binding));\n  },\n  beforeUnmount(el: HTMLElement): void {\n    try {\n      window.$(el).tooltip('destroy');\n    } catch (e) {\n      // ignore\n    }\n  },\n};\n","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n<template>\n  <div v-show=\"modelValue\" ref=\"root\">\n    <slot></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\n\nexport default defineComponent({\n  props: {\n    /**\n     * Whether the modal is displayed or not;\n     */\n    modelValue: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: ['yes', 'no', 'closeEnd', 'close', 'validation', 'update:modelValue'],\n  activated() {\n    this.$emit('update:modelValue', false);\n  },\n  watch: {\n    modelValue(newValue, oldValue) {\n      if (newValue) {\n        const slotElement = (this.$refs.root as HTMLElement).firstElementChild as HTMLElement;\n        Matomo.helper.modalConfirm(slotElement, {\n          yes: () => { this.$emit('yes'); },\n          no: () => { this.$emit('no'); },\n          validation: () => { this.$emit('validation'); },\n        }, {\n          onCloseEnd: () => {\n            // materialize removes the child element, so we move it back to the slot\n            (this.$refs.root as HTMLElement).appendChild(slotElement);\n            this.$emit('update:modelValue', false);\n            this.$emit('closeEnd');\n          },\n        });\n      } else if (newValue === false && oldValue === true) {\n        // the user closed the dialog, e.g. by pressing Esc or clicking away from it\n        $('.modal.open').modal('close');\n        this.$emit('close');\n      }\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\n\nexport default defineComponent({\n  props: {\n    /**\n     * Whether the modal is displayed or not;\n     */\n    modelValue: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: ['yes', 'no', 'closeEnd', 'close', 'validation', 'update:modelValue'],\n  activated() {\n    this.$emit('update:modelValue', false);\n  },\n  watch: {\n    modelValue(newValue, oldValue) {\n      if (newValue) {\n        const slotElement = (this.$refs.root as HTMLElement).firstElementChild as HTMLElement;\n        Matomo.helper.modalConfirm(slotElement, {\n          yes: () => { this.$emit('yes'); },\n          no: () => { this.$emit('no'); },\n          validation: () => { this.$emit('validation'); },\n        }, {\n          onCloseEnd: () => {\n            // materialize removes the child element, so we move it back to the slot\n            (this.$refs.root as HTMLElement).appendChild(slotElement);\n            this.$emit('update:modelValue', false);\n            this.$emit('closeEnd');\n          },\n        });\n      } else if (newValue === false && oldValue === true) {\n        // the user closed the dialog, e.g. by pressing Esc or clicking away from it\n        $('.modal.open').modal('close');\n        this.$emit('close');\n      }\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MatomoDialog.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MatomoDialog.vue?vue&type=script&lang=ts\"","import { render } from \"./MatomoDialog.vue?vue&type=template&id=239b8b1e\"\nimport script from \"./MatomoDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./MatomoDialog.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport DirectiveUtilities from '../directiveUtilities';\n\ninterface ExpandOnClickArgs {\n  // input (specified by user)\n  expander: string | HTMLElement,\n  onClosed?: () => void;\n\n  // state\n  isMouseDown?: boolean;\n  hasScrolled?: boolean;\n\n  // event handlers\n  onExpand?: () => void;\n  onClickOutsideElement?: (event: MouseEvent) => void;\n  onScroll?: () => void;\n  onMouseDown?: () => void;\n  onEscapeHandler?: (event: KeyboardEvent) => void;\n}\n\nfunction onExpand(element: HTMLElement) {\n  element.classList.toggle('expanded');\n\n  const positionElement = element.querySelector('.dropdown.positionInViewport');\n  if (positionElement) {\n    Matomo.helper.setMarginLeftToBeInViewport(positionElement);\n  }\n}\n\nfunction onClickOutsideElement(\n  element: HTMLElement,\n  binding: DirectiveBinding<ExpandOnClickArgs>,\n  event: MouseEvent,\n) {\n  const hadUsedScrollbar = binding.value.isMouseDown && binding.value.hasScrolled;\n  binding.value.isMouseDown = false;\n  binding.value.hasScrolled = false;\n\n  if (hadUsedScrollbar) {\n    return;\n  }\n\n  if (!element.contains(event.target as HTMLElement)) {\n    element.classList.remove('expanded');\n\n    if (binding.value?.onClosed) {\n      binding.value.onClosed();\n    }\n  }\n}\n\nfunction onScroll(binding: DirectiveBinding<ExpandOnClickArgs>) {\n  binding.value.hasScrolled = true;\n}\n\nfunction onMouseDown(binding: DirectiveBinding<ExpandOnClickArgs>) {\n  binding.value.isMouseDown = true;\n  binding.value.hasScrolled = false;\n}\n\nfunction onEscapeHandler(\n  element: HTMLElement,\n  binding: DirectiveBinding<ExpandOnClickArgs>,\n  event: KeyboardEvent,\n) {\n  if (event.which === 27) {\n    binding.value.isMouseDown = false;\n    binding.value.hasScrolled = false;\n    element.classList.remove('expanded');\n  }\n}\n\nconst doc = document.documentElement;\nconst { $ } = window;\n\n/**\n * Usage (in a component):\n *\n * directives: {\n *   ExpandOnClick: ExpandOnClick(), // function call is important since we store state\n *                                   // in this directive\n * }\n */\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<ExpandOnClickArgs>): void {\n    binding.value.isMouseDown = false;\n    binding.value.hasScrolled = false;\n    binding.value.onExpand = onExpand.bind(null, el);\n    binding.value.onEscapeHandler = onEscapeHandler.bind(null, el, binding);\n    binding.value.onMouseDown = onMouseDown.bind(null, binding);\n    binding.value.onClickOutsideElement = onClickOutsideElement.bind(null, el, binding);\n    binding.value.onScroll = onScroll.bind(null, binding);\n\n    setTimeout(() => {\n      const expander = DirectiveUtilities.getRef(binding.value.expander, binding);\n      if (expander) {\n        $(expander).on('click', binding.value.onExpand!);\n      }\n    });\n    doc.addEventListener('keyup', binding.value.onEscapeHandler);\n    doc.addEventListener('mousedown', binding.value.onMouseDown);\n    doc.addEventListener('mouseup', binding.value.onClickOutsideElement);\n    doc.addEventListener('scroll', binding.value.onScroll);\n  },\n  unmounted(el: HTMLElement, binding: DirectiveBinding<ExpandOnClickArgs>): void {\n    const expander = DirectiveUtilities.getRef(binding.value.expander, binding);\n    if (expander) {\n      $(expander).off('click', binding.value.onExpand!);\n    }\n    doc.removeEventListener('keyup', binding.value.onEscapeHandler!);\n    doc.removeEventListener('mousedown', binding.value.onMouseDown!);\n    doc.removeEventListener('mouseup', binding.value.onClickOutsideElement!);\n    doc.removeEventListener('scroll', binding.value.onScroll!);\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport DirectiveUtilities from '../directiveUtilities';\n\ninterface ExpandOnHoverArgs {\n  // input (provided by user)\n  expander: string | HTMLElement,\n\n  // event handlers\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n  onClickOutsideElement?: (event: MouseEvent) => void;\n  onEscapeHandler?: (event: KeyboardEvent) => void;\n}\n\nfunction onMouseEnter(element: HTMLElement) {\n  element.classList.add('expanded');\n\n  const positionElement = element.querySelector('.dropdown.positionInViewport');\n  if (positionElement) {\n    Matomo.helper.setMarginLeftToBeInViewport(positionElement);\n  }\n}\n\nfunction onMouseLeave(element: HTMLElement) {\n  element.classList.remove('expanded');\n}\n\nfunction onClickOutsideElement(element: HTMLElement, event: MouseEvent) {\n  if (!element.contains(event.target as HTMLElement)) {\n    element.classList.remove('expanded');\n  }\n}\n\nfunction onEscapeHandler(element: HTMLElement, event: KeyboardEvent) {\n  if (event.which === 27) {\n    element.classList.remove('expanded');\n  }\n}\n\nconst doc = document.documentElement;\n\n/**\n * Usage (in a component):\n *\n * directives: {\n *   ExpandOnHover: ExpandOnHover(), // function call is important since we store state\n *                                   // in this directive\n * }\n */\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<ExpandOnHoverArgs>): void {\n    binding.value.onMouseEnter = onMouseEnter.bind(null, el);\n    binding.value.onMouseLeave = onMouseLeave.bind(null, el);\n    binding.value.onClickOutsideElement = onClickOutsideElement.bind(null, el);\n    binding.value.onEscapeHandler = onEscapeHandler.bind(null, el);\n\n    setTimeout(() => {\n      const expander = DirectiveUtilities.getRef(binding.value.expander, binding);\n      if (expander) {\n        expander.addEventListener('mouseenter', binding.value.onMouseEnter!);\n      }\n    });\n\n    el.addEventListener('mouseleave', binding.value.onMouseLeave);\n    doc.addEventListener('keyup', binding.value.onEscapeHandler);\n    doc.addEventListener('mouseup', binding.value.onClickOutsideElement);\n  },\n  unmounted(el: HTMLElement, binding: DirectiveBinding<ExpandOnHoverArgs>): void {\n    const expander = DirectiveUtilities.getRef(binding.value.expander, binding);\n    if (expander) {\n      expander.removeEventListener('mouseenter', binding.value.onMouseEnter!);\n    }\n    el.removeEventListener('mouseleave', binding.value.onMouseLeave!);\n    document.removeEventListener('keyup', binding.value.onEscapeHandler!);\n    document.removeEventListener('mouseup', binding.value.onClickOutsideElement!);\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\nimport { translate } from '../translate';\n\ninterface ShowSensitiveDataArgs {\n  sensitiveData: string;\n  showCharacters?: number;\n  clickElementSelector: string|HTMLElement|JQuery;\n}\n\nconst { $ } = window;\n\n/**\n * Handles visibility of sensitive data. By default data will be shown replaced with stars (*)\n * On click on the element the full data will be shown\n *\n * Configuration attributes:\n * data-show-characters          number of characters to show in clear text (defaults to 6)\n * data-click-element-selector   selector for element that will show the full data on click\n *                               (defaults to element)\n *\n * Example:\n * <div v-show-sensitive-date=\"some text\"></div>\n */\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<ShowSensitiveDataArgs>): void {\n    const element = $(el);\n\n    const { sensitiveData } = binding.value;\n    const showCharacters = binding.value.showCharacters || 6;\n    const clickElement = binding.value.clickElementSelector || element;\n\n    let protectedData = '';\n    if (showCharacters > 0) {\n      protectedData += sensitiveData.slice(0, showCharacters);\n    }\n    protectedData += sensitiveData.slice(showCharacters).replace(/./g, '*');\n    element.html(protectedData);\n\n    function onClickHandler() {\n      element.html(sensitiveData);\n      $(clickElement).css({\n        cursor: '',\n      });\n      $(clickElement).tooltip('destroy');\n    }\n\n    $(clickElement).tooltip({\n      content: translate('CoreHome_ClickToSeeFullInformation'),\n      items: '*',\n      track: true,\n    });\n\n    $(clickElement).one('click', onClickHandler);\n    $(clickElement).css({\n      cursor: 'pointer',\n    });\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nconst { $ } = window;\n\nexport default {\n  mounted(el: HTMLElement): void {\n    const element = $(el) as JQuery;\n\n    // BC for materializecss 0.97 => 1.0\n    if (!element.attr('data-target')\n      && element.attr('data-activates')\n    ) {\n      element.attr('data-target', element.attr('data-activates')!);\n    }\n\n    const target = element.attr('data-target');\n    if (target && $(`#${target}`).length) {\n      (element as any).dropdown({ // eslint-disable-line\n        inDuration: 300,\n        outDuration: 225,\n        constrainWidth: false, // Does not change width of dropdown to that of the activator\n        //  hover: true, // Activate on hover\n        belowOrigin: true, // Displays dropdown below the button\n      });\n    }\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\n\nconst { $ } = window;\n\ninterface SelectOnFocusArgs {\n  // state\n  focusedElement?: HTMLElement;\n  elementSupportsSelect?: boolean;\n\n  // event handlers\n  onFocusHandler?: (event: Event) => void;\n  onClickHandler?: (event: MouseEvent) => void;\n  onBlurHandler?: (event: Event) => void;\n}\n\nfunction onFocusHandler(binding: DirectiveBinding<SelectOnFocusArgs>, event: Event) {\n  if (binding.value.focusedElement !== event.target) {\n    binding.value.focusedElement = event.target as HTMLElement;\n    $(event.target!).select();\n  }\n}\n\nfunction onClickHandler(event: Event) {\n  // .select() + focus and blur seems to not work on pre elements\n  const range = document.createRange();\n  range.selectNode(event.target as Node);\n  const selection = window.getSelection();\n  if (selection && selection.rangeCount > 0) {\n    selection.removeAllRanges();\n  }\n  if (selection) {\n    selection.addRange(range);\n  }\n}\n\nfunction onBlurHandler(binding: DirectiveBinding<SelectOnFocusArgs>) {\n  delete binding.value.focusedElement;\n}\n\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<SelectOnFocusArgs>): void {\n    const tagName = el.tagName.toLowerCase();\n    binding.value.elementSupportsSelect = tagName === 'textarea';\n\n    if (binding.value.elementSupportsSelect) {\n      binding.value.onFocusHandler = onFocusHandler.bind(null, binding);\n      binding.value.onBlurHandler = onBlurHandler.bind(null, binding);\n\n      el.addEventListener('focus', binding.value.onFocusHandler);\n      el.addEventListener('blur', binding.value.onBlurHandler);\n    } else {\n      binding.value.onClickHandler = onClickHandler;\n\n      el.addEventListener('click', binding.value.onClickHandler);\n    }\n  },\n  unmounted(el: HTMLElement, binding: DirectiveBinding<SelectOnFocusArgs>): void {\n    if (binding.value.elementSupportsSelect) {\n      el.removeEventListener('focus', binding.value.onFocusHandler!);\n      el.removeEventListener('blur', binding.value.onBlurHandler!);\n    } else {\n      el.removeEventListener('click', binding.value.onClickHandler!);\n    }\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\nimport { translate } from '../translate';\n\ninterface CopyToClipboardArgs {\n  // state\n  transitionOpen?: boolean;\n\n  // event handlers\n  onClickHandler?: (event: MouseEvent) => void;\n  onTransitionEndHandler?: (event: Event) => void;\n}\n\nfunction onClickHandler(pre: HTMLElement) {\n  if (pre) {\n    const textarea = document.createElement('textarea');\n    textarea.value = pre.innerText;\n    textarea.setAttribute('readonly', '');\n    textarea.style.position = 'absolute';\n    textarea.style.left = '-9999px';\n    document.body.appendChild(textarea);\n    textarea.select();\n    document.execCommand('copy');\n    document.body.removeChild(textarea);\n    const btn = (pre.parentElement as HTMLButtonElement);\n    if (btn) {\n      const icon = btn.getElementsByTagName('i')[0];\n      if (icon) {\n        icon.classList.remove('copyToClipboardIcon');\n        icon.classList.add('copyToClipboardIconCheck');\n      }\n      const copied = btn.getElementsByClassName('copyToClipboardCopiedDiv')[0];\n      if (copied) {\n        (copied as HTMLDivElement).style.display = 'inline-block';\n        setTimeout(() => {\n          (copied as HTMLDivElement).style.display = 'none';\n        }, 2500);\n      }\n    }\n  }\n}\n\nfunction onTransitionEndHandler(el: HTMLElement, binding: DirectiveBinding<CopyToClipboardArgs>) {\n  if (binding.value.transitionOpen) {\n    const btn = (el.parentElement as HTMLButtonElement);\n    if (btn) {\n      const icon = btn.getElementsByTagName('i')[0];\n      if (icon) {\n        icon.classList.remove('copyToClipboardIconCheck');\n        icon.classList.add('copyToClipboardIcon');\n      }\n    }\n    binding.value.transitionOpen = false;\n  } else {\n    binding.value.transitionOpen = true;\n  }\n}\n\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<CopyToClipboardArgs>): void {\n    const tagName = el.tagName.toLowerCase();\n    if (tagName === 'pre') {\n      const btn = document.createElement('button');\n      btn.setAttribute('type', 'button');\n      btn.className = 'copyToClipboardButton';\n\n      const positionDiv = document.createElement('div');\n      positionDiv.className = 'copyToClipboardPositionDiv';\n\n      const icon = document.createElement('i');\n      icon.className = 'copyToClipboardIcon';\n      btn.appendChild(icon);\n\n      const sp = document.createElement('span');\n      sp.className = 'copyToClipboardSpan';\n      sp.innerHTML = translate('General_Copy');\n      btn.appendChild(sp);\n\n      positionDiv.appendChild(btn);\n\n      const cdiv = document.createElement('div');\n      cdiv.className = 'copyToClipboardCopiedDiv';\n      cdiv.innerHTML = translate('General_CopiedToClipboard');\n\n      positionDiv.appendChild(cdiv);\n\n      const pe = el.parentElement;\n      if (pe) {\n        pe.classList.add('copyToClipboardWrapper');\n        pe.appendChild(positionDiv);\n      }\n\n      binding.value.onClickHandler = onClickHandler.bind(null, el);\n      btn.addEventListener('click', binding.value.onClickHandler);\n\n      binding.value.onTransitionEndHandler = onTransitionEndHandler.bind(null, el, binding);\n      btn.addEventListener('transitionend', binding.value.onTransitionEndHandler);\n    }\n  },\n  unmounted(el: HTMLElement, binding: DirectiveBinding<CopyToClipboardArgs>): void {\n    el.removeEventListener('click', binding.value.onClickHandler!);\n    el.removeEventListener('transitionend', binding.value.onTransitionEndHandler!);\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nimport { DirectiveBinding } from 'vue';\nimport DirectiveUtilities from '../directiveUtilities';\n\ninterface SideNavArgs {\n  activator: HTMLElement | string;\n\n  // directive state\n  initialized?: boolean;\n}\n\n/**\n * Will activate the materialize side nav feature once rendered. We use this directive as\n * it makes sure the actual left menu is rendered at the time we init the side nav.\n *\n * Has to be set on a collaapsible element\n *\n * Example:\n * <div class=\"collapsible\" v-side-nav=\"nav .activateLeftMenu\">...</div>\n */\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<SideNavArgs>): void {\n    if (!binding.value.activator) {\n      return;\n    }\n\n    setTimeout(() => {\n      if (!binding.value.initialized) {\n        binding.value.initialized = true;\n\n        const sideNavActivator = DirectiveUtilities.getRef(binding.value.activator, binding);\n        if (sideNavActivator) {\n          window.$(sideNavActivator).show();\n\n          const targetSelector = sideNavActivator.getAttribute('data-target');\n\n          // @ts-ignore\n          window.$(`#${targetSelector}`).sidenav({\n            closeOnClick: true,\n          });\n        }\n      }\n\n      if (el.classList.contains('collapsible')) {\n        window.$(el).collapsible();\n      }\n    });\n  },\n};\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    class=\"enrichedHeadline\"\n    v-on:mouseenter=\"showIcons = true\"\n    v-on:mouseleave=\"showIcons = false\"\n    ref=\"root\"\n  >\n    <div\n      v-if=\"!editUrl\"\n      class=\"title\"\n      tabindex=\"6\"\n    >\n      <slot />\n    </div>\n    <a\n      v-if=\"editUrl\"\n      class=\"title\"\n      :href=\"editUrl\"\n      :title=\"translate('CoreHome_ClickToEditX', htmlEntities(actualFeatureName))\"\n    >\n      <slot />\n    </a>\n    <span\n      v-show=\"showIcons || showInlineHelp\"\n      class=\"iconsBar\"\n    >\n      <a\n        v-if=\"helpUrl && !actualInlineHelp\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n        class=\"helpIcon\"\n        :href=\"helpUrl\"\n        :title=\"translate('CoreHome_ExternalHelp')\"\n      ><span class=\"icon-help\" /></a>\n      <a\n        v-if=\"actualInlineHelp\"\n        v-on:click=\"showInlineHelp = !showInlineHelp\"\n        class=\"helpIcon\"\n        :class=\"{ 'active': showInlineHelp }\"\n        :title=\"translate(reportGenerated ? 'General_HelpReport' : 'General_Help')\"\n      ><span class=\"icon-info\" /></a>\n      <div class=\"ratingIcons\" v-if=\"showRateFeature\">\n        <component :title=\"actualFeatureName\" :is=\"rateFeature\"></component>\n      </div>\n    </span>\n    <div\n      class=\"inlineHelp\"\n      v-show=\"showInlineHelp\"\n    >\n      <div v-html=\"$sanitize(actualInlineHelp)\"/>\n      <span class=\"helpDate\"\n            v-if=\"reportGenerated!=''\"\n            v-html=\"$sanitize(reportGenerated)\"></span>\n      <a\n        v-if=\"helpUrl\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n        class=\"readMore\"\n        :href=\"helpUrl\"\n      >{{ translate('General_MoreDetails') }}</a>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport Periods from '../Periods/Periods';\nimport { translateOrDefault } from '../translate';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\ninterface EnrichedHeadlineData {\n  showIcons: boolean;\n  showInlineHelp: boolean;\n  actualFeatureName?: string | null;\n  actualInlineHelp?: string | null,\n}\n\n/**\n * Usage:\n *\n * <h2><EnrichedHeadline>All Websites Dashboard</EnrichedHeadline></h2>\n * -> uses \"All Websites Dashboard\" as featurename\n *\n * <h2><EnrichedHeadline feature-name=\"All Websites Dashboard\">All Websites Dashboard (Total:\n * 309 Visits)</EnrichedHeadline></h2>\n * -> custom featurename\n *\n * <h2><EnrichedHeadline help-url=\"http://piwik.org/guide\">All Websites Dashboard</EnrichedHeadline></h2>\n * -> shows help icon and links to external url\n *\n * <h2><EnrichedHeadline edit-url=\"index.php?module=Foo&action=bar&id=4\">All Websites\n * Dashboard</EnrichedHeadline></h2>\n * -> makes the headline clickable linking to the specified url\n *\n * <h2><EnrichedHeadline inline-help=\"inlineHelp\">Pages report</EnrichedHeadline></h2>\n * -> inlineHelp specified via a attribute shows help icon on headline hover\n *\n * <h2><EnrichedHeadline>All Websites Dashboard\n *     <div class=\"inlineHelp\">My <strong>inline help</strong></div>\n * </EnrichedHeadline></h2>\n * -> alternative definition for inline help\n * -> shows help icon to display inline help on click. Note: You can combine inlinehelp and help-url\n *\n * * <h2><EnrichedHeadline report-generated=\"generated time\">Pages report</EnrichedHeadline></h2>\n * -> reportGenerated specified via this attribute shows a clock icon with a tooltip which\n * activated by hover\n * -> the tooltip shows the value of the attribute\n */\nexport default defineComponent({\n  props: {\n    helpUrl: {\n      type: String,\n      default: '',\n    },\n    editUrl: {\n      type: String,\n      default: '',\n    },\n    reportGenerated: String,\n    featureName: String,\n    inlineHelp: String,\n  },\n  data(): EnrichedHeadlineData {\n    return {\n      showIcons: false,\n      showInlineHelp: false,\n      actualFeatureName: this.featureName,\n      actualInlineHelp: this.inlineHelp,\n    };\n  },\n  watch: {\n    inlineHelp(newValue: string) {\n      this.actualInlineHelp = newValue;\n    },\n    featureName(newValue: string) {\n      this.actualFeatureName = newValue;\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n\n    if (!this.actualInlineHelp) {\n      let helpNode = root.querySelector('.title .inlineHelp');\n      if (!helpNode && root.parentElement?.nextElementSibling) {\n        // hack for reports :(\n        helpNode = (root.parentElement.nextElementSibling as HTMLElement)\n          .querySelector('.reportDocumentation');\n      }\n\n      if (helpNode) {\n        // hackish solution to get binded html of p tag within the help node\n        // at this point the ng-bind-html is not yet converted into html when report is not\n        // initially loaded. Using $compile doesn't work. So get and set it manually\n        const helpDocs = helpNode.getAttribute('data-content')?.trim();\n        if (helpDocs && helpDocs.length) {\n          this.actualInlineHelp = `<p>${helpDocs}</p>`;\n          setTimeout(() => helpNode!.remove(), 0);\n        }\n      }\n    }\n\n    if (!this.actualFeatureName) {\n      this.actualFeatureName = root.querySelector('.title')?.textContent;\n    }\n\n    if (Matomo.period && Matomo.currentDateString) {\n      const currentPeriod = Periods.parse(\n        Matomo.period as string,\n        Matomo.currentDateString as string,\n      );\n\n      if (this.reportGenerated\n        && currentPeriod.containsToday()\n      ) {\n        window.$(root.querySelector('.report-generated')!).tooltip({\n          track: true,\n          content: this.reportGenerated,\n          items: 'div',\n          show: false,\n          hide: false,\n        });\n      }\n    }\n  },\n  methods: {\n    htmlEntities(v: string) {\n      return Matomo.helper.htmlEntities(v);\n    },\n  },\n  computed: {\n    showRateFeature() {\n      return translateOrDefault('Feedback_SendFeedback') !== 'Feedback_SendFeedback';\n    },\n    rateFeature() {\n      if (this.showRateFeature) {\n        return useExternalPluginComponent('Feedback', 'RateFeature');\n      }\n      return '';\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport Periods from '../Periods/Periods';\nimport { translateOrDefault } from '../translate';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\ninterface EnrichedHeadlineData {\n  showIcons: boolean;\n  showInlineHelp: boolean;\n  actualFeatureName?: string | null;\n  actualInlineHelp?: string | null,\n}\n\n/**\n * Usage:\n *\n * <h2><EnrichedHeadline>All Websites Dashboard</EnrichedHeadline></h2>\n * -> uses \"All Websites Dashboard\" as featurename\n *\n * <h2><EnrichedHeadline feature-name=\"All Websites Dashboard\">All Websites Dashboard (Total:\n * 309 Visits)</EnrichedHeadline></h2>\n * -> custom featurename\n *\n * <h2><EnrichedHeadline help-url=\"http://piwik.org/guide\">All Websites Dashboard</EnrichedHeadline></h2>\n * -> shows help icon and links to external url\n *\n * <h2><EnrichedHeadline edit-url=\"index.php?module=Foo&action=bar&id=4\">All Websites\n * Dashboard</EnrichedHeadline></h2>\n * -> makes the headline clickable linking to the specified url\n *\n * <h2><EnrichedHeadline inline-help=\"inlineHelp\">Pages report</EnrichedHeadline></h2>\n * -> inlineHelp specified via a attribute shows help icon on headline hover\n *\n * <h2><EnrichedHeadline>All Websites Dashboard\n *     <div class=\"inlineHelp\">My <strong>inline help</strong></div>\n * </EnrichedHeadline></h2>\n * -> alternative definition for inline help\n * -> shows help icon to display inline help on click. Note: You can combine inlinehelp and help-url\n *\n * * <h2><EnrichedHeadline report-generated=\"generated time\">Pages report</EnrichedHeadline></h2>\n * -> reportGenerated specified via this attribute shows a clock icon with a tooltip which\n * activated by hover\n * -> the tooltip shows the value of the attribute\n */\nexport default defineComponent({\n  props: {\n    helpUrl: {\n      type: String,\n      default: '',\n    },\n    editUrl: {\n      type: String,\n      default: '',\n    },\n    reportGenerated: String,\n    featureName: String,\n    inlineHelp: String,\n  },\n  data(): EnrichedHeadlineData {\n    return {\n      showIcons: false,\n      showInlineHelp: false,\n      actualFeatureName: this.featureName,\n      actualInlineHelp: this.inlineHelp,\n    };\n  },\n  watch: {\n    inlineHelp(newValue: string) {\n      this.actualInlineHelp = newValue;\n    },\n    featureName(newValue: string) {\n      this.actualFeatureName = newValue;\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n\n    if (!this.actualInlineHelp) {\n      let helpNode = root.querySelector('.title .inlineHelp');\n      if (!helpNode && root.parentElement?.nextElementSibling) {\n        // hack for reports :(\n        helpNode = (root.parentElement.nextElementSibling as HTMLElement)\n          .querySelector('.reportDocumentation');\n      }\n\n      if (helpNode) {\n        // hackish solution to get binded html of p tag within the help node\n        // at this point the ng-bind-html is not yet converted into html when report is not\n        // initially loaded. Using $compile doesn't work. So get and set it manually\n        const helpDocs = helpNode.getAttribute('data-content')?.trim();\n        if (helpDocs && helpDocs.length) {\n          this.actualInlineHelp = `<p>${helpDocs}</p>`;\n          setTimeout(() => helpNode!.remove(), 0);\n        }\n      }\n    }\n\n    if (!this.actualFeatureName) {\n      this.actualFeatureName = root.querySelector('.title')?.textContent;\n    }\n\n    if (Matomo.period && Matomo.currentDateString) {\n      const currentPeriod = Periods.parse(\n        Matomo.period as string,\n        Matomo.currentDateString as string,\n      );\n\n      if (this.reportGenerated\n        && currentPeriod.containsToday()\n      ) {\n        window.$(root.querySelector('.report-generated')!).tooltip({\n          track: true,\n          content: this.reportGenerated,\n          items: 'div',\n          show: false,\n          hide: false,\n        });\n      }\n    }\n  },\n  methods: {\n    htmlEntities(v: string) {\n      return Matomo.helper.htmlEntities(v);\n    },\n  },\n  computed: {\n    showRateFeature() {\n      return translateOrDefault('Feedback_SendFeedback') !== 'Feedback_SendFeedback';\n    },\n    rateFeature() {\n      if (this.showRateFeature) {\n        return useExternalPluginComponent('Feedback', 'RateFeature');\n      }\n      return '';\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EnrichedHeadline.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EnrichedHeadline.vue?vue&type=script&lang=ts\"","import { render } from \"./EnrichedHeadline.vue?vue&type=template&id=cbaca8ea\"\nimport script from \"./EnrichedHeadline.vue?vue&type=script&lang=ts\"\nexport * from \"./EnrichedHeadline.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div :class=\"{ card: true, 'card-with-image': !!this.imageUrl }\" ref=\"root\">\n    <div class=\"card-content\">\n      <h2\n        v-if=\"contentTitle && !actualFeature && !helpUrl && !actualHelpText\"\n        class=\"card-title\"\n      >{{ decode(contentTitle) }}</h2>\n      <h2\n        v-if=\"contentTitle && (actualFeature || helpUrl || actualHelpText)\"\n        class=\"card-title\"\n      >\n        <EnrichedHeadline\n          :feature-name=\"actualFeature\"\n          :help-url=\"helpUrl\"\n          :inline-help=\"actualHelpText\"\n        >\n          {{ decode(contentTitle) }}\n        </EnrichedHeadline>\n      </h2>\n      <div ref=\"content\">\n        <slot />\n      </div>\n    </div>\n    <div class=\"card-image hide-on-med-and-down\" v-if=\"imageUrl\">\n      <img :src=\"imageUrl\" :alt=\"actualImageAltText\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport EnrichedHeadline from '../EnrichedHeadline/EnrichedHeadline.vue';\nimport Matomo from '../Matomo/Matomo';\n\nlet adminContent: HTMLElement|null = null;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    contentTitle: String,\n    feature: String,\n    helpUrl: String,\n    helpText: String,\n    anchor: String,\n    imageUrl: String,\n    imageAltText: String,\n  },\n  components: {\n    EnrichedHeadline,\n  },\n  data() {\n    return {\n      actualFeature: this.feature,\n      actualHelpText: this.helpText,\n      actualImageAltText: this.imageAltText ? this.imageAltText : this.contentTitle,\n    };\n  },\n  watch: {\n    feature(newValue: string) {\n      this.actualFeature = newValue;\n    },\n    helpText(newValue: string) {\n      this.actualHelpText = newValue;\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n    const content = this.$refs.content as HTMLElement;\n\n    if (this.anchor && root && root.parentElement) {\n      const anchorElement = document.createElement('a');\n      anchorElement.id = this.anchor;\n      $(root.parentElement).prepend(anchorElement);\n    }\n\n    setTimeout(() => {\n      const inlineHelp = content.querySelector('.contentHelp');\n      if (inlineHelp) {\n        this.actualHelpText = inlineHelp.innerHTML;\n        inlineHelp.remove();\n      }\n    }, 0);\n\n    if (this.actualFeature && this.actualFeature === 'true') {\n      this.actualFeature = this.contentTitle;\n    }\n\n    if (adminContent === null) {\n      // cache admin node for further content blocks\n      adminContent = document.querySelector('#content.admin');\n    }\n\n    let contentTopPosition: number|null = null;\n    if (adminContent) {\n      contentTopPosition = adminContent.offsetTop;\n    }\n\n    if (contentTopPosition || contentTopPosition === 0) {\n      const parents = root.closest('.widgetLoader') as HTMLElement;\n\n      // when shown within the widget loader, we need to get the offset of that element\n      // as the widget loader might be still shown. Would otherwise not position correctly\n      // the widgets on the admin home page\n      const topThis = parents ? parents.offsetTop : root.offsetTop;\n\n      if (topThis - contentTopPosition < 17) {\n        // we make sure to display the first card with no margin-top to have it on same as line as\n        // navigation\n        root.style.marginTop = '0';\n      }\n    }\n  },\n  methods: {\n    decode(s: string) {\n      return Matomo.helper.htmlDecode(s);\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport EnrichedHeadline from '../EnrichedHeadline/EnrichedHeadline.vue';\nimport Matomo from '../Matomo/Matomo';\n\nlet adminContent: HTMLElement|null = null;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    contentTitle: String,\n    feature: String,\n    helpUrl: String,\n    helpText: String,\n    anchor: String,\n    imageUrl: String,\n    imageAltText: String,\n  },\n  components: {\n    EnrichedHeadline,\n  },\n  data() {\n    return {\n      actualFeature: this.feature,\n      actualHelpText: this.helpText,\n      actualImageAltText: this.imageAltText ? this.imageAltText : this.contentTitle,\n    };\n  },\n  watch: {\n    feature(newValue: string) {\n      this.actualFeature = newValue;\n    },\n    helpText(newValue: string) {\n      this.actualHelpText = newValue;\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n    const content = this.$refs.content as HTMLElement;\n\n    if (this.anchor && root && root.parentElement) {\n      const anchorElement = document.createElement('a');\n      anchorElement.id = this.anchor;\n      $(root.parentElement).prepend(anchorElement);\n    }\n\n    setTimeout(() => {\n      const inlineHelp = content.querySelector('.contentHelp');\n      if (inlineHelp) {\n        this.actualHelpText = inlineHelp.innerHTML;\n        inlineHelp.remove();\n      }\n    }, 0);\n\n    if (this.actualFeature && this.actualFeature === 'true') {\n      this.actualFeature = this.contentTitle;\n    }\n\n    if (adminContent === null) {\n      // cache admin node for further content blocks\n      adminContent = document.querySelector('#content.admin');\n    }\n\n    let contentTopPosition: number|null = null;\n    if (adminContent) {\n      contentTopPosition = adminContent.offsetTop;\n    }\n\n    if (contentTopPosition || contentTopPosition === 0) {\n      const parents = root.closest('.widgetLoader') as HTMLElement;\n\n      // when shown within the widget loader, we need to get the offset of that element\n      // as the widget loader might be still shown. Would otherwise not position correctly\n      // the widgets on the admin home page\n      const topThis = parents ? parents.offsetTop : root.offsetTop;\n\n      if (topThis - contentTopPosition < 17) {\n        // we make sure to display the first card with no margin-top to have it on same as line as\n        // navigation\n        root.style.marginTop = '0';\n      }\n    }\n  },\n  methods: {\n    decode(s: string) {\n      return Matomo.helper.htmlDecode(s);\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContentBlock.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContentBlock.vue?vue&type=script&lang=ts\"","import { render } from \"./ContentBlock.vue?vue&type=template&id=a32a48ea\"\nimport script from \"./ContentBlock.vue?vue&type=script&lang=ts\"\nexport * from \"./ContentBlock.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    v-if=\"isComparing\"\n    ref=\"root\"\n    class=\"matomo-comparisons\"\n    v-tooltips=\"{ duration: 200, delay: 200, content: transformTooltipContent }\"\n  >\n    <h3>{{ translate('General_Comparisons') }}</h3>\n    <div\n      class=\"comparison card\"\n      v-for=\"(comparison, $index) in segmentComparisons\"\n      :key=\"comparison.index\"\n    >\n      <div class=\"comparison-type\">{{ translate('General_Segment') }}</div>\n      <div\n        class=\"title\"\n        :title=\"comparison.title + '<br/>' + decodeURIComponent(comparison.params.segment)\"\n      >\n        <a\n          target=\"_blank\"\n          :href=\"getUrlToSegment(comparison.params.segment)\"\n        >\n          {{ comparison.title }}\n        </a>\n      </div>\n      <div\n        class=\"comparison-period\"\n        v-for=\"periodComparison in periodComparisons\"\n        :key=\"periodComparison.index\"\n        :title=\"getComparisonTooltip(comparison, periodComparison)\"\n      >\n        <span\n          class=\"comparison-dot\"\n          :style=\"{\n            'background-color': getSeriesColor(comparison, periodComparison)\n          }\"\n        />\n        <span class=\"comparison-period-label\">\n          {{ periodComparison.title }} ({{ getComparisonPeriodType(periodComparison) }})\n        </span>\n      </div>\n      <a\n        class=\"remove-button\"\n        v-on:click=\"removeSegmentComparison($index)\"\n        v-if=\"segmentComparisons.length > 1\"\n      >\n        <span\n          class=\"icon icon-close\"\n          :title=\"translate('General_ClickToRemoveComp')\"\n        />\n      </a>\n    </div>\n    <div\n      class=\"loadingPiwik\"\n      style=\"display:none;\"\n    >\n      <img\n        src=\"plugins/Morpheus/images/loading-blue.gif\"\n        :alt=\"translate('General_LoadingData')\"\n      />\n      {{ translate('General_LoadingData') }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue';\nimport { AnyComparison } from './Comparisons.store';\nimport ComparisonsStoreInstance from './Comparisons.store.instance';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { translate } from '../translate';\nimport Tooltips from '../Tooltips/Tooltips';\n\ninterface ProcessedReportComparison {\n  compareSegmentPretty: string;\n  comparePeriodPretty: string;\n  nb_visits: number;\n  nb_visits_change: number;\n}\n\ninterface ProcessedReportData {\n  comparisons?: ProcessedReportComparison[];\n}\n\ninterface ProcessedReportResponse {\n  reportData: ProcessedReportData;\n}\n\ninterface ComparisonState {\n  comparisonTooltips: Record<string, Record<string, string>>|null;\n}\n\nexport default defineComponent({\n  props: {\n  },\n  directives: {\n    Tooltips,\n  },\n  data(): ComparisonState {\n    return {\n      comparisonTooltips: null,\n    };\n  },\n  setup() {\n    // accessing has to be done through a computed property so we can use the computed\n    // instance directly in the template. unfortunately, vue won't register to changes.\n    const isComparing = computed(\n      () => ComparisonsStoreInstance.isComparing() && !window.broadcast.isNoDataPage(),\n    );\n    const segmentComparisons = computed(() => ComparisonsStoreInstance.getSegmentComparisons());\n    const periodComparisons = computed(() => ComparisonsStoreInstance.getPeriodComparisons());\n    const getSeriesColor = ComparisonsStoreInstance.getSeriesColor.bind(ComparisonsStoreInstance);\n\n    function transformTooltipContent(this: HTMLElement) {\n      const title = window.$(this).attr('title');\n      if (!title) {\n        return title;\n      }\n      return window.vueSanitize(title.replace(/\\n/g, '<br />'));\n    }\n\n    return {\n      isComparing,\n      segmentComparisons,\n      periodComparisons,\n      getSeriesColor,\n      transformTooltipContent,\n    };\n  },\n  methods: {\n    comparisonHasSegment(comparison: AnyComparison) {\n      return typeof comparison.params.segment !== 'undefined';\n    },\n    removeSegmentComparison(index: number) {\n      // otherwise the tooltip will be stuck on the screen\n      window.$(this.$refs.root as HTMLElement).tooltip('destroy');\n      ComparisonsStoreInstance.removeSegmentComparison(index);\n    },\n    getComparisonPeriodType(comparison: AnyComparison) {\n      const { period } = comparison.params;\n      if (period === 'range') {\n        return translate('CoreHome_PeriodRange');\n      }\n      const periodStr = translate(\n        `Intl_Period${period.substring(0, 1).toUpperCase()}${period.substring(1)}`,\n      );\n      return periodStr.substring(0, 1).toUpperCase() + periodStr.substring(1);\n    },\n    getComparisonTooltip(\n      segmentComparison: AnyComparison,\n      periodComparison: AnyComparison,\n    ): string|undefined {\n      if (!this.comparisonTooltips\n        || !Object.keys(this.comparisonTooltips).length\n      ) {\n        return undefined;\n      }\n\n      return (this.comparisonTooltips[periodComparison.index] || {})[segmentComparison.index];\n    },\n    getUrlToSegment(segment: string) {\n      const hash = { ...MatomoUrl.hashParsed.value };\n      delete hash.comparePeriods;\n      delete hash.compareDates;\n      delete hash.compareSegments;\n      hash.segment = segment;\n      return `${window.location.search}#?${MatomoUrl.stringify(hash)}`;\n    },\n    onComparisonsChanged() {\n      this.comparisonTooltips = null;\n\n      if (!ComparisonsStoreInstance.isComparing()) {\n        return;\n      }\n\n      const periodComparisons = ComparisonsStoreInstance.getPeriodComparisons();\n      const segmentComparisons = ComparisonsStoreInstance.getSegmentComparisons();\n      AjaxHelper.fetch({\n        method: 'API.getProcessedReport',\n        apiModule: 'VisitsSummary',\n        apiAction: 'get',\n        compare: '1',\n        compareSegments: MatomoUrl.getSearchParam('compareSegments'),\n        comparePeriods: MatomoUrl.getSearchParam('comparePeriods'),\n        compareDates: MatomoUrl.getSearchParam('compareDates'),\n        format_metrics: '1',\n      }).then((report) => {\n        this.comparisonTooltips = {};\n        periodComparisons.forEach((periodComp) => {\n          this.comparisonTooltips![periodComp.index] = {};\n\n          segmentComparisons.forEach((segmentComp) => {\n            const tooltip = this.generateComparisonTooltip(report, periodComp, segmentComp);\n            this.comparisonTooltips![periodComp.index][segmentComp.index] = tooltip;\n          });\n        });\n      });\n    },\n    generateComparisonTooltip(\n      visitsSummary: ProcessedReportResponse,\n      periodComp: AnyComparison,\n      segmentComp: AnyComparison,\n    ): string {\n      if (!visitsSummary.reportData.comparisons) { // sanity check\n        return '';\n      }\n\n      const firstRowIndex = ComparisonsStoreInstance.getComparisonSeriesIndex(\n        periodComp.index,\n        0,\n      );\n\n      const firstRow = visitsSummary.reportData.comparisons[firstRowIndex];\n\n      const comparisonRowIndex = ComparisonsStoreInstance.getComparisonSeriesIndex(\n        periodComp.index,\n        segmentComp.index,\n      );\n      const comparisonRow = visitsSummary.reportData.comparisons[comparisonRowIndex];\n\n      const firstPeriodRow = visitsSummary.reportData.comparisons[segmentComp.index];\n\n      let tooltip = '<div class=\"comparison-card-tooltip\">';\n\n      let visitsPercent = ((comparisonRow.nb_visits / firstRow.nb_visits) * 100)\n        .toFixed(2);\n      visitsPercent = `${visitsPercent}%`;\n\n      tooltip += translate('General_ComparisonCardTooltip1', [\n        `'${comparisonRow.compareSegmentPretty}'`,\n        comparisonRow.comparePeriodPretty,\n        visitsPercent,\n        comparisonRow.nb_visits.toString(),\n        firstRow.nb_visits.toString(),\n      ]);\n      if (periodComp.index > 0) {\n        tooltip += '<br/><br/>';\n        tooltip += translate('General_ComparisonCardTooltip2', [\n          comparisonRow.nb_visits_change.toString(),\n          firstPeriodRow.compareSegmentPretty,\n          firstPeriodRow.comparePeriodPretty,\n        ]);\n      }\n\n      tooltip += '</div>';\n      return tooltip;\n    },\n  },\n  mounted() {\n    Matomo.on('piwikComparisonsChanged', () => {\n      this.onComparisonsChanged();\n    });\n\n    this.onComparisonsChanged();\n  },\n});\n</script>\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { reactive, readonly, DeepReadonly } from 'vue';\nimport Matomo from '../Matomo/Matomo';\n\ninterface SegmentInfo {\n  definition: string;\n  name: string;\n}\n\ninterface SegmentsStoreData {\n  availableSegments: SegmentInfo[];\n}\n\nclass SegmentsStore {\n  private segmentState = reactive<SegmentsStoreData>({\n    availableSegments: [],\n  });\n\n  get state(): DeepReadonly<SegmentsStoreData> {\n    return readonly(this.segmentState);\n  }\n\n  constructor() {\n    Matomo.on('piwikSegmentationInited', () => this.setSegmentState());\n  }\n\n  private setSegmentState() {\n    try {\n      const uiControlObject = $('.segmentEditorPanel').data('uiControlObject');\n      this.segmentState.availableSegments = uiControlObject.impl.availableSegments || [];\n    } catch (e) {\n      // segment editor is not initialized yet\n    }\n  }\n}\n\nexport default new SegmentsStore();\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  reactive,\n  watch,\n  computed,\n  readonly,\n} from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport Matomo from '../Matomo/Matomo';\nimport { translate } from '../translate';\nimport Periods from '../Periods/Periods';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport SegmentsStore from '../Segmentation/Segments.store';\n\nconst SERIES_COLOR_COUNT = 8;\nconst SERIES_SHADE_COUNT = 3;\n\nexport interface SegmentComparison {\n  params: {\n    segment: string,\n  },\n  title: string,\n  index: number,\n}\n\nexport interface PeriodComparison {\n  params: {\n    period: string,\n    date: string,\n  },\n  title: string,\n  index: number,\n}\n\nexport interface AnyComparison {\n  params: { [name: string]: string },\n  title: string,\n  index: number,\n}\n\nexport interface ComparisonsStoreState {\n  comparisonsDisabledFor: string[];\n}\n\nexport interface ComparisonSeriesInfo {\n  index: number;\n  params: { [key: string]: string };\n  color: string;\n}\n\nfunction wrapArray<T>(values: T | T[]): T[] {\n  if (!values) {\n    return [];\n  }\n  return Array.isArray(values) ? values : [values];\n}\n\nexport default class ComparisonsStore {\n  private privateState = reactive<ComparisonsStoreState>({\n    comparisonsDisabledFor: [],\n  });\n\n  readonly state = readonly(this.privateState); // for tests\n\n  private colors: { [key: string]: string } = {};\n\n  readonly segmentComparisons = computed(() => this.parseSegmentComparisons());\n\n  readonly periodComparisons = computed(() => this.parsePeriodComparisons());\n\n  readonly isEnabled = computed(() => this.checkEnabledForCurrentPage());\n\n  constructor() {\n    if (document.readyState === 'complete'\n      || document.readyState === 'interactive') {\n      this.loadComparisonsDisabledFor();\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        this.loadComparisonsDisabledFor();\n      });\n    }\n\n    $(() => {\n      this.colors = this.getAllSeriesColors() as { [key: string]: string };\n    });\n\n    watch(\n      () => this.getComparisons(),\n      () => Matomo.postEvent('piwikComparisonsChanged'),\n      { deep: true },\n    );\n  }\n\n  getComparisons(): AnyComparison[] {\n    return (this.getSegmentComparisons() as AnyComparison[])\n      .concat(this.getPeriodComparisons() as AnyComparison[]);\n  }\n\n  isComparing(): boolean {\n    return this.isComparisonEnabled()\n      // first two in each array are for the currently selected segment/period\n      && (this.segmentComparisons.value.length > 1\n        || this.periodComparisons.value.length > 1);\n  }\n\n  isComparingPeriods(): boolean {\n    return this.getPeriodComparisons().length > 1; // first is currently selected period\n  }\n\n  getSegmentComparisons(): SegmentComparison[] {\n    if (!this.isComparisonEnabled()) {\n      return [];\n    }\n\n    return this.segmentComparisons.value;\n  }\n\n  getPeriodComparisons(): PeriodComparison[] {\n    if (!this.isComparisonEnabled()) {\n      return [];\n    }\n\n    return this.periodComparisons.value;\n  }\n\n  getSeriesColor(\n    segmentComparison: SegmentComparison,\n    periodComparison: PeriodComparison,\n    metricIndex = 0,\n  ): string {\n    const seriesIndex = this.getComparisonSeriesIndex(\n      periodComparison.index,\n      segmentComparison.index,\n    ) % SERIES_COLOR_COUNT;\n\n    if (metricIndex === 0) {\n      return this.colors[`series${seriesIndex}`];\n    }\n\n    const shadeIndex = metricIndex % SERIES_SHADE_COUNT;\n    return this.colors[`series${seriesIndex}-shade${shadeIndex}`];\n  }\n\n  getSeriesColorName(seriesIndex: number, metricIndex: number): string {\n    let colorName = `series${(seriesIndex % SERIES_COLOR_COUNT)}`;\n    if (metricIndex > 0) {\n      colorName += `-shade${(metricIndex % SERIES_SHADE_COUNT)}`;\n    }\n    return colorName;\n  }\n\n  isComparisonEnabled(): boolean {\n    return this.isEnabled.value;\n  }\n\n  getIndividualComparisonRowIndices(seriesIndex: number): {\n    segmentIndex: number,\n    periodIndex: number,\n  } {\n    const segmentCount = this.getSegmentComparisons().length;\n    const segmentIndex = seriesIndex % segmentCount;\n    const periodIndex = Math.floor(seriesIndex / segmentCount);\n\n    return {\n      segmentIndex,\n      periodIndex,\n    };\n  }\n\n  getComparisonSeriesIndex(periodIndex: number, segmentIndex: number): number {\n    const segmentCount = this.getSegmentComparisons().length;\n    return periodIndex * segmentCount + segmentIndex;\n  }\n\n  getAllComparisonSeries(): ComparisonSeriesInfo[] {\n    const seriesInfo: ComparisonSeriesInfo[] = [];\n\n    let seriesIndex = 0;\n    this.getPeriodComparisons().forEach((periodComp) => {\n      this.getSegmentComparisons().forEach((segmentComp) => {\n        seriesInfo.push({\n          index: seriesIndex,\n          params: { ...segmentComp.params, ...periodComp.params },\n          color: this.colors[`series${seriesIndex}`],\n        });\n        seriesIndex += 1;\n      });\n    });\n\n    return seriesInfo;\n  }\n\n  removeSegmentComparison(index: number): void {\n    if (!this.isComparisonEnabled()) {\n      throw new Error('Comparison disabled.');\n    }\n\n    const newComparisons: SegmentComparison[] = [...this.segmentComparisons.value];\n    newComparisons.splice(index, 1);\n\n    const extraParams: {[key: string]: string} = {};\n    if (index === 0) {\n      extraParams.segment = newComparisons[0].params.segment;\n    }\n\n    this.updateQueryParamsFromComparisons(\n      newComparisons,\n      this.periodComparisons.value,\n      extraParams,\n    );\n  }\n\n  addSegmentComparison(params: { [name: string]: string }): void {\n    if (!this.isComparisonEnabled()) {\n      throw new Error('Comparison disabled.');\n    }\n\n    const newComparisons = this.segmentComparisons.value\n      .concat([{ params, index: -1, title: '' } as SegmentComparison]);\n    this.updateQueryParamsFromComparisons(newComparisons, this.periodComparisons.value);\n  }\n\n  private updateQueryParamsFromComparisons(\n    segmentComparisons: SegmentComparison[],\n    periodComparisons: PeriodComparison[],\n    extraParams = {},\n  ) {\n    // get unique segments/periods/dates from new Comparisons\n    const compareSegments: {[key: string]: boolean} = {};\n    const comparePeriodDatePairs: {[key: string]: boolean} = {};\n\n    let firstSegment = false;\n    let firstPeriod = false;\n\n    segmentComparisons.forEach((comparison) => {\n      if (firstSegment) {\n        compareSegments[comparison.params.segment] = true;\n      } else {\n        firstSegment = true;\n      }\n    });\n\n    periodComparisons.forEach((comparison) => {\n      if (firstPeriod) {\n        comparePeriodDatePairs[`${comparison.params.period}|${comparison.params.date}`] = true;\n      } else {\n        firstPeriod = true;\n      }\n    });\n\n    const comparePeriods: string[] = [];\n    const compareDates: string[] = [];\n    Object.keys(comparePeriodDatePairs).forEach((pair) => {\n      const parts = pair.split('|');\n      comparePeriods.push(parts[0]);\n      compareDates.push(parts[1]);\n    });\n\n    const compareParams: {[key: string]: string[]} = {\n      compareSegments: Object.keys(compareSegments),\n      comparePeriods,\n      compareDates,\n    };\n\n    // change the page w/ these new param values\n    const baseParams = Matomo.helper.isReportingPage()\n      ? MatomoUrl.hashParsed.value\n      : MatomoUrl.urlParsed.value;\n    MatomoUrl.updateLocation({\n      ...baseParams,\n      ...compareParams,\n      ...extraParams,\n    });\n  }\n\n  private getAllSeriesColors() {\n    const { ColorManager } = Matomo;\n    if (!ColorManager) {\n      return [];\n    }\n\n    const seriesColorNames = [];\n\n    for (let i = 0; i < SERIES_COLOR_COUNT; i += 1) {\n      seriesColorNames.push(`series${i}`);\n      for (let j = 0; j < SERIES_SHADE_COUNT; j += 1) {\n        seriesColorNames.push(`series${i}-shade${j}`);\n      }\n    }\n\n    return ColorManager.getColors('comparison-series-color', seriesColorNames);\n  }\n\n  private loadComparisonsDisabledFor() {\n    const matomoModule: string = MatomoUrl.parsed.value.module as string;\n\n    // Skip while installing, updating or logging in\n    if (matomoModule === 'CoreUpdater'\n      || matomoModule === 'Installation'\n      || matomoModule === 'Overlay'\n      || window.piwik.isPagesComparisonApiDisabled\n      || window.piwik.installation\n      || window.broadcast.isLoginPage()\n    ) {\n      this.privateState.comparisonsDisabledFor = [];\n      return;\n    }\n\n    AjaxHelper.fetch({\n      module: 'API',\n      method: 'API.getPagesComparisonsDisabledFor',\n    }).then((result) => {\n      this.privateState.comparisonsDisabledFor = result;\n    });\n  }\n\n  private parseSegmentComparisons(): SegmentComparison[] {\n    const { availableSegments } = SegmentsStore.state;\n\n    const compareSegments: string[] = [\n      ...wrapArray(MatomoUrl.parsed.value.compareSegments as string[]),\n    ];\n\n    // add base comparisons\n    compareSegments.unshift(MatomoUrl.parsed.value.segment as string || '');\n\n    const newSegmentComparisons: SegmentComparison[] = [];\n    compareSegments.forEach((segment, idx) => {\n      let storedSegment!: { definition: string, name: string };\n\n      availableSegments.forEach((s) => {\n        if (s.definition === segment\n          || s.definition === decodeURIComponent(segment)\n          || decodeURIComponent(s.definition) === segment\n        ) {\n          storedSegment = s;\n        }\n      });\n\n      let segmentTitle = storedSegment ? storedSegment.name : translate('General_Unknown');\n      if (segment.trim() === '') {\n        segmentTitle = translate('SegmentEditor_DefaultAllVisits');\n      }\n\n      newSegmentComparisons.push({\n        params: {\n          segment,\n        },\n        title: Matomo.helper.htmlDecode(segmentTitle),\n        index: idx,\n      });\n    });\n\n    return newSegmentComparisons;\n  }\n\n  private parsePeriodComparisons(): PeriodComparison[] {\n    const comparePeriods: string[] = [\n      ...wrapArray(MatomoUrl.parsed.value.comparePeriods as string[]),\n    ];\n\n    const compareDates: string[] = [\n      ...wrapArray(MatomoUrl.parsed.value.compareDates as string[]),\n    ];\n\n    comparePeriods.unshift(MatomoUrl.parsed.value.period as string);\n    compareDates.unshift(MatomoUrl.parsed.value.date as string);\n\n    const newPeriodComparisons: PeriodComparison[] = [];\n    for (let i = 0; i < Math.min(compareDates.length, comparePeriods.length); i += 1) {\n      let title;\n      try {\n        title = Periods.parse(comparePeriods[i], compareDates[i]).getPrettyString();\n      } catch (e) {\n        title = translate('General_Error');\n      }\n\n      newPeriodComparisons.push({\n        params: {\n          date: compareDates[i],\n          period: comparePeriods[i],\n        },\n        title,\n        index: i,\n      });\n    }\n\n    return newPeriodComparisons;\n  }\n\n  private checkEnabledForCurrentPage() {\n    // category/subcategory is not included on top bar pages, so in that case we use module/action\n    const category = MatomoUrl.parsed.value.category || MatomoUrl.parsed.value.module;\n    const subcategory = MatomoUrl.parsed.value.subcategory\n      || MatomoUrl.parsed.value.action;\n\n    const id = `${category}.${subcategory}`;\n    const isEnabled = this.privateState.comparisonsDisabledFor.indexOf(id) === -1\n      && this.privateState.comparisonsDisabledFor.indexOf(`${category}.*`) === -1;\n\n    document.documentElement.classList.toggle('comparisonsDisabled', !isEnabled);\n\n    return isEnabled;\n  }\n}\n","import ComparisonsStore from './Comparisons.store';\n\nexport default new ComparisonsStore();\n","\nimport { defineComponent, computed } from 'vue';\nimport { AnyComparison } from './Comparisons.store';\nimport ComparisonsStoreInstance from './Comparisons.store.instance';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { translate } from '../translate';\nimport Tooltips from '../Tooltips/Tooltips';\n\ninterface ProcessedReportComparison {\n  compareSegmentPretty: string;\n  comparePeriodPretty: string;\n  nb_visits: number;\n  nb_visits_change: number;\n}\n\ninterface ProcessedReportData {\n  comparisons?: ProcessedReportComparison[];\n}\n\ninterface ProcessedReportResponse {\n  reportData: ProcessedReportData;\n}\n\ninterface ComparisonState {\n  comparisonTooltips: Record<string, Record<string, string>>|null;\n}\n\nexport default defineComponent({\n  props: {\n  },\n  directives: {\n    Tooltips,\n  },\n  data(): ComparisonState {\n    return {\n      comparisonTooltips: null,\n    };\n  },\n  setup() {\n    // accessing has to be done through a computed property so we can use the computed\n    // instance directly in the template. unfortunately, vue won't register to changes.\n    const isComparing = computed(\n      () => ComparisonsStoreInstance.isComparing() && !window.broadcast.isNoDataPage(),\n    );\n    const segmentComparisons = computed(() => ComparisonsStoreInstance.getSegmentComparisons());\n    const periodComparisons = computed(() => ComparisonsStoreInstance.getPeriodComparisons());\n    const getSeriesColor = ComparisonsStoreInstance.getSeriesColor.bind(ComparisonsStoreInstance);\n\n    function transformTooltipContent(this: HTMLElement) {\n      const title = window.$(this).attr('title');\n      if (!title) {\n        return title;\n      }\n      return window.vueSanitize(title.replace(/\\n/g, '<br />'));\n    }\n\n    return {\n      isComparing,\n      segmentComparisons,\n      periodComparisons,\n      getSeriesColor,\n      transformTooltipContent,\n    };\n  },\n  methods: {\n    comparisonHasSegment(comparison: AnyComparison) {\n      return typeof comparison.params.segment !== 'undefined';\n    },\n    removeSegmentComparison(index: number) {\n      // otherwise the tooltip will be stuck on the screen\n      window.$(this.$refs.root as HTMLElement).tooltip('destroy');\n      ComparisonsStoreInstance.removeSegmentComparison(index);\n    },\n    getComparisonPeriodType(comparison: AnyComparison) {\n      const { period } = comparison.params;\n      if (period === 'range') {\n        return translate('CoreHome_PeriodRange');\n      }\n      const periodStr = translate(\n        `Intl_Period${period.substring(0, 1).toUpperCase()}${period.substring(1)}`,\n      );\n      return periodStr.substring(0, 1).toUpperCase() + periodStr.substring(1);\n    },\n    getComparisonTooltip(\n      segmentComparison: AnyComparison,\n      periodComparison: AnyComparison,\n    ): string|undefined {\n      if (!this.comparisonTooltips\n        || !Object.keys(this.comparisonTooltips).length\n      ) {\n        return undefined;\n      }\n\n      return (this.comparisonTooltips[periodComparison.index] || {})[segmentComparison.index];\n    },\n    getUrlToSegment(segment: string) {\n      const hash = { ...MatomoUrl.hashParsed.value };\n      delete hash.comparePeriods;\n      delete hash.compareDates;\n      delete hash.compareSegments;\n      hash.segment = segment;\n      return `${window.location.search}#?${MatomoUrl.stringify(hash)}`;\n    },\n    onComparisonsChanged() {\n      this.comparisonTooltips = null;\n\n      if (!ComparisonsStoreInstance.isComparing()) {\n        return;\n      }\n\n      const periodComparisons = ComparisonsStoreInstance.getPeriodComparisons();\n      const segmentComparisons = ComparisonsStoreInstance.getSegmentComparisons();\n      AjaxHelper.fetch({\n        method: 'API.getProcessedReport',\n        apiModule: 'VisitsSummary',\n        apiAction: 'get',\n        compare: '1',\n        compareSegments: MatomoUrl.getSearchParam('compareSegments'),\n        comparePeriods: MatomoUrl.getSearchParam('comparePeriods'),\n        compareDates: MatomoUrl.getSearchParam('compareDates'),\n        format_metrics: '1',\n      }).then((report) => {\n        this.comparisonTooltips = {};\n        periodComparisons.forEach((periodComp) => {\n          this.comparisonTooltips![periodComp.index] = {};\n\n          segmentComparisons.forEach((segmentComp) => {\n            const tooltip = this.generateComparisonTooltip(report, periodComp, segmentComp);\n            this.comparisonTooltips![periodComp.index][segmentComp.index] = tooltip;\n          });\n        });\n      });\n    },\n    generateComparisonTooltip(\n      visitsSummary: ProcessedReportResponse,\n      periodComp: AnyComparison,\n      segmentComp: AnyComparison,\n    ): string {\n      if (!visitsSummary.reportData.comparisons) { // sanity check\n        return '';\n      }\n\n      const firstRowIndex = ComparisonsStoreInstance.getComparisonSeriesIndex(\n        periodComp.index,\n        0,\n      );\n\n      const firstRow = visitsSummary.reportData.comparisons[firstRowIndex];\n\n      const comparisonRowIndex = ComparisonsStoreInstance.getComparisonSeriesIndex(\n        periodComp.index,\n        segmentComp.index,\n      );\n      const comparisonRow = visitsSummary.reportData.comparisons[comparisonRowIndex];\n\n      const firstPeriodRow = visitsSummary.reportData.comparisons[segmentComp.index];\n\n      let tooltip = '<div class=\"comparison-card-tooltip\">';\n\n      let visitsPercent = ((comparisonRow.nb_visits / firstRow.nb_visits) * 100)\n        .toFixed(2);\n      visitsPercent = `${visitsPercent}%`;\n\n      tooltip += translate('General_ComparisonCardTooltip1', [\n        `'${comparisonRow.compareSegmentPretty}'`,\n        comparisonRow.comparePeriodPretty,\n        visitsPercent,\n        comparisonRow.nb_visits.toString(),\n        firstRow.nb_visits.toString(),\n      ]);\n      if (periodComp.index > 0) {\n        tooltip += '<br/><br/>';\n        tooltip += translate('General_ComparisonCardTooltip2', [\n          comparisonRow.nb_visits_change.toString(),\n          firstPeriodRow.compareSegmentPretty,\n          firstPeriodRow.comparePeriodPretty,\n        ]);\n      }\n\n      tooltip += '</div>';\n      return tooltip;\n    },\n  },\n  mounted() {\n    Matomo.on('piwikComparisonsChanged', () => {\n      this.onComparisonsChanged();\n    });\n\n    this.onComparisonsChanged();\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Comparisons.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Comparisons.vue?vue&type=script&lang=ts\"","import { render } from \"./Comparisons.vue?vue&type=template&id=39ac6c4e\"\nimport script from \"./Comparisons.vue?vue&type=script&lang=ts\"\nexport * from \"./Comparisons.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    ref=\"root\"\n    class=\"menuDropdown\"\n    v-focus-anywhere-but-here=\"{ blur: lostFocus }\"\n  >\n    <span\n      class=\"title\"\n      @click=\"showItems = !showItems\"\n      :title=\"tooltip\"\n    >\n      <span v-html=\"$sanitize(this.actualMenuTitle)\" />\n      <span class=\"icon-chevron-down reporting-menu-sub-icon\" />\n    </span>\n    <div\n      class=\"items\"\n      v-show=\"showItems\"\n    >\n      <div\n        class=\"search\"\n        v-if=\"showSearch && showItems\"\n      >\n        <input\n          type=\"text\"\n          v-model=\"searchTerm\"\n          v-focus-if=\"{ focused: showItems }\"\n          @keydown=\"onSearchTermKeydown($event)\"\n          :placeholder=\"translate('General_Search')\"\n        />\n        <div\n          v-show=\"!searchTerm\"\n          class=\"search_ico icon-search\"\n          :title=\"translate('General_Search')\"\n        />\n        <div\n          v-show=\"searchTerm\"\n          v-on:click=\"searchTerm = '';searchItems('')\"\n          class=\"reset icon-close\"\n          :title=\"translate('General_Clear')\"\n        />\n      </div>\n      <div v-on:click=\"selectItem($event)\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    menuTitle: String,\n    tooltip: String,\n    showSearch: Boolean,\n    menuTitleChangeOnClick: Boolean,\n  },\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  emits: ['afterSelect'],\n  watch: {\n    menuTitle() {\n      this.actualMenuTitle = this.menuTitle;\n    },\n  },\n  data() {\n    return {\n      showItems: false,\n      searchTerm: '',\n      actualMenuTitle: this.menuTitle,\n    };\n  },\n  methods: {\n    lostFocus() {\n      this.showItems = false;\n    },\n    selectItem(event: MouseEvent) {\n      const targetClasses = (event.target as HTMLElement).classList;\n      if (!targetClasses.contains('item')\n        || targetClasses.contains('disabled')\n        || targetClasses.contains('separator')\n      ) {\n        return;\n      }\n\n      if (this.menuTitleChangeOnClick) {\n        this.actualMenuTitle = ((event.target as HTMLElement).textContent || '')\n          .replace(/[\\u0000-\\u2666]/g, (c) => `&#${c.charCodeAt(0)};`); // eslint-disable-line\n      }\n\n      this.showItems = false;\n\n      $(this.$slots.default!()[0]!.el as HTMLElement).find('.item').removeClass('active');\n      targetClasses.add('active');\n\n      this.$emit('afterSelect', event.target);\n    },\n    onSearchTermKeydown() {\n      setTimeout(() => {\n        this.searchItems(this.searchTerm);\n      });\n    },\n    searchItems(unprocessedSearchTerm: string) {\n      const searchTerm = unprocessedSearchTerm.toLowerCase();\n\n      $(this.$refs.root as HTMLElement).find('.item').each((index: number, node: HTMLElement) => {\n        const $node = $(node);\n\n        if ($node.text().toLowerCase().indexOf(searchTerm) === -1) {\n          $node.hide();\n        } else {\n          $node.show();\n        }\n      });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    menuTitle: String,\n    tooltip: String,\n    showSearch: Boolean,\n    menuTitleChangeOnClick: Boolean,\n  },\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  emits: ['afterSelect'],\n  watch: {\n    menuTitle() {\n      this.actualMenuTitle = this.menuTitle;\n    },\n  },\n  data() {\n    return {\n      showItems: false,\n      searchTerm: '',\n      actualMenuTitle: this.menuTitle,\n    };\n  },\n  methods: {\n    lostFocus() {\n      this.showItems = false;\n    },\n    selectItem(event: MouseEvent) {\n      const targetClasses = (event.target as HTMLElement).classList;\n      if (!targetClasses.contains('item')\n        || targetClasses.contains('disabled')\n        || targetClasses.contains('separator')\n      ) {\n        return;\n      }\n\n      if (this.menuTitleChangeOnClick) {\n        this.actualMenuTitle = ((event.target as HTMLElement).textContent || '')\n          .replace(/[\\u0000-\\u2666]/g, (c) => `&#${c.charCodeAt(0)};`); // eslint-disable-line\n      }\n\n      this.showItems = false;\n\n      $(this.$slots.default!()[0]!.el as HTMLElement).find('.item').removeClass('active');\n      targetClasses.add('active');\n\n      this.$emit('afterSelect', event.target);\n    },\n    onSearchTermKeydown() {\n      setTimeout(() => {\n        this.searchItems(this.searchTerm);\n      });\n    },\n    searchItems(unprocessedSearchTerm: string) {\n      const searchTerm = unprocessedSearchTerm.toLowerCase();\n\n      $(this.$refs.root as HTMLElement).find('.item').each((index: number, node: HTMLElement) => {\n        const $node = $(node);\n\n        if ($node.text().toLowerCase().indexOf(searchTerm) === -1) {\n          $node.hide();\n        } else {\n          $node.show();\n        }\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MenuItemsDropdown.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MenuItemsDropdown.vue?vue&type=script&lang=ts\"","import { render } from \"./MenuItemsDropdown.vue?vue&type=template&id=3418188f\"\nimport script from \"./MenuItemsDropdown.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuItemsDropdown.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div ref=\"root\"/>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  ref,\n  watch,\n  onMounted,\n} from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport { parseDate } from '../Periods';\n\nconst DEFAULT_STEP_MONTHS = 1;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    selectedDateStart: Date,\n    selectedDateEnd: Date,\n    highlightedDateStart: Date,\n    highlightedDateEnd: Date,\n    viewDate: [String, Date],\n    stepMonths: Number,\n    disableMonthDropdown: Boolean,\n    options: Object,\n  },\n  emits: ['cellHover', 'cellHoverLeave', 'dateSelect'],\n  setup(props, context) {\n    const root = ref<HTMLElement|null>(null);\n\n    function setDateCellColor($dateCell: JQuery, dateValue: Date): void {\n      const $dateCellLink = $dateCell.children('a');\n\n      if (props.selectedDateStart\n        && props.selectedDateEnd\n        && dateValue >= props.selectedDateStart\n        && dateValue <= props.selectedDateEnd\n      ) {\n        $dateCell.addClass('ui-datepicker-current-period');\n      } else {\n        $dateCell.removeClass('ui-datepicker-current-period');\n      }\n\n      if (props.highlightedDateStart\n        && props.highlightedDateEnd\n        && dateValue >= props.highlightedDateStart\n        && dateValue <= props.highlightedDateEnd\n      ) {\n        // other-month cells don't have links, so the <td> must have the ui-state-hover class\n        const elementToAddClassTo = $dateCellLink.length ? $dateCellLink : $dateCell;\n        elementToAddClassTo.addClass('ui-state-hover');\n      } else {\n        $dateCell.removeClass('ui-state-hover');\n        $dateCellLink.removeClass('ui-state-hover');\n      }\n    }\n\n    function getCellDate($dateCell: JQuery, month: number, year: number): Date {\n      if ($dateCell.hasClass('ui-datepicker-other-month')) {\n        return getOtherMonthDate($dateCell, month, year); // eslint-disable-line\n      }\n\n      const day = parseInt($dateCell.children('a,span').text(), 10);\n\n      return new Date(year, month, day);\n    }\n\n    function getOtherMonthDate($dateCell: JQuery, month: number, year: number) {\n      let date;\n\n      const $row = $dateCell.parent();\n      const $rowCells = $row.children('td');\n\n      // if in the first row, the date cell is before the current month\n      if ($row.is(':first-child')) {\n        const $firstDateInMonth = $row.children('td:not(.ui-datepicker-other-month)').first();\n\n        date = getCellDate($firstDateInMonth, month, year);\n        date.setDate($rowCells.index($dateCell) - $rowCells.index($firstDateInMonth) + 1);\n        return date;\n      }\n\n      // the date cell is after the current month\n      const $lastDateInMonth = $row.children('td:not(.ui-datepicker-other-month)').last();\n\n      date = getCellDate($lastDateInMonth, month, year);\n      date.setDate(date.getDate() + $rowCells.index($dateCell) - $rowCells.index($lastDateInMonth));\n      return date;\n    }\n\n    function getMonthYearDisplayed(): number[] {\n      const element = $(root.value!) as JQuery;\n\n      const $firstCellWithMonth = element.find('td[data-month]');\n      const month = parseInt($firstCellWithMonth.attr('data-month')!, 10);\n      const year = parseInt($firstCellWithMonth.attr('data-year')!, 10);\n\n      return [month, year];\n    }\n\n    function setDatePickerCellColors() {\n      const element = $(root.value!);\n\n      const $calendarTable = element.find('.ui-datepicker-calendar');\n\n      const monthYear = getMonthYearDisplayed();\n\n      // highlight the rest of the cells by first getting the date for the first cell\n      // in the calendar, then just incrementing by one for the rest of the cells.\n      const $cells = $calendarTable.find('td');\n      const $firstDateCell = $cells.first();\n      const currentDate = getCellDate($firstDateCell, monthYear[0], monthYear[1]);\n\n      $cells.each(function setCellColor() {\n        setDateCellColor($(this), currentDate);\n\n        currentDate.setDate(currentDate.getDate() + 1);\n      });\n    }\n\n    function viewDateChanged(): boolean {\n      if (!props.viewDate) {\n        return false;\n      }\n\n      let date: Date;\n      if (typeof props.viewDate === 'string') {\n        try {\n          date = parseDate(props.viewDate);\n        } catch (e) {\n          return false;\n        }\n      } else {\n        date = props.viewDate as Date;\n      }\n\n      const element = $(root.value!);\n\n      // only change the datepicker date if the date is outside of the current month/year.\n      // this avoids a re-render in other cases.\n      const monthYear = getMonthYearDisplayed();\n      if (monthYear[0] !== date.getMonth() || monthYear[1] !== date.getFullYear()) {\n        element.datepicker('setDate', date);\n        return true;\n      }\n\n      return false;\n    }\n\n    // remove the ui-state-active class & click handlers for every cell. we bypass\n    // the datepicker's date selection logic for smoother browser rendering.\n    function onJqueryUiRenderedPicker(): void {\n      const element = $(root.value!);\n\n      element.find('td[data-event]').off('click');\n      element.find('.ui-state-active').removeClass('ui-state-active');\n      element.find('.ui-datepicker-current-day').removeClass('ui-datepicker-current-day');\n\n      // add href to left/right nav in calendar so they can be accessed via keyboard\n      element.find('.ui-datepicker-prev,.ui-datepicker-next').attr('href', '');\n    }\n\n    function stepMonthsChanged(): boolean {\n      const element = $(root.value!);\n\n      const stepMonths = props.stepMonths || DEFAULT_STEP_MONTHS;\n      if (element.datepicker('option', 'stepMonths') === stepMonths) {\n        return false;\n      }\n\n      // setting stepMonths will change the month in view back to the selected date. to avoid\n      // we set the selected date to the month in view.\n      const currentMonth = $('.ui-datepicker-month', element).val() as number;\n      const currentYear = $('.ui-datepicker-year', element).val() as number;\n\n      element\n        .datepicker('option', 'stepMonths', stepMonths)\n        .datepicker('setDate', new Date(currentYear, currentMonth));\n\n      onJqueryUiRenderedPicker();\n\n      return true;\n    }\n\n    function enableDisableMonthDropdown(): void {\n      const element = $(root.value!);\n      const monthPicker = element.find('.ui-datepicker-month')[0] as HTMLInputElement;\n      if (monthPicker) {\n        monthPicker.disabled = props.disableMonthDropdown;\n      }\n    }\n\n    function handleOtherMonthClick(this: HTMLElement) {\n      if (!$(this).hasClass('ui-state-hover')) {\n        return;\n      }\n\n      const $row = $(this).parent();\n      const $tbody = $row.parent();\n\n      if ($row.is(':first-child')) {\n        // click on first of the month\n        $tbody.find('a').first().click();\n      } else {\n        // click on last of month\n        $tbody.find('a').last().click();\n      }\n    }\n\n    function onCalendarViewChange() {\n      // clicking left/right re-enables the month dropdown, so we disable it again\n      enableDisableMonthDropdown();\n\n      setDatePickerCellColors();\n    }\n\n    // on a prop change (NOTE: we can't watch just `props`, since then newProps and oldProps will\n    // have the same values (since it is a proxy object). Using a copy doesn't quite work, the\n    // object it returns will always be different, BUT, since we check what changes it works\n    // for our purposes. The only downside is that it runs on every tick basically, but since\n    // that is within the context of the date picker component, it's bearable.\n    watch(() => ({ ...props }), (newProps: typeof props, oldProps: typeof props) => {\n      let redraw = false;\n\n      [\n        (x: typeof props): Date|undefined => x.selectedDateStart,\n        (x: typeof props): Date|undefined => x.selectedDateEnd,\n        (x: typeof props): Date|undefined => x.highlightedDateStart,\n        (x: typeof props): Date|undefined => x.highlightedDateEnd,\n      ].forEach((selector) => {\n        if (redraw) {\n          return;\n        }\n\n        const newProp = selector(newProps);\n        const oldProp = selector(oldProps);\n\n        if (!newProp && oldProp) {\n          redraw = true;\n        }\n\n        if (newProp && !oldProp) {\n          redraw = true;\n        }\n\n        if (newProp\n          && oldProp\n          && newProp.getTime() !== oldProp.getTime()\n        ) {\n          redraw = true;\n        }\n      });\n\n      if (newProps.viewDate !== oldProps.viewDate && viewDateChanged()) {\n        redraw = true;\n      }\n\n      if (newProps.stepMonths !== oldProps.stepMonths) {\n        stepMonthsChanged();\n      }\n\n      if (newProps.disableMonthDropdown !== oldProps.disableMonthDropdown) {\n        enableDisableMonthDropdown();\n      }\n\n      // redraw when selected/highlighted dates change\n      if (redraw) {\n        setDatePickerCellColors();\n      }\n    });\n\n    onMounted(() => {\n      const element = $(root.value!);\n\n      const customOptions = props.options || {};\n      const datePickerOptions = {\n        ...Matomo.getBaseDatePickerOptions(),\n        ...customOptions,\n        onChangeMonthYear: () => {\n          // datepicker renders the HTML after this hook is called, so we use setTimeout\n          // to run some code after the render.\n          setTimeout(() => {\n            onJqueryUiRenderedPicker();\n          });\n        },\n      };\n      element.datepicker(datePickerOptions);\n\n      element.on('mouseover', 'tbody td a', (event) => {\n        // this event is triggered when a user clicks a date as well. in that case,\n        // the originalEvent is null. we don't need to redraw again for that, so\n        // we ignore events like that.\n        if (event.originalEvent) {\n          setDatePickerCellColors();\n        }\n      });\n\n      // on hover cell, execute scope.cellHover()\n      element.on('mouseenter', 'tbody td', function onMouseEnter() {\n        const monthYear = getMonthYearDisplayed();\n\n        const $dateCell = $(this);\n        const dateValue = getCellDate($dateCell, monthYear[0], monthYear[1]);\n        context.emit('cellHover', { date: dateValue, $cell: $dateCell });\n      });\n\n      // overrides jquery UI handler that unhighlights a cell when the mouse leaves it\n      element.on('mouseout', 'tbody td a', () => {\n        setDatePickerCellColors();\n      });\n\n      // call scope.cellHoverLeave() when mouse leaves table body (can't do event on tbody, for\n      // some reason that fails, so we do two events, one on the table & one on thead)\n      element\n        .on('mouseleave', 'table', () => context.emit('cellHoverLeave'))\n        .on('mouseenter', 'thead', () => context.emit('cellHoverLeave'));\n\n      // make sure whitespace is clickable when the period makes it appropriate\n      element.on('click', 'tbody td.ui-datepicker-other-month', handleOtherMonthClick);\n\n      // NOTE: using a selector w/ .on() doesn't seem to work for some reason...\n      element.on('click', (e) => {\n        e.preventDefault();\n\n        const $target = $(e.target).closest('a');\n        if (!$target.is('.ui-datepicker-next')\n          && !$target.is('.ui-datepicker-prev')\n        ) {\n          return;\n        }\n\n        onCalendarViewChange();\n      });\n\n      // when a cell is clicked, invoke the onDateSelected function. this, in conjunction\n      // with onJqueryUiRenderedPicker(), overrides the date picker's click behavior.\n      element.on('click', 'td[data-month]', (event) => {\n        const $cell = $(event.target).closest('td') as JQuery;\n        const month = parseInt($cell.attr('data-month')!, 10);\n        const year = parseInt($cell.attr('data-year')!, 10);\n        const day = parseInt($cell.children('a,span').text(), 10);\n        context.emit('dateSelect', { date: new Date(year, month, day) });\n      });\n\n      const renderPostProcessed = stepMonthsChanged();\n\n      viewDateChanged();\n      enableDisableMonthDropdown();\n\n      if (!renderPostProcessed) {\n        onJqueryUiRenderedPicker();\n      }\n\n      setDatePickerCellColors();\n    });\n\n    return {\n      root,\n    };\n  },\n});\n</script>\n","\nimport {\n  defineComponent,\n  ref,\n  watch,\n  onMounted,\n} from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport { parseDate } from '../Periods';\n\nconst DEFAULT_STEP_MONTHS = 1;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    selectedDateStart: Date,\n    selectedDateEnd: Date,\n    highlightedDateStart: Date,\n    highlightedDateEnd: Date,\n    viewDate: [String, Date],\n    stepMonths: Number,\n    disableMonthDropdown: Boolean,\n    options: Object,\n  },\n  emits: ['cellHover', 'cellHoverLeave', 'dateSelect'],\n  setup(props, context) {\n    const root = ref<HTMLElement|null>(null);\n\n    function setDateCellColor($dateCell: JQuery, dateValue: Date): void {\n      const $dateCellLink = $dateCell.children('a');\n\n      if (props.selectedDateStart\n        && props.selectedDateEnd\n        && dateValue >= props.selectedDateStart\n        && dateValue <= props.selectedDateEnd\n      ) {\n        $dateCell.addClass('ui-datepicker-current-period');\n      } else {\n        $dateCell.removeClass('ui-datepicker-current-period');\n      }\n\n      if (props.highlightedDateStart\n        && props.highlightedDateEnd\n        && dateValue >= props.highlightedDateStart\n        && dateValue <= props.highlightedDateEnd\n      ) {\n        // other-month cells don't have links, so the <td> must have the ui-state-hover class\n        const elementToAddClassTo = $dateCellLink.length ? $dateCellLink : $dateCell;\n        elementToAddClassTo.addClass('ui-state-hover');\n      } else {\n        $dateCell.removeClass('ui-state-hover');\n        $dateCellLink.removeClass('ui-state-hover');\n      }\n    }\n\n    function getCellDate($dateCell: JQuery, month: number, year: number): Date {\n      if ($dateCell.hasClass('ui-datepicker-other-month')) {\n        return getOtherMonthDate($dateCell, month, year); // eslint-disable-line\n      }\n\n      const day = parseInt($dateCell.children('a,span').text(), 10);\n\n      return new Date(year, month, day);\n    }\n\n    function getOtherMonthDate($dateCell: JQuery, month: number, year: number) {\n      let date;\n\n      const $row = $dateCell.parent();\n      const $rowCells = $row.children('td');\n\n      // if in the first row, the date cell is before the current month\n      if ($row.is(':first-child')) {\n        const $firstDateInMonth = $row.children('td:not(.ui-datepicker-other-month)').first();\n\n        date = getCellDate($firstDateInMonth, month, year);\n        date.setDate($rowCells.index($dateCell) - $rowCells.index($firstDateInMonth) + 1);\n        return date;\n      }\n\n      // the date cell is after the current month\n      const $lastDateInMonth = $row.children('td:not(.ui-datepicker-other-month)').last();\n\n      date = getCellDate($lastDateInMonth, month, year);\n      date.setDate(date.getDate() + $rowCells.index($dateCell) - $rowCells.index($lastDateInMonth));\n      return date;\n    }\n\n    function getMonthYearDisplayed(): number[] {\n      const element = $(root.value!) as JQuery;\n\n      const $firstCellWithMonth = element.find('td[data-month]');\n      const month = parseInt($firstCellWithMonth.attr('data-month')!, 10);\n      const year = parseInt($firstCellWithMonth.attr('data-year')!, 10);\n\n      return [month, year];\n    }\n\n    function setDatePickerCellColors() {\n      const element = $(root.value!);\n\n      const $calendarTable = element.find('.ui-datepicker-calendar');\n\n      const monthYear = getMonthYearDisplayed();\n\n      // highlight the rest of the cells by first getting the date for the first cell\n      // in the calendar, then just incrementing by one for the rest of the cells.\n      const $cells = $calendarTable.find('td');\n      const $firstDateCell = $cells.first();\n      const currentDate = getCellDate($firstDateCell, monthYear[0], monthYear[1]);\n\n      $cells.each(function setCellColor() {\n        setDateCellColor($(this), currentDate);\n\n        currentDate.setDate(currentDate.getDate() + 1);\n      });\n    }\n\n    function viewDateChanged(): boolean {\n      if (!props.viewDate) {\n        return false;\n      }\n\n      let date: Date;\n      if (typeof props.viewDate === 'string') {\n        try {\n          date = parseDate(props.viewDate);\n        } catch (e) {\n          return false;\n        }\n      } else {\n        date = props.viewDate as Date;\n      }\n\n      const element = $(root.value!);\n\n      // only change the datepicker date if the date is outside of the current month/year.\n      // this avoids a re-render in other cases.\n      const monthYear = getMonthYearDisplayed();\n      if (monthYear[0] !== date.getMonth() || monthYear[1] !== date.getFullYear()) {\n        element.datepicker('setDate', date);\n        return true;\n      }\n\n      return false;\n    }\n\n    // remove the ui-state-active class & click handlers for every cell. we bypass\n    // the datepicker's date selection logic for smoother browser rendering.\n    function onJqueryUiRenderedPicker(): void {\n      const element = $(root.value!);\n\n      element.find('td[data-event]').off('click');\n      element.find('.ui-state-active').removeClass('ui-state-active');\n      element.find('.ui-datepicker-current-day').removeClass('ui-datepicker-current-day');\n\n      // add href to left/right nav in calendar so they can be accessed via keyboard\n      element.find('.ui-datepicker-prev,.ui-datepicker-next').attr('href', '');\n    }\n\n    function stepMonthsChanged(): boolean {\n      const element = $(root.value!);\n\n      const stepMonths = props.stepMonths || DEFAULT_STEP_MONTHS;\n      if (element.datepicker('option', 'stepMonths') === stepMonths) {\n        return false;\n      }\n\n      // setting stepMonths will change the month in view back to the selected date. to avoid\n      // we set the selected date to the month in view.\n      const currentMonth = $('.ui-datepicker-month', element).val() as number;\n      const currentYear = $('.ui-datepicker-year', element).val() as number;\n\n      element\n        .datepicker('option', 'stepMonths', stepMonths)\n        .datepicker('setDate', new Date(currentYear, currentMonth));\n\n      onJqueryUiRenderedPicker();\n\n      return true;\n    }\n\n    function enableDisableMonthDropdown(): void {\n      const element = $(root.value!);\n      const monthPicker = element.find('.ui-datepicker-month')[0] as HTMLInputElement;\n      if (monthPicker) {\n        monthPicker.disabled = props.disableMonthDropdown;\n      }\n    }\n\n    function handleOtherMonthClick(this: HTMLElement) {\n      if (!$(this).hasClass('ui-state-hover')) {\n        return;\n      }\n\n      const $row = $(this).parent();\n      const $tbody = $row.parent();\n\n      if ($row.is(':first-child')) {\n        // click on first of the month\n        $tbody.find('a').first().click();\n      } else {\n        // click on last of month\n        $tbody.find('a').last().click();\n      }\n    }\n\n    function onCalendarViewChange() {\n      // clicking left/right re-enables the month dropdown, so we disable it again\n      enableDisableMonthDropdown();\n\n      setDatePickerCellColors();\n    }\n\n    // on a prop change (NOTE: we can't watch just `props`, since then newProps and oldProps will\n    // have the same values (since it is a proxy object). Using a copy doesn't quite work, the\n    // object it returns will always be different, BUT, since we check what changes it works\n    // for our purposes. The only downside is that it runs on every tick basically, but since\n    // that is within the context of the date picker component, it's bearable.\n    watch(() => ({ ...props }), (newProps: typeof props, oldProps: typeof props) => {\n      let redraw = false;\n\n      [\n        (x: typeof props): Date|undefined => x.selectedDateStart,\n        (x: typeof props): Date|undefined => x.selectedDateEnd,\n        (x: typeof props): Date|undefined => x.highlightedDateStart,\n        (x: typeof props): Date|undefined => x.highlightedDateEnd,\n      ].forEach((selector) => {\n        if (redraw) {\n          return;\n        }\n\n        const newProp = selector(newProps);\n        const oldProp = selector(oldProps);\n\n        if (!newProp && oldProp) {\n          redraw = true;\n        }\n\n        if (newProp && !oldProp) {\n          redraw = true;\n        }\n\n        if (newProp\n          && oldProp\n          && newProp.getTime() !== oldProp.getTime()\n        ) {\n          redraw = true;\n        }\n      });\n\n      if (newProps.viewDate !== oldProps.viewDate && viewDateChanged()) {\n        redraw = true;\n      }\n\n      if (newProps.stepMonths !== oldProps.stepMonths) {\n        stepMonthsChanged();\n      }\n\n      if (newProps.disableMonthDropdown !== oldProps.disableMonthDropdown) {\n        enableDisableMonthDropdown();\n      }\n\n      // redraw when selected/highlighted dates change\n      if (redraw) {\n        setDatePickerCellColors();\n      }\n    });\n\n    onMounted(() => {\n      const element = $(root.value!);\n\n      const customOptions = props.options || {};\n      const datePickerOptions = {\n        ...Matomo.getBaseDatePickerOptions(),\n        ...customOptions,\n        onChangeMonthYear: () => {\n          // datepicker renders the HTML after this hook is called, so we use setTimeout\n          // to run some code after the render.\n          setTimeout(() => {\n            onJqueryUiRenderedPicker();\n          });\n        },\n      };\n      element.datepicker(datePickerOptions);\n\n      element.on('mouseover', 'tbody td a', (event) => {\n        // this event is triggered when a user clicks a date as well. in that case,\n        // the originalEvent is null. we don't need to redraw again for that, so\n        // we ignore events like that.\n        if (event.originalEvent) {\n          setDatePickerCellColors();\n        }\n      });\n\n      // on hover cell, execute scope.cellHover()\n      element.on('mouseenter', 'tbody td', function onMouseEnter() {\n        const monthYear = getMonthYearDisplayed();\n\n        const $dateCell = $(this);\n        const dateValue = getCellDate($dateCell, monthYear[0], monthYear[1]);\n        context.emit('cellHover', { date: dateValue, $cell: $dateCell });\n      });\n\n      // overrides jquery UI handler that unhighlights a cell when the mouse leaves it\n      element.on('mouseout', 'tbody td a', () => {\n        setDatePickerCellColors();\n      });\n\n      // call scope.cellHoverLeave() when mouse leaves table body (can't do event on tbody, for\n      // some reason that fails, so we do two events, one on the table & one on thead)\n      element\n        .on('mouseleave', 'table', () => context.emit('cellHoverLeave'))\n        .on('mouseenter', 'thead', () => context.emit('cellHoverLeave'));\n\n      // make sure whitespace is clickable when the period makes it appropriate\n      element.on('click', 'tbody td.ui-datepicker-other-month', handleOtherMonthClick);\n\n      // NOTE: using a selector w/ .on() doesn't seem to work for some reason...\n      element.on('click', (e) => {\n        e.preventDefault();\n\n        const $target = $(e.target).closest('a');\n        if (!$target.is('.ui-datepicker-next')\n          && !$target.is('.ui-datepicker-prev')\n        ) {\n          return;\n        }\n\n        onCalendarViewChange();\n      });\n\n      // when a cell is clicked, invoke the onDateSelected function. this, in conjunction\n      // with onJqueryUiRenderedPicker(), overrides the date picker's click behavior.\n      element.on('click', 'td[data-month]', (event) => {\n        const $cell = $(event.target).closest('td') as JQuery;\n        const month = parseInt($cell.attr('data-month')!, 10);\n        const year = parseInt($cell.attr('data-year')!, 10);\n        const day = parseInt($cell.children('a,span').text(), 10);\n        context.emit('dateSelect', { date: new Date(year, month, day) });\n      });\n\n      const renderPostProcessed = stepMonthsChanged();\n\n      viewDateChanged();\n      enableDisableMonthDropdown();\n\n      if (!renderPostProcessed) {\n        onJqueryUiRenderedPicker();\n      }\n\n      setDatePickerCellColors();\n    });\n\n    return {\n      root,\n    };\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DatePicker.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DatePicker.vue?vue&type=script&lang=ts\"","import { render } from \"./DatePicker.vue?vue&type=template&id=589729fc\"\nimport script from \"./DatePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./DatePicker.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"dateRangePicker\">\n    <div id=\"calendarRangeFrom\">\n      <h6>\n        {{ translate('General_DateRangeFrom') }}\n        <input\n          type=\"text\"\n          id=\"inputCalendarFrom\"\n          name=\"inputCalendarFrom\"\n          class=\"browser-default\"\n          v-model=\"startDateText\"\n          @keydown=\"onRangeInputChanged('from', $event)\"\n          @keyup=\"handleEnterPress($event)\"\n        />\n      </h6>\n      <DatePicker\n        id=\"calendarFrom\"\n        :view-date=\"startDate\"\n        :selected-date-start=\"fromPickerSelectedDates[0]\"\n        :selected-date-end=\"fromPickerSelectedDates[1]\"\n        :highlighted-date-start=\"fromPickerHighlightedDates[0]\"\n        :highlighted-date-end=\"fromPickerHighlightedDates[1]\"\n        @date-select=\"setStartRangeDate($event.date)\"\n        @cell-hover=\"fromPickerHighlightedDates = getNewHighlightedDates($event.date, $event.$cell)\"\n        @cell-hover-leave=\"fromPickerHighlightedDates = [null, null]\"\n      >\n      </DatePicker>\n    </div>\n    <div id=\"calendarRangeTo\">\n      <h6>\n        {{ translate('General_DateRangeTo') }}\n        <input\n          type=\"text\"\n          id=\"inputCalendarTo\"\n          name=\"inputCalendarTo\"\n          class=\"browser-default\"\n          v-model=\"endDateText\"\n          @keydown=\"onRangeInputChanged('to', $event)\"\n          @keyup=\"handleEnterPress($event)\"\n        />\n      </h6>\n      <DatePicker\n        id=\"calendarTo\"\n        :view-date=\"endDate\"\n        :selected-date-start=\"toPickerSelectedDates[0]\"\n        :selected-date-end=\"toPickerSelectedDates[1]\"\n        :highlighted-date-start=\"toPickerHighlightedDates[0]\"\n        :highlighted-date-end=\"toPickerHighlightedDates[1]\"\n        @date-select=\"setEndRangeDate($event.date)\"\n        @cell-hover=\"toPickerHighlightedDates = getNewHighlightedDates($event.date, $event.$cell)\"\n        @cell-hover-leave=\"toPickerHighlightedDates = [null, null]\"\n      >\n      </DatePicker>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport DatePicker from '../DatePicker/DatePicker.vue';\nimport { parseDate, format } from '../Periods/utilities';\nimport ChangeEvent = JQuery.ChangeEvent;\n\nconst DATE_FORMAT = 'YYYY-MM-DD';\n\ninterface DateRangePickerState {\n  fromPickerSelectedDates: (Date|null)[];\n  toPickerSelectedDates: (Date|null)[];\n  fromPickerHighlightedDates: (Date|null)[];\n  toPickerHighlightedDates: (Date|null)[];\n  startDateText?: string;\n  endDateText?: string;\n  startDateInvalid: boolean;\n  endDateInvalid: boolean;\n}\n\nexport default defineComponent({\n  props: {\n    startDate: String,\n    endDate: String,\n  },\n  components: {\n    DatePicker,\n  },\n  data(): DateRangePickerState {\n    let startDate = null;\n    try {\n      if (this.startDate) {\n        startDate = parseDate(this.startDate);\n      }\n    } catch (e) {\n      // ignore\n    }\n\n    let endDate = null;\n    try {\n      if (this.endDate) {\n        endDate = parseDate(this.endDate);\n      }\n    } catch (e) {\n      // ignore\n    }\n\n    return {\n      fromPickerSelectedDates: [startDate, startDate],\n      toPickerSelectedDates: [endDate, endDate],\n      fromPickerHighlightedDates: [null, null],\n      toPickerHighlightedDates: [null, null],\n      startDateText: this.startDate,\n      endDateText: this.endDate,\n      startDateInvalid: false,\n      endDateInvalid: false,\n    };\n  },\n  emits: ['rangeChange', 'submit'],\n  watch: {\n    startDate() {\n      this.startDateText = this.startDate;\n      this.setStartRangeDateFromStr(this.startDate);\n    },\n    endDate() {\n      this.endDateText = this.endDate;\n      this.setEndRangeDateFromStr(this.endDate);\n    },\n  },\n  mounted() {\n    this.rangeChanged(); // emit with initial range pair\n  },\n  methods: {\n    setStartRangeDate(date: Date) {\n      this.fromPickerSelectedDates = [date, date];\n\n      this.rangeChanged();\n    },\n    setEndRangeDate(date: Date) {\n      this.toPickerSelectedDates = [date, date];\n\n      this.rangeChanged();\n    },\n    onRangeInputChanged(source: string, event: ChangeEvent) {\n      setTimeout(() => {\n        if (source === 'from') {\n          this.setStartRangeDateFromStr(event.target.value);\n        } else {\n          this.setEndRangeDateFromStr(event.target.value);\n        }\n      });\n    },\n    getNewHighlightedDates(date: Date, $cell: JQuery) {\n      if ($cell.hasClass('ui-datepicker-unselectable')) {\n        return null;\n      }\n\n      return [date, date];\n    },\n    handleEnterPress($event: KeyboardEvent) {\n      if ($event.keyCode !== 13) {\n        return;\n      }\n\n      this.$emit('submit', {\n        start: this.startDate,\n        end: this.endDate,\n      });\n    },\n    setStartRangeDateFromStr(dateStr?: string) {\n      this.startDateInvalid = true;\n\n      let startDateParsed: Date|null = null;\n      try {\n        if (dateStr && dateStr.length === DATE_FORMAT.length) {\n          startDateParsed = parseDate(dateStr);\n        }\n      } catch (e) {\n        // ignore\n      }\n\n      if (startDateParsed) {\n        this.fromPickerSelectedDates = [startDateParsed, startDateParsed];\n        this.startDateInvalid = false;\n\n        this.rangeChanged();\n      }\n    },\n    setEndRangeDateFromStr(dateStr?: string) {\n      this.endDateInvalid = true;\n\n      let endDateParsed: Date|null = null;\n      try {\n        if (dateStr && dateStr.length === DATE_FORMAT.length) {\n          endDateParsed = parseDate(dateStr);\n        }\n      } catch (e) {\n        // ignore\n      }\n\n      if (endDateParsed) {\n        this.toPickerSelectedDates = [endDateParsed, endDateParsed];\n        this.endDateInvalid = false;\n\n        this.rangeChanged();\n      }\n    },\n    rangeChanged() {\n      this.$emit('rangeChange', {\n        start: this.fromPickerSelectedDates[0] ? format(this.fromPickerSelectedDates[0]) : null,\n        end: this.toPickerSelectedDates[0] ? format(this.toPickerSelectedDates[0]) : null,\n      });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport DatePicker from '../DatePicker/DatePicker.vue';\nimport { parseDate, format } from '../Periods/utilities';\nimport ChangeEvent = JQuery.ChangeEvent;\n\nconst DATE_FORMAT = 'YYYY-MM-DD';\n\ninterface DateRangePickerState {\n  fromPickerSelectedDates: (Date|null)[];\n  toPickerSelectedDates: (Date|null)[];\n  fromPickerHighlightedDates: (Date|null)[];\n  toPickerHighlightedDates: (Date|null)[];\n  startDateText?: string;\n  endDateText?: string;\n  startDateInvalid: boolean;\n  endDateInvalid: boolean;\n}\n\nexport default defineComponent({\n  props: {\n    startDate: String,\n    endDate: String,\n  },\n  components: {\n    DatePicker,\n  },\n  data(): DateRangePickerState {\n    let startDate = null;\n    try {\n      if (this.startDate) {\n        startDate = parseDate(this.startDate);\n      }\n    } catch (e) {\n      // ignore\n    }\n\n    let endDate = null;\n    try {\n      if (this.endDate) {\n        endDate = parseDate(this.endDate);\n      }\n    } catch (e) {\n      // ignore\n    }\n\n    return {\n      fromPickerSelectedDates: [startDate, startDate],\n      toPickerSelectedDates: [endDate, endDate],\n      fromPickerHighlightedDates: [null, null],\n      toPickerHighlightedDates: [null, null],\n      startDateText: this.startDate,\n      endDateText: this.endDate,\n      startDateInvalid: false,\n      endDateInvalid: false,\n    };\n  },\n  emits: ['rangeChange', 'submit'],\n  watch: {\n    startDate() {\n      this.startDateText = this.startDate;\n      this.setStartRangeDateFromStr(this.startDate);\n    },\n    endDate() {\n      this.endDateText = this.endDate;\n      this.setEndRangeDateFromStr(this.endDate);\n    },\n  },\n  mounted() {\n    this.rangeChanged(); // emit with initial range pair\n  },\n  methods: {\n    setStartRangeDate(date: Date) {\n      this.fromPickerSelectedDates = [date, date];\n\n      this.rangeChanged();\n    },\n    setEndRangeDate(date: Date) {\n      this.toPickerSelectedDates = [date, date];\n\n      this.rangeChanged();\n    },\n    onRangeInputChanged(source: string, event: ChangeEvent) {\n      setTimeout(() => {\n        if (source === 'from') {\n          this.setStartRangeDateFromStr(event.target.value);\n        } else {\n          this.setEndRangeDateFromStr(event.target.value);\n        }\n      });\n    },\n    getNewHighlightedDates(date: Date, $cell: JQuery) {\n      if ($cell.hasClass('ui-datepicker-unselectable')) {\n        return null;\n      }\n\n      return [date, date];\n    },\n    handleEnterPress($event: KeyboardEvent) {\n      if ($event.keyCode !== 13) {\n        return;\n      }\n\n      this.$emit('submit', {\n        start: this.startDate,\n        end: this.endDate,\n      });\n    },\n    setStartRangeDateFromStr(dateStr?: string) {\n      this.startDateInvalid = true;\n\n      let startDateParsed: Date|null = null;\n      try {\n        if (dateStr && dateStr.length === DATE_FORMAT.length) {\n          startDateParsed = parseDate(dateStr);\n        }\n      } catch (e) {\n        // ignore\n      }\n\n      if (startDateParsed) {\n        this.fromPickerSelectedDates = [startDateParsed, startDateParsed];\n        this.startDateInvalid = false;\n\n        this.rangeChanged();\n      }\n    },\n    setEndRangeDateFromStr(dateStr?: string) {\n      this.endDateInvalid = true;\n\n      let endDateParsed: Date|null = null;\n      try {\n        if (dateStr && dateStr.length === DATE_FORMAT.length) {\n          endDateParsed = parseDate(dateStr);\n        }\n      } catch (e) {\n        // ignore\n      }\n\n      if (endDateParsed) {\n        this.toPickerSelectedDates = [endDateParsed, endDateParsed];\n        this.endDateInvalid = false;\n\n        this.rangeChanged();\n      }\n    },\n    rangeChanged() {\n      this.$emit('rangeChange', {\n        start: this.fromPickerSelectedDates[0] ? format(this.fromPickerSelectedDates[0]) : null,\n        end: this.toPickerSelectedDates[0] ? format(this.toPickerSelectedDates[0]) : null,\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DateRangePicker.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DateRangePicker.vue?vue&type=script&lang=ts\"","import { render } from \"./DateRangePicker.vue?vue&type=template&id=67755d44\"\nimport script from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <DatePicker\n    :selected-date-start=\"selectedDates[0]\"\n    :selected-date-end=\"selectedDates[1]\"\n    :highlighted-date-start=\"highlightedDates[0]\"\n    :highlighted-date-end=\"highlightedDates[1]\"\n    :view-date=\"viewDate\"\n    :step-months=\"period === 'year' ? 12 : 1\"\n    :disable-month-dropdown=\"period === 'year'\"\n    @cell-hover=\"onHoverNormalCell($event.date, $event.$cell)\"\n    @cell-hover-leave=\"onHoverLeaveNormalCells()\"\n    @date-select=\"onDateSelected($event.date)\"\n  >\n  </DatePicker>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch, ref } from 'vue';\nimport DatePicker from '../DatePicker/DatePicker.vue';\nimport Matomo from '../Matomo/Matomo';\nimport { Periods, parseDate } from '../Periods';\n\nconst piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\nconst piwikMaxDate = new Date(Matomo.maxDateYear, Matomo.maxDateMonth - 1, Matomo.maxDateDay);\n\nexport default defineComponent({\n  props: {\n    period: {\n      type: String,\n      required: true,\n    },\n    date: [String, Date],\n  },\n  components: {\n    DatePicker,\n  },\n  emits: ['select'],\n  setup(props, context) {\n    const viewDate = ref<string|Date|undefined|null>(props.date);\n    const selectedDates = ref<(Date|null)[]>([null, null]);\n    const highlightedDates = ref<(Date|null)[]>([null, null]);\n\n    function getBoundedDateRange(date: string|Date) {\n      const dates = Periods.get(props.period).parse(date).getDateRange();\n\n      // make sure highlighted date range is within min/max date range\n      dates[0] = piwikMinDate < dates[0] ? dates[0] : piwikMinDate;\n      dates[1] = piwikMaxDate > dates[1] ? dates[1] : piwikMaxDate;\n\n      return dates;\n    }\n\n    function onHoverNormalCell(cellDate: Date, $cell: JQuery) {\n      const isOutOfMinMaxDateRange = cellDate < piwikMinDate || cellDate > piwikMaxDate;\n\n      // don't highlight anything if the period is month or day, and we're hovering over calendar\n      // whitespace. since there are no dates, it's doesn't make sense what you're selecting.\n      const shouldNotHighlightFromWhitespace = $cell.hasClass('ui-datepicker-other-month')\n        && (props.period === 'month' || props.period === 'day');\n\n      if (isOutOfMinMaxDateRange\n        || shouldNotHighlightFromWhitespace\n      ) {\n        highlightedDates.value = [null, null];\n        return;\n      }\n\n      highlightedDates.value = getBoundedDateRange(cellDate);\n    }\n\n    function onHoverLeaveNormalCells() {\n      highlightedDates.value = [null, null];\n    }\n\n    function onDateSelected(date: Date) {\n      context.emit('select', { date });\n    }\n\n    function onChanges() {\n      if (!props.period || !props.date) {\n        selectedDates.value = [null, null];\n        viewDate.value = null;\n        return;\n      }\n\n      selectedDates.value = getBoundedDateRange(props.date);\n      viewDate.value = parseDate(props.date);\n    }\n\n    watch(props, onChanges);\n\n    onChanges();\n\n    return {\n      selectedDates,\n      highlightedDates,\n      viewDate,\n      onHoverNormalCell,\n      onHoverLeaveNormalCells,\n      onDateSelected,\n    };\n  },\n});\n</script>\n","\nimport { defineComponent, watch, ref } from 'vue';\nimport DatePicker from '../DatePicker/DatePicker.vue';\nimport Matomo from '../Matomo/Matomo';\nimport { Periods, parseDate } from '../Periods';\n\nconst piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\nconst piwikMaxDate = new Date(Matomo.maxDateYear, Matomo.maxDateMonth - 1, Matomo.maxDateDay);\n\nexport default defineComponent({\n  props: {\n    period: {\n      type: String,\n      required: true,\n    },\n    date: [String, Date],\n  },\n  components: {\n    DatePicker,\n  },\n  emits: ['select'],\n  setup(props, context) {\n    const viewDate = ref<string|Date|undefined|null>(props.date);\n    const selectedDates = ref<(Date|null)[]>([null, null]);\n    const highlightedDates = ref<(Date|null)[]>([null, null]);\n\n    function getBoundedDateRange(date: string|Date) {\n      const dates = Periods.get(props.period).parse(date).getDateRange();\n\n      // make sure highlighted date range is within min/max date range\n      dates[0] = piwikMinDate < dates[0] ? dates[0] : piwikMinDate;\n      dates[1] = piwikMaxDate > dates[1] ? dates[1] : piwikMaxDate;\n\n      return dates;\n    }\n\n    function onHoverNormalCell(cellDate: Date, $cell: JQuery) {\n      const isOutOfMinMaxDateRange = cellDate < piwikMinDate || cellDate > piwikMaxDate;\n\n      // don't highlight anything if the period is month or day, and we're hovering over calendar\n      // whitespace. since there are no dates, it's doesn't make sense what you're selecting.\n      const shouldNotHighlightFromWhitespace = $cell.hasClass('ui-datepicker-other-month')\n        && (props.period === 'month' || props.period === 'day');\n\n      if (isOutOfMinMaxDateRange\n        || shouldNotHighlightFromWhitespace\n      ) {\n        highlightedDates.value = [null, null];\n        return;\n      }\n\n      highlightedDates.value = getBoundedDateRange(cellDate);\n    }\n\n    function onHoverLeaveNormalCells() {\n      highlightedDates.value = [null, null];\n    }\n\n    function onDateSelected(date: Date) {\n      context.emit('select', { date });\n    }\n\n    function onChanges() {\n      if (!props.period || !props.date) {\n        selectedDates.value = [null, null];\n        viewDate.value = null;\n        return;\n      }\n\n      selectedDates.value = getBoundedDateRange(props.date);\n      viewDate.value = parseDate(props.date);\n    }\n\n    watch(props, onChanges);\n\n    onChanges();\n\n    return {\n      selectedDates,\n      highlightedDates,\n      viewDate,\n      onHoverNormalCell,\n      onHoverLeaveNormalCells,\n      onDateSelected,\n    };\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PeriodDatePicker.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PeriodDatePicker.vue?vue&type=script&lang=ts\"","import { render } from \"./PeriodDatePicker.vue?vue&type=template&id=6d1fa14c\"\nimport script from \"./PeriodDatePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./PeriodDatePicker.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <transition\n    :name=\"type === 'toast' ? 'slow-fade-out' : undefined\"\n    @after-leave=\"toastClosed()\"\n  >\n    <div v-if=\"!deleted\">\n      <transition :name=\"type === 'toast' ? 'toast-slide-up' : undefined\" appear>\n        <div>\n          <transition :name=\"animate ? 'fade-in' : undefined\" appear>\n            <div\n              class=\"notification system\"\n              :class=\"cssClasses\"\n              :style=\"style\"\n              ref=\"root\"\n              :data-notification-instance-id=\"notificationInstanceId\"\n            >\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"alert\"\n                v-if=\"canClose\"\n                v-on:click=\"closeNotification($event)\"\n              >\n                &times;\n              </button>\n              <strong v-if=\"title\">{{ title }}</strong>\n              <!-- ng-transclude causes directive child elements to be added here -->\n              <div class=\"notification-body\">\n                <div v-if=\"message\" v-html=\"$sanitize(message)\"/>\n                <div v-if=\"!message\">\n                  <slot />\n                </div>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick } from 'vue';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    notificationId: String,\n    // NOTE: notificationId refers to server side ID for notifications stored in the session.\n    // this ID is just so it can be selected outside of this component (just for scrolling).\n    notificationInstanceId: String,\n    title: String,\n    context: String,\n    type: String,\n    noclear: Boolean,\n    toastLength: {\n      type: Number,\n      default: 12 * 1000,\n    },\n    style: [String, Object],\n    animate: Boolean,\n    message: String,\n    cssClass: String,\n  },\n  computed: {\n    cssClasses() {\n      const result: Record<string, boolean> = {};\n      if (this.context) {\n        result[`notification-${this.context}`] = true;\n      }\n      if (this.cssClass) {\n        result[this.cssClass] = true;\n      }\n      return result;\n    },\n    canClose() {\n      if (this.type === 'persistent') {\n        // otherwise it is never possible to dismiss the notification\n        return true;\n      }\n\n      return !this.noclear;\n    },\n  },\n  emits: ['closed'],\n  data() {\n    return {\n      deleted: false,\n    };\n  },\n  mounted() {\n    const addToastEvent = () => {\n      setTimeout(() => {\n        this.deleted = true;\n      }, this.toastLength);\n    };\n\n    if (this.type === 'toast') {\n      addToastEvent();\n    }\n\n    if (this.style) {\n      $(this.$refs.root as HTMLElement).css(this.style as string);\n    }\n  },\n  methods: {\n    toastClosed() {\n      nextTick(() => {\n        this.$emit('closed');\n      });\n    },\n    closeNotification(event: MouseEvent) {\n      if (this.canClose && event && event.target) {\n        this.deleted = true;\n\n        nextTick(() => {\n          this.$emit('closed');\n        });\n      }\n\n      this.markNotificationAsRead();\n    },\n    markNotificationAsRead() {\n      if (!this.notificationId) {\n        return;\n      }\n      AjaxHelper.post({ // GET params\n        module: 'CoreHome',\n        action: 'markNotificationAsRead',\n      }, { // POST params\n        notificationId: this.notificationId,\n      },\n      { withTokenInUrl: true });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent, nextTick } from 'vue';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    notificationId: String,\n    // NOTE: notificationId refers to server side ID for notifications stored in the session.\n    // this ID is just so it can be selected outside of this component (just for scrolling).\n    notificationInstanceId: String,\n    title: String,\n    context: String,\n    type: String,\n    noclear: Boolean,\n    toastLength: {\n      type: Number,\n      default: 12 * 1000,\n    },\n    style: [String, Object],\n    animate: Boolean,\n    message: String,\n    cssClass: String,\n  },\n  computed: {\n    cssClasses() {\n      const result: Record<string, boolean> = {};\n      if (this.context) {\n        result[`notification-${this.context}`] = true;\n      }\n      if (this.cssClass) {\n        result[this.cssClass] = true;\n      }\n      return result;\n    },\n    canClose() {\n      if (this.type === 'persistent') {\n        // otherwise it is never possible to dismiss the notification\n        return true;\n      }\n\n      return !this.noclear;\n    },\n  },\n  emits: ['closed'],\n  data() {\n    return {\n      deleted: false,\n    };\n  },\n  mounted() {\n    const addToastEvent = () => {\n      setTimeout(() => {\n        this.deleted = true;\n      }, this.toastLength);\n    };\n\n    if (this.type === 'toast') {\n      addToastEvent();\n    }\n\n    if (this.style) {\n      $(this.$refs.root as HTMLElement).css(this.style as string);\n    }\n  },\n  methods: {\n    toastClosed() {\n      nextTick(() => {\n        this.$emit('closed');\n      });\n    },\n    closeNotification(event: MouseEvent) {\n      if (this.canClose && event && event.target) {\n        this.deleted = true;\n\n        nextTick(() => {\n          this.$emit('closed');\n        });\n      }\n\n      this.markNotificationAsRead();\n    },\n    markNotificationAsRead() {\n      if (!this.notificationId) {\n        return;\n      }\n      AjaxHelper.post({ // GET params\n        module: 'CoreHome',\n        action: 'markNotificationAsRead',\n      }, { // POST params\n        notificationId: this.notificationId,\n      },\n      { withTokenInUrl: true });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Notification.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Notification.vue?vue&type=script&lang=ts\"","import { render } from \"./Notification.vue?vue&type=template&id=897c6e1a\"\nimport script from \"./Notification.vue?vue&type=script&lang=ts\"\nexport * from \"./Notification.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"notification-group\">\n    <Notification\n      v-for=\"(notification, index) in notifications\"\n      :key=\"notification.id || `no-id-${index}`\"\n      :notification-id=\"notification.id\"\n      :title=\"notification.title\"\n      :context=\"notification.context\"\n      :type=\"notification.type\"\n      :noclear=\"notification.noclear\"\n      :toast-length=\"notification.toastLength\"\n      :style=\"notification.style\"\n      :animate=\"notification.animate\"\n      :message=\"notification.message\"\n      :notification-instance-id=\"notification.notificationInstanceId\"\n      :css-class=\"notification.class\"\n      @closed=\"removeNotification(notification.id)\"\n    >\n      <div v-html=\"$sanitize(notification.message)\"/>\n    </Notification>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport NotificationsStore from './Notifications.store';\nimport Notification from './Notification.vue';\n\nexport default defineComponent({\n  props: {\n    group: String,\n  },\n  components: {\n    Notification,\n  },\n  computed: {\n    notifications() {\n      return NotificationsStore.state.notifications.filter((n) => {\n        if (this.group) {\n          return this.group === n.group;\n        }\n\n        return !n.group;\n      });\n    },\n  },\n  methods: {\n    removeNotification(id: string) {\n      NotificationsStore.remove(id);\n    },\n  },\n});\n</script>\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  DeepReadonly,\n  reactive,\n  createVNode,\n  readonly,\n} from 'vue';\nimport NotificationComponent from './Notification.vue';\nimport Matomo from '../Matomo/Matomo';\nimport createVueApp from '../createVueApp';\nimport Notification from './Notification';\n\ninterface NotificationsData {\n  notifications: Notification[];\n}\n\nconst { $ } = window;\n\nclass NotificationsStore {\n  private privateState = reactive<NotificationsData>({\n    notifications: [],\n  });\n\n  private nextNotificationId = 0;\n\n  get state(): DeepReadonly<NotificationsData> {\n    return readonly(this.privateState);\n  }\n\n  appendNotification(notification: Notification): void {\n    this.checkMessage(notification.message);\n\n    // remove existing notification before adding\n    if (notification.id) {\n      this.remove(notification.id);\n    }\n    this.privateState.notifications.push(notification);\n  }\n\n  prependNotification(notification: Notification): void {\n    this.checkMessage(notification.message);\n\n    // remove existing notification before adding\n    if (notification.id) {\n      this.remove(notification.id);\n    }\n    this.privateState.notifications.unshift(notification);\n  }\n\n  /**\n   * Removes a previously shown notification having the given notification id.\n   */\n  remove(id: string): void {\n    this.privateState.notifications = this.privateState.notifications.filter(\n      (n) => n.id !== id,\n    );\n  }\n\n  parseNotificationDivs(): void {\n    const $notificationNodes = $('[data-role=\"notification\"]');\n\n    const notificationsToShow: Notification[] = [];\n    $notificationNodes.each((index: number, notificationNode: HTMLElement) => {\n      const $notificationNode = $(notificationNode);\n      const attributes = $notificationNode.data();\n      const message = $notificationNode.html();\n\n      if (message) {\n        notificationsToShow.push({ ...attributes, message, animate: false } as Notification);\n      }\n\n      $notificationNodes.remove();\n    });\n\n    notificationsToShow.forEach((n) => this.show(n));\n  }\n\n  clearTransientNotifications(): void {\n    this.privateState.notifications = this.privateState.notifications.filter(\n      (n) => n.type !== 'transient',\n    );\n  }\n\n  /**\n   * Creates a notification and shows it to the user.\n   */\n  show(notification: Notification): string {\n    this.checkMessage(notification.message);\n\n    let addMethod = notification.prepend ? this.prependNotification : this.appendNotification;\n\n    let notificationPosition: Notification['placeat'] = '#notificationContainer';\n    if (notification.placeat) {\n      notificationPosition = notification.placeat;\n    } else {\n      // If a modal is open, we want to make sure the error message is visible and therefore\n      // show it within the opened modal\n      const modalSelector = '.modal.open .modal-content';\n      const modal = document.querySelector(modalSelector);\n      if (modal) {\n        if (!modal.querySelector('#modalNotificationContainer')) {\n          $(modal).prepend('<div id=\"modalNotificationContainer\"/>');\n        }\n\n        notificationPosition = `${modalSelector} #modalNotificationContainer`;\n        addMethod = this.prependNotification;\n      }\n    }\n\n    const group = notification.group\n      || (notificationPosition ? notificationPosition.toString() : '');\n\n    this.initializeNotificationContainer(notificationPosition, group);\n\n    const notificationInstanceId = (this.nextNotificationId += 1).toString();\n\n    addMethod.call(this, {\n      ...notification,\n      noclear: !!notification.noclear,\n      group,\n      notificationId: notification.id,\n      notificationInstanceId,\n      type: notification.type || 'transient',\n    });\n\n    return notificationInstanceId;\n  }\n\n  scrollToNotification(notificationInstanceId: string) {\n    setTimeout(() => {\n      const element = document.querySelector(\n        `[data-notification-instance-id='${notificationInstanceId}']`,\n      ) as HTMLElement;\n      if (element) {\n        Matomo.helper.lazyScrollTo(element, 250);\n      }\n    });\n  }\n\n  /**\n   * Shows a notification at a certain point with a quick upwards animation.\n   */\n  toast(notification: Notification): void {\n    this.checkMessage(notification.message);\n\n    const $placeat = notification.placeat ? $(notification.placeat) : undefined;\n    if (!$placeat || !$placeat.length) {\n      throw new Error('A valid selector is required for the placeat option when using Notification.toast().');\n    }\n\n    const toastElement = document.createElement('div');\n    toastElement.style.position = 'absolute';\n    toastElement.style.top = `${$placeat.offset()!.top}px`;\n    toastElement.style.left = `${$placeat.offset()!.left}px`;\n    toastElement.style.zIndex = '1000';\n    document.body.appendChild(toastElement);\n\n    const app = createVueApp({\n      render: () => createVNode(NotificationComponent, {\n        ...notification,\n        notificationId: notification.id,\n        type: 'toast',\n        onClosed: () => {\n          app.unmount();\n        },\n      }),\n    });\n    app.mount(toastElement);\n  }\n\n  private initializeNotificationContainer(\n    notificationPosition: Notification['placeat'],\n    group: string,\n  ) {\n    if (!notificationPosition) {\n      return;\n    }\n\n    const $container = $(notificationPosition);\n    if ($container.children('.notification-group').length) {\n      return;\n    }\n\n    // avoiding a dependency cycle. won't need to do this when NotificationGroup's do not need\n    // to be dynamically initialized.\n    const NotificationGroup = (window as any).CoreHome.NotificationGroup; // eslint-disable-line\n\n    const app = createVueApp({\n      template: '<NotificationGroup :group=\"group\"></NotificationGroup>',\n      data: () => ({ group }),\n    });\n    app.component('NotificationGroup', NotificationGroup);\n    app.mount($container[0]);\n  }\n\n  private checkMessage(message: string) {\n    if (!message) {\n      throw new Error('No message given, cannot display notification');\n    }\n  }\n}\n\nconst instance = new NotificationsStore();\nexport default instance;\n\n// parse notifications on dom load\n$(() => instance.parseNotificationDivs());\n","\nimport { defineComponent } from 'vue';\nimport NotificationsStore from './Notifications.store';\nimport Notification from './Notification.vue';\n\nexport default defineComponent({\n  props: {\n    group: String,\n  },\n  components: {\n    Notification,\n  },\n  computed: {\n    notifications() {\n      return NotificationsStore.state.notifications.filter((n) => {\n        if (this.group) {\n          return this.group === n.group;\n        }\n\n        return !n.group;\n      });\n    },\n  },\n  methods: {\n    removeNotification(id: string) {\n      NotificationsStore.remove(id);\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NotificationGroup.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NotificationGroup.vue?vue&type=script&lang=ts\"","import { render } from \"./NotificationGroup.vue?vue&type=template&id=672051da\"\nimport script from \"./NotificationGroup.vue?vue&type=script&lang=ts\"\nexport * from \"./NotificationGroup.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport { default as Notification } from './Notification.vue';\nexport { default as NotificationGroup } from './NotificationGroup.vue';\nexport { default as NotificationsStore } from './Notifications.store';\nexport { default as NotificationType } from './Notification';\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <a\n    class=\"item-help-icon\"\n    tabindex=\"5\"\n    href=\"javascript:\"\n    @click=\"showHelp\"\n  >\n    <span class=\"icon-help\"/>\n  </a>\n</template>\n<script lang=\"ts\">\n\nimport { defineComponent } from 'vue';\nimport { NotificationsStore } from '../Notification';\n\nconst REPORTING_HELP_NOTIFICATION_ID = 'reportingMenu-help';\n\nexport default defineComponent({\n  props: {\n    message: {\n      type: String,\n      required: true,\n    },\n    name: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      currentName: '',\n    };\n  },\n  methods: {\n    showHelp() {\n      if (this.currentName !== '') {\n        NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n        this.currentName = '';\n        return;\n      }\n      NotificationsStore.show({\n        context: 'info',\n        id: REPORTING_HELP_NOTIFICATION_ID,\n        type: 'help',\n        noclear: true,\n        class: 'help-notification',\n        message: this.message,\n        placeat: '#notificationContainer',\n        prepend: true,\n      });\n      if (this.name !== '') {\n        this.currentName = this.name;\n      }\n    },\n  },\n});\n</script>\n","\n\nimport { defineComponent } from 'vue';\nimport { NotificationsStore } from '../Notification';\n\nconst REPORTING_HELP_NOTIFICATION_ID = 'reportingMenu-help';\n\nexport default defineComponent({\n  props: {\n    message: {\n      type: String,\n      required: true,\n    },\n    name: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      currentName: '',\n    };\n  },\n  methods: {\n    showHelp() {\n      if (this.currentName !== '') {\n        NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n        this.currentName = '';\n        return;\n      }\n      NotificationsStore.show({\n        context: 'info',\n        id: REPORTING_HELP_NOTIFICATION_ID,\n        type: 'help',\n        noclear: true,\n        class: 'help-notification',\n        message: this.message,\n        placeat: '#notificationContainer',\n        prepend: true,\n      });\n      if (this.name !== '') {\n        this.currentName = this.name;\n      }\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShowHelpLink.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShowHelpLink.vue?vue&type=script&lang=ts\"","import { render } from \"./ShowHelpLink.vue?vue&type=template&id=19288664\"\nimport script from \"./ShowHelpLink.vue?vue&type=script&lang=ts\"\nexport * from \"./ShowHelpLink.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  reactive,\n  computed,\n  readonly,\n  DeepReadonly,\n} from 'vue';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport Site from './Site';\n\ninterface SitesStoreState {\n  initialSites: DeepReadonly<Site[]>;\n  isInitialized: boolean;\n}\n\ninterface SitesStoreStateFiltered extends SitesStoreState {\n  excludedSites: number[];\n}\n\nclass SitesStore {\n  private state = reactive<SitesStoreState>({\n    initialSites: [],\n    isInitialized: false,\n  });\n\n  private stateFiltered = reactive<SitesStoreStateFiltered>({\n    initialSites: [],\n    isInitialized: false,\n    excludedSites: [],\n  });\n\n  private currentRequestAbort: AbortController | null = null;\n\n  private limitRequest?: Promise<{ value: number|string }>;\n\n  public readonly initialSites = computed(() => readonly(this.state.initialSites));\n\n  public readonly initialSitesFiltered = computed(() => readonly(this.stateFiltered.initialSites));\n\n  loadInitialSites(onlySitesWithAdminAccess = false,\n    sitesToExclude: number[] = []): Promise<DeepReadonly<Site[]>|null> {\n    if (this.state.isInitialized && sitesToExclude.length === 0) {\n      return Promise.resolve(readonly(this.state.initialSites));\n    }\n\n    // If the filtered state has already been initialized with the same sites, return that.\n    if (this.stateFiltered.isInitialized\n      && sitesToExclude.length === this.stateFiltered.excludedSites.length\n      && (sitesToExclude.every((val, index) => val === this.stateFiltered.excludedSites[index]))) {\n      return Promise.resolve(readonly(this.stateFiltered.initialSites));\n    }\n\n    // If we want to exclude certain sites, perform the search for that.\n    if (sitesToExclude.length > 0) {\n      this.searchSite('%', onlySitesWithAdminAccess, sitesToExclude).then((sites) => {\n        this.stateFiltered.isInitialized = true;\n        this.stateFiltered.excludedSites = sitesToExclude;\n        if (sites !== null) {\n          this.stateFiltered.initialSites = sites;\n        }\n      });\n    }\n\n    // If the main state has already been initialized, no need to continue.\n    if (this.state.isInitialized) {\n      return Promise.resolve(readonly(this.state.initialSites));\n    }\n\n    return this.searchSite('%', onlySitesWithAdminAccess, sitesToExclude).then((sites) => {\n      this.state.isInitialized = true;\n      if (sites !== null) {\n        this.state.initialSites = sites;\n      }\n      return sites;\n    });\n  }\n\n  loadSite(idSite: number|string): void {\n    if (idSite === 'all') {\n      MatomoUrl.updateUrl({\n        ...MatomoUrl.urlParsed.value,\n        module: 'MultiSites',\n        action: 'index',\n        date: MatomoUrl.parsed.value.date,\n        period: MatomoUrl.parsed.value.period,\n      });\n    } else {\n      MatomoUrl.updateUrl({\n        ...MatomoUrl.urlParsed.value,\n        segment: '',\n        idSite,\n      }, {\n        ...MatomoUrl.hashParsed.value,\n        segment: '',\n        idSite,\n      });\n    }\n  }\n\n  searchSite(term?: string, onlySitesWithAdminAccess = false,\n    sitesToExclude: number[] = []): Promise<DeepReadonly<Site[]>|null> {\n    if (!term) {\n      return this.loadInitialSites(onlySitesWithAdminAccess, sitesToExclude);\n    }\n\n    if (this.currentRequestAbort) {\n      this.currentRequestAbort.abort();\n    }\n\n    if (!this.limitRequest) {\n      this.limitRequest = AjaxHelper.fetch({ method: 'SitesManager.getNumWebsitesToDisplayPerPage' });\n    }\n\n    return this.limitRequest.then((response) => {\n      const limit = response.value;\n\n      let methodToCall = 'SitesManager.getPatternMatchSites';\n      if (onlySitesWithAdminAccess) {\n        methodToCall = 'SitesManager.getSitesWithAdminAccess';\n      }\n\n      this.currentRequestAbort = new AbortController();\n      return AjaxHelper.fetch({\n        method: methodToCall,\n        limit,\n        pattern: term,\n        sitesToExclude,\n      }, {\n        abortController: this.currentRequestAbort,\n      });\n    }).then((response) => {\n      if (response) {\n        return this.processWebsitesList(response as Site[]);\n      }\n\n      return null;\n    }).finally(() => {\n      this.currentRequestAbort = null;\n    });\n  }\n\n  private processWebsitesList(response: Site[]): Site[] {\n    let sites = response;\n\n    if (!sites || !sites.length) {\n      return [];\n    }\n\n    sites = sites.map((s) => ({\n      ...s,\n      name: s.group ? `[${s.group}] ${s.name}` : s.name,\n    }));\n\n    sites.sort((lhs: Site, rhs: Site) => {\n      if (lhs.name.toLowerCase() < rhs.name.toLowerCase()) {\n        return -1;\n      }\n      return lhs.name.toLowerCase() > rhs.name.toLowerCase() ? 1 : 0;\n    });\n\n    return sites;\n  }\n}\n\nexport default new SitesStore();\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    class=\"siteSelector piwikSelector borderedControl\"\n    :class=\"{'expanded': showSitesList, 'disabled': !hasMultipleSites}\"\n    v-focus-anywhere-but-here=\"{ blur: onBlur }\"\n  >\n    <input\n      v-if=\"name\"\n      type=\"hidden\"\n      :value=\"displayedModelValue?.id\"\n      :name=\"name\"\n    />\n    <a\n      ref=\"selectorLink\"\n      @click=\"onClickSelector\"\n      @keydown=\"onPressEnter($event)\"\n      href=\"javascript:void(0)\"\n      :class=\"{'loading': isLoading}\"\n      class=\"title\"\n      tabindex=\"4\"\n      :title=\"selectorLinkTitle\"\n    >\n      <span\n        class=\"icon icon-chevron-down\"\n        :class=\"{'iconHidden': isLoading, 'collapsed': !showSitesList}\"\n      />\n      <span>\n        <span\n          v-text=\"displayedModelValue?.name || firstSiteName\"\n          v-if=\"displayedModelValue?.name || !placeholder\"\n        />\n        <span\n          v-if=\"!displayedModelValue?.name && placeholder\"\n          class=\"placeholder\"\n        >{{ placeholder }}</span>\n      </span>\n    </a>\n    <div\n      v-show=\"showSitesList\"\n      class=\"dropdown\"\n    >\n      <div\n        class=\"custom_select_search\"\n        v-show=\"autocompleteMinSites <= sites.length || searchTerm\"\n      >\n        <input\n          type=\"text\"\n          @click=\"searchTerm = '';loadInitialSites()\"\n          v-model=\"searchTerm\"\n          tabindex=\"4\"\n          class=\"websiteSearch inp browser-default\"\n          v-focus-if=\"{ focused: shouldFocusOnSearch }\"\n          :placeholder=\"translate('General_Search')\"\n        />\n        <img\n          title=\"Clear\"\n          v-show=\"searchTerm\"\n          @click=\"searchTerm = '';loadInitialSites()\"\n          class=\"reset\"\n          src=\"plugins/CoreHome/images/reset_search.png\"\n        />\n      </div>\n      <div v-if=\"allSitesLocation === 'top' && showAllSitesItem\">\n        <AllSitesLink\n          :href=\"urlAllSites\"\n          :all-sites-text=\"allSitesText\"\n          @click=\"onAllSitesClick($event)\"\n        />\n      </div>\n      <div class=\"custom_select_container\">\n        <ul\n          class=\"custom_select_ul_list\"\n          @click=\"showSitesList = false\"\n        >\n          <li\n            @click=\"switchSite({ ...site, id: site.idsite }, $event)\"\n            v-show=\"!(!showSelectedSite && `${activeSiteId}` === `${site.idsite}`)\"\n            v-for=\"(site, index) in sites\"\n            :key=\"index\"\n          >\n            <a\n              @click=\"$event.preventDefault()\"\n              v-html=\"$sanitize(getMatchedSiteName(site.name))\"\n              tabindex=\"4\"\n              :href=\"getUrlForSiteId(site.idsite)\"\n              :title=\"site.name\"\n            />\n          </li>\n        </ul>\n        <ul\n          v-show=\"!sites.length && searchTerm\"\n          class=\"custom_select_ul_list\"\n        >\n          <li>\n            <div class=\"noresult\">\n              {{ translate('SitesManager_NotFound') + ' ' + searchTerm }}\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div v-if=\"allSitesLocation === 'bottom' && showAllSitesItem\">\n        <AllSitesLink\n          :href=\"urlAllSites\"\n          :all-sites-text=\"allSitesText\"\n          @click=\"onAllSitesClick($event)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { DeepReadonly, defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\nimport AllSitesLink from './AllSitesLink.vue';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\nimport SitesStore from './SitesStore';\nimport debounce from '../debounce';\nimport SiteRef from './SiteRef';\nimport Site from './Site';\n\ninterface SiteSelectorState {\n  searchTerm: string;\n  showSitesList: boolean;\n  activeSiteId: string;\n  isLoading: boolean;\n  sites: DeepReadonly<Site[]>;\n  autocompleteMinSites: number;\n}\n\nexport default defineComponent({\n  props: {\n    modelValue: Object,\n    showSelectedSite: {\n      type: Boolean,\n      default: false,\n    },\n    showAllSitesItem: {\n      type: Boolean,\n      default: true,\n    },\n    switchSiteOnSelect: {\n      type: Boolean,\n      default: true,\n    },\n    onlySitesWithAdminAccess: {\n      type: Boolean,\n      default: false,\n    },\n    name: {\n      type: String,\n      default: '',\n    },\n    allSitesText: {\n      type: String,\n      default: translate('General_MultiSitesSummary'),\n    },\n    allSitesLocation: {\n      type: String,\n      default: 'bottom',\n    },\n    placeholder: String,\n    defaultToFirstSite: Boolean,\n    sitesToExclude: {\n      type: Array,\n      default: () => [] as number[],\n    },\n  },\n  emits: ['update:modelValue', 'blur'],\n  components: {\n    AllSitesLink,\n  },\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  watch: {\n    searchTerm() {\n      this.onSearchTermChanged();\n    },\n  },\n  data(): SiteSelectorState {\n    return {\n      searchTerm: '',\n      activeSiteId: `${Matomo.idSite}`,\n      showSitesList: false,\n      isLoading: false,\n      sites: [],\n      autocompleteMinSites: parseInt(Matomo.config.autocomplete_min_sites as string, 10),\n    };\n  },\n  created() {\n    this.searchSite = debounce(this.searchSite);\n\n    if (!this.modelValue && Matomo.idSite) {\n      this.$emit('update:modelValue', {\n        id: Matomo.idSite,\n        name: Matomo.helper.htmlDecode(Matomo.siteName),\n      });\n    }\n  },\n  mounted() {\n    window.initTopControls();\n\n    this.loadInitialSites().then(() => {\n      if (this.shouldDefaultToFirstSite) {\n        this.$emit('update:modelValue', { id: this.sites[0].idsite, name: this.sites[0].name });\n      }\n    });\n\n    const shortcutTitle = translate('CoreHome_ShortcutWebsiteSelector');\n    Matomo.helper.registerShortcut('w', shortcutTitle, (event: KeyboardEvent) => {\n      if (event.altKey) {\n        return;\n      }\n      if (event.preventDefault) {\n        event.preventDefault();\n      } else {\n        event.returnValue = false; // IE\n      }\n\n      const selectorLink = this.$refs.selectorLink as HTMLElement;\n      if (selectorLink) {\n        selectorLink.click();\n        selectorLink.focus();\n      }\n    });\n  },\n  computed: {\n    shouldFocusOnSearch() {\n      return (this.showSitesList && this.autocompleteMinSites <= this.sites.length)\n        || this.searchTerm;\n    },\n    selectorLinkTitle() {\n      return this.hasMultipleSites\n        ? translate('CoreHome_ChangeCurrentWebsite', this.modelValue?.name || this.firstSiteName)\n        : '';\n    },\n    hasMultipleSites() {\n      const initialSites = SitesStore.initialSitesFiltered.value\n        && SitesStore.initialSitesFiltered.value.length\n        ? SitesStore.initialSitesFiltered.value : SitesStore.initialSites.value;\n      return initialSites && initialSites.length > 1;\n    },\n    firstSiteName() {\n      const initialSites = SitesStore.initialSitesFiltered.value\n        && SitesStore.initialSitesFiltered.value.length\n        ? SitesStore.initialSitesFiltered.value : SitesStore.initialSites.value;\n      return initialSites && initialSites.length > 0 ? initialSites[0].name : '';\n    },\n    urlAllSites() {\n      const newQuery = MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        module: 'MultiSites',\n        action: 'index',\n        date: MatomoUrl.parsed.value.date,\n        period: MatomoUrl.parsed.value.period,\n      });\n      return `?${newQuery}`;\n    },\n    shouldDefaultToFirstSite() {\n      return !this.modelValue?.id\n        && (!this.hasMultipleSites || this.defaultToFirstSite)\n        && this.sites[0];\n    },\n    // using an extra computed property in case SiteSelector is used directly\n    // in a vue-entry, and there is no parent component with state to respond\n    // to update:modelValue events\n    displayedModelValue() {\n      if (this.modelValue) {\n        return this.modelValue;\n      }\n\n      if (Matomo.idSite) {\n        return {\n          id: Matomo.idSite,\n          name: Matomo.helper.htmlDecode(Matomo.siteName),\n        };\n      }\n\n      if (this.shouldDefaultToFirstSite) {\n        return { id: this.sites[0].idsite, name: this.sites[0].name };\n      }\n\n      return null;\n    },\n  },\n  methods: {\n    onSearchTermChanged() {\n      if (!this.searchTerm) {\n        this.isLoading = false;\n        this.loadInitialSites();\n      } else {\n        this.isLoading = true;\n        this.searchSite(this.searchTerm);\n      }\n    },\n    onAllSitesClick(event: MouseEvent) {\n      this.switchSite({ id: 'all', name: this.$props.allSitesText }, event);\n      this.showSitesList = false;\n    },\n    switchSite(site: SiteRef, event: KeyboardEvent|MouseEvent) {\n      // for Mac OS cmd key needs to be pressed, ctrl key on other systems\n      const controlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? event.metaKey : event.ctrlKey;\n\n      if (event && controlKey && event.target && (event.target as HTMLLinkElement).href) {\n        window.open((event.target as HTMLLinkElement).href, '_blank');\n        return;\n      }\n\n      this.$emit('update:modelValue', { id: site.id, name: site.name });\n\n      if (!this.switchSiteOnSelect || this.activeSiteId === site.id) {\n        return;\n      }\n\n      SitesStore.loadSite(site.id);\n    },\n    onBlur() {\n      this.showSitesList = false;\n      this.$emit('blur');\n    },\n    onClickSelector() {\n      if (this.hasMultipleSites) {\n        this.showSitesList = !this.showSitesList;\n\n        if (!this.isLoading && !this.searchTerm) {\n          this.loadInitialSites();\n        }\n      }\n    },\n    onPressEnter(event: KeyboardEvent) {\n      if (event.key !== 'Enter') {\n        return;\n      }\n\n      event.preventDefault();\n\n      this.showSitesList = !this.showSitesList;\n      if (this.showSitesList && !this.isLoading) {\n        this.loadInitialSites();\n      }\n    },\n    getMatchedSiteName(siteName: string) {\n      const index = siteName.toUpperCase().indexOf(this.searchTerm.toUpperCase());\n      if (index === -1\n        || this.isLoading // only highlight when we know the displayed results are for a search\n      ) {\n        return Matomo.helper.htmlEntities(siteName);\n      }\n\n      const previousPart = Matomo.helper.htmlEntities(siteName.substring(0, index));\n      const lastPart = Matomo.helper.htmlEntities(\n        siteName.substring(index + this.searchTerm.length),\n      );\n\n      return `${previousPart}<span class=\"autocompleteMatched\">${this.searchTerm}</span>${lastPart}`;\n    },\n    loadInitialSites() {\n      return SitesStore.loadInitialSites(this.onlySitesWithAdminAccess,\n        (this.sitesToExclude ? this.sitesToExclude : []) as number[]).then((sites) => {\n        this.sites = sites || [];\n      });\n    },\n    searchSite(term: string) {\n      this.isLoading = true;\n\n      SitesStore.searchSite(term, this.onlySitesWithAdminAccess,\n        (this.sitesToExclude ? this.sitesToExclude : []) as number[]).then((sites) => {\n        if (term !== this.searchTerm) {\n          return; // search term changed in the meantime\n        }\n\n        if (sites) {\n          this.sites = sites;\n        }\n      }).finally(() => {\n        this.isLoading = false;\n      });\n    },\n    getUrlForSiteId(idSite: string|number) {\n      const newQuery = MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        segment: '',\n        idSite,\n      });\n\n      const newHash = MatomoUrl.stringify({\n        ...MatomoUrl.hashParsed.value,\n        segment: '',\n        idSite,\n      });\n\n      return `?${newQuery}#?${newHash}`;\n    },\n  },\n});\n</script>\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    @click=\"this.onClick($event)\"\n    class=\"custom_select_all\"\n  >\n    <a\n      @click=\"$event.preventDefault()\"\n      v-html=\"$sanitize(allSitesText)\"\n      tabindex=\"4\"\n      :href=\"href\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    href: String,\n    allSitesText: String,\n  },\n  emits: ['click'],\n  methods: {\n    onClick(event: MouseEvent) {\n      this.$emit('click', event);\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    href: String,\n    allSitesText: String,\n  },\n  emits: ['click'],\n  methods: {\n    onClick(event: MouseEvent) {\n      this.$emit('click', event);\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AllSitesLink.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AllSitesLink.vue?vue&type=script&lang=ts\"","import { render } from \"./AllSitesLink.vue?vue&type=template&id=45607d28\"\nimport script from \"./AllSitesLink.vue?vue&type=script&lang=ts\"\nexport * from \"./AllSitesLink.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { DeepReadonly, defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\nimport AllSitesLink from './AllSitesLink.vue';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\nimport SitesStore from './SitesStore';\nimport debounce from '../debounce';\nimport SiteRef from './SiteRef';\nimport Site from './Site';\n\ninterface SiteSelectorState {\n  searchTerm: string;\n  showSitesList: boolean;\n  activeSiteId: string;\n  isLoading: boolean;\n  sites: DeepReadonly<Site[]>;\n  autocompleteMinSites: number;\n}\n\nexport default defineComponent({\n  props: {\n    modelValue: Object,\n    showSelectedSite: {\n      type: Boolean,\n      default: false,\n    },\n    showAllSitesItem: {\n      type: Boolean,\n      default: true,\n    },\n    switchSiteOnSelect: {\n      type: Boolean,\n      default: true,\n    },\n    onlySitesWithAdminAccess: {\n      type: Boolean,\n      default: false,\n    },\n    name: {\n      type: String,\n      default: '',\n    },\n    allSitesText: {\n      type: String,\n      default: translate('General_MultiSitesSummary'),\n    },\n    allSitesLocation: {\n      type: String,\n      default: 'bottom',\n    },\n    placeholder: String,\n    defaultToFirstSite: Boolean,\n    sitesToExclude: {\n      type: Array,\n      default: () => [] as number[],\n    },\n  },\n  emits: ['update:modelValue', 'blur'],\n  components: {\n    AllSitesLink,\n  },\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  watch: {\n    searchTerm() {\n      this.onSearchTermChanged();\n    },\n  },\n  data(): SiteSelectorState {\n    return {\n      searchTerm: '',\n      activeSiteId: `${Matomo.idSite}`,\n      showSitesList: false,\n      isLoading: false,\n      sites: [],\n      autocompleteMinSites: parseInt(Matomo.config.autocomplete_min_sites as string, 10),\n    };\n  },\n  created() {\n    this.searchSite = debounce(this.searchSite);\n\n    if (!this.modelValue && Matomo.idSite) {\n      this.$emit('update:modelValue', {\n        id: Matomo.idSite,\n        name: Matomo.helper.htmlDecode(Matomo.siteName),\n      });\n    }\n  },\n  mounted() {\n    window.initTopControls();\n\n    this.loadInitialSites().then(() => {\n      if (this.shouldDefaultToFirstSite) {\n        this.$emit('update:modelValue', { id: this.sites[0].idsite, name: this.sites[0].name });\n      }\n    });\n\n    const shortcutTitle = translate('CoreHome_ShortcutWebsiteSelector');\n    Matomo.helper.registerShortcut('w', shortcutTitle, (event: KeyboardEvent) => {\n      if (event.altKey) {\n        return;\n      }\n      if (event.preventDefault) {\n        event.preventDefault();\n      } else {\n        event.returnValue = false; // IE\n      }\n\n      const selectorLink = this.$refs.selectorLink as HTMLElement;\n      if (selectorLink) {\n        selectorLink.click();\n        selectorLink.focus();\n      }\n    });\n  },\n  computed: {\n    shouldFocusOnSearch() {\n      return (this.showSitesList && this.autocompleteMinSites <= this.sites.length)\n        || this.searchTerm;\n    },\n    selectorLinkTitle() {\n      return this.hasMultipleSites\n        ? translate('CoreHome_ChangeCurrentWebsite', this.modelValue?.name || this.firstSiteName)\n        : '';\n    },\n    hasMultipleSites() {\n      const initialSites = SitesStore.initialSitesFiltered.value\n        && SitesStore.initialSitesFiltered.value.length\n        ? SitesStore.initialSitesFiltered.value : SitesStore.initialSites.value;\n      return initialSites && initialSites.length > 1;\n    },\n    firstSiteName() {\n      const initialSites = SitesStore.initialSitesFiltered.value\n        && SitesStore.initialSitesFiltered.value.length\n        ? SitesStore.initialSitesFiltered.value : SitesStore.initialSites.value;\n      return initialSites && initialSites.length > 0 ? initialSites[0].name : '';\n    },\n    urlAllSites() {\n      const newQuery = MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        module: 'MultiSites',\n        action: 'index',\n        date: MatomoUrl.parsed.value.date,\n        period: MatomoUrl.parsed.value.period,\n      });\n      return `?${newQuery}`;\n    },\n    shouldDefaultToFirstSite() {\n      return !this.modelValue?.id\n        && (!this.hasMultipleSites || this.defaultToFirstSite)\n        && this.sites[0];\n    },\n    // using an extra computed property in case SiteSelector is used directly\n    // in a vue-entry, and there is no parent component with state to respond\n    // to update:modelValue events\n    displayedModelValue() {\n      if (this.modelValue) {\n        return this.modelValue;\n      }\n\n      if (Matomo.idSite) {\n        return {\n          id: Matomo.idSite,\n          name: Matomo.helper.htmlDecode(Matomo.siteName),\n        };\n      }\n\n      if (this.shouldDefaultToFirstSite) {\n        return { id: this.sites[0].idsite, name: this.sites[0].name };\n      }\n\n      return null;\n    },\n  },\n  methods: {\n    onSearchTermChanged() {\n      if (!this.searchTerm) {\n        this.isLoading = false;\n        this.loadInitialSites();\n      } else {\n        this.isLoading = true;\n        this.searchSite(this.searchTerm);\n      }\n    },\n    onAllSitesClick(event: MouseEvent) {\n      this.switchSite({ id: 'all', name: this.$props.allSitesText }, event);\n      this.showSitesList = false;\n    },\n    switchSite(site: SiteRef, event: KeyboardEvent|MouseEvent) {\n      // for Mac OS cmd key needs to be pressed, ctrl key on other systems\n      const controlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? event.metaKey : event.ctrlKey;\n\n      if (event && controlKey && event.target && (event.target as HTMLLinkElement).href) {\n        window.open((event.target as HTMLLinkElement).href, '_blank');\n        return;\n      }\n\n      this.$emit('update:modelValue', { id: site.id, name: site.name });\n\n      if (!this.switchSiteOnSelect || this.activeSiteId === site.id) {\n        return;\n      }\n\n      SitesStore.loadSite(site.id);\n    },\n    onBlur() {\n      this.showSitesList = false;\n      this.$emit('blur');\n    },\n    onClickSelector() {\n      if (this.hasMultipleSites) {\n        this.showSitesList = !this.showSitesList;\n\n        if (!this.isLoading && !this.searchTerm) {\n          this.loadInitialSites();\n        }\n      }\n    },\n    onPressEnter(event: KeyboardEvent) {\n      if (event.key !== 'Enter') {\n        return;\n      }\n\n      event.preventDefault();\n\n      this.showSitesList = !this.showSitesList;\n      if (this.showSitesList && !this.isLoading) {\n        this.loadInitialSites();\n      }\n    },\n    getMatchedSiteName(siteName: string) {\n      const index = siteName.toUpperCase().indexOf(this.searchTerm.toUpperCase());\n      if (index === -1\n        || this.isLoading // only highlight when we know the displayed results are for a search\n      ) {\n        return Matomo.helper.htmlEntities(siteName);\n      }\n\n      const previousPart = Matomo.helper.htmlEntities(siteName.substring(0, index));\n      const lastPart = Matomo.helper.htmlEntities(\n        siteName.substring(index + this.searchTerm.length),\n      );\n\n      return `${previousPart}<span class=\"autocompleteMatched\">${this.searchTerm}</span>${lastPart}`;\n    },\n    loadInitialSites() {\n      return SitesStore.loadInitialSites(this.onlySitesWithAdminAccess,\n        (this.sitesToExclude ? this.sitesToExclude : []) as number[]).then((sites) => {\n        this.sites = sites || [];\n      });\n    },\n    searchSite(term: string) {\n      this.isLoading = true;\n\n      SitesStore.searchSite(term, this.onlySitesWithAdminAccess,\n        (this.sitesToExclude ? this.sitesToExclude : []) as number[]).then((sites) => {\n        if (term !== this.searchTerm) {\n          return; // search term changed in the meantime\n        }\n\n        if (sites) {\n          this.sites = sites;\n        }\n      }).finally(() => {\n        this.isLoading = false;\n      });\n    },\n    getUrlForSiteId(idSite: string|number) {\n      const newQuery = MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        segment: '',\n        idSite,\n      });\n\n      const newHash = MatomoUrl.stringify({\n        ...MatomoUrl.hashParsed.value,\n        segment: '',\n        idSite,\n      });\n\n      return `?${newQuery}#?${newHash}`;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SiteSelector.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SiteSelector.vue?vue&type=script&lang=ts\"","import { render } from \"./SiteSelector.vue?vue&type=template&id=1dc4e0ef\"\nimport script from \"./SiteSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./SiteSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    ref=\"root\"\n    class=\"quickAccessInside\"\n    v-focus-anywhere-but-here=\"{ blur: onBlur }\"\n  >\n    <span\n      class=\"icon-search\"\n      @mouseenter=\"searchActive = true\"\n    />\n    <input\n      class=\"s\"\n      @keydown=\"onKeypress($event)\"\n      @focus=\"searchActive = true\"\n      v-model=\"searchTerm\"\n      type=\"text\"\n      tabindex=\"2\"\n      v-focus-if=\"{ focused: searchActive }\"\n      :title=\"quickAccessTitle\"\n      :placeholder=\"translate('General_Search')\"\n      ref=\"input\"\n    />\n    <div\n      class=\"dropdown\"\n      v-show=\"searchTerm && searchActive\"\n    >\n      <ul v-show=\"!(numMenuItems > 0 || sites.length)\">\n        <li class=\"no-result\">{{ translate('General_SearchNoResults') }}</li>\n      </ul>\n      <ul v-for=\"subcategory in menuItems\" :key=\"subcategory.title\">\n        <li\n          class=\"quick-access-category\"\n          @click=\"searchTerm = subcategory.title;searchMenu(searchTerm)\"\n        >\n          {{ subcategory.title }}\n        </li>\n        <li\n          class=\"result\"\n          :class=\"{ selected: submenuEntry.menuIndex === searchIndex }\"\n          @mouseenter=\"searchIndex = submenuEntry.menuIndex\"\n          @click=\"selectMenuItem(submenuEntry.index)\"\n          v-for=\"submenuEntry in subcategory.items\"\n          :key=\"submenuEntry.index\"\n        >\n          <a>{{ submenuEntry.name.trim() }}</a>\n        </li>\n      </ul>\n      <ul class=\"quickAccessMatomoSearch\">\n        <li\n          class=\"quick-access-category websiteCategory\"\n          v-show=\"hasSitesSelector && sites.length || isLoading\"\n        >\n          {{ translate('SitesManager_Sites') }}\n        </li>\n        <li\n          class=\"no-result\"\n          v-show=\"hasSitesSelector && isLoading\"\n        >\n          {{ translate('MultiSites_LoadingWebsites') }}\n        </li>\n        <li\n          class=\"result\"\n          v-for=\"(site, index) in sites\"\n          v-show=\"hasSitesSelector && !isLoading\"\n          @mouseenter=\"searchIndex = numMenuItems + index\"\n          :class=\"{ selected: numMenuItems + index === searchIndex }\"\n          @click=\"selectSite(site.idsite)\"\n          :key=\"site.idsite\"\n        >\n          <a v-text=\"site.name\" />\n        </li>\n      </ul>\n      <ul>\n        <li class=\"quick-access-category helpCategory\">{{ translate('General_HelpResources') }}</li>\n        <li\n          :class=\"{ selected: searchIndex === 'help' }\"\n          class=\"quick-access-help\"\n          @mouseenter=\"searchIndex = 'help'\"\n        >\n          <a\n            :href=\"`https://matomo.org?mtm_campaign=App_Help&mtm_source=Matomo_App&mtm_keyword=QuickSearch&s=${encodeURIComponent(searchTerm)}`\"\n            target=\"_blank\"\n          >\n            {{ translate('CoreHome_SearchOnMatomo', searchTerm) }}\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { DeepReadonly, defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\nimport { translate } from '../translate';\nimport SitesStore from '../SiteSelector/SitesStore';\nimport Site from '../SiteSelector/Site';\nimport Matomo from '../Matomo/Matomo';\nimport debounce from '../debounce';\n\nconst { ListingFormatter } = window;\n\ninterface SubMenuItem {\n  name: string;\n  index: number;\n  category: string;\n  menuIndex?: number;\n}\n\ninterface MenuItem {\n  title: string;\n  items: SubMenuItem[];\n}\n\ninterface QuickAccessState {\n  menuItems: Array<unknown>;\n  numMenuItems: number;\n  searchActive: boolean;\n  searchTerm: string;\n  searchIndex: number;\n\n  menuIndexCounter: number;\n  topMenuItems: SubMenuItem[]|null;\n  leftMenuItems: SubMenuItem[]|null;\n  segmentItems: SubMenuItem[]|null;\n  hasSegmentSelector: boolean;\n\n  sites: DeepReadonly<Site[]>;\n  isLoading: boolean;\n}\n\nfunction isElementInViewport(element: HTMLElement) {\n  const rect = element.getBoundingClientRect();\n  const $window = window.$(window);\n\n  return rect.top >= 0\n    && rect.left >= 0\n    && rect.bottom <= $window.height()!\n    && rect.right <= $window.width()!;\n}\n\nfunction scrollFirstElementIntoView(element: HTMLElement) {\n  if (element && element.scrollIntoView) {\n    // make sure search is visible\n    element.scrollIntoView();\n  }\n}\n\nexport default defineComponent({\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  watch: {\n    searchActive(newValue: boolean) {\n      const root = this.$refs.root as HTMLElement;\n      if (!root || !root.parentElement) {\n        return;\n      }\n\n      const classes = root.parentElement.classList;\n      classes.toggle('active', newValue);\n      classes.toggle('expanded', newValue);\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n\n    // this is currently needed since vue-entry code will render a div, then vue will render a div\n    // within it, but the top controls and CSS expect to have certain CSS classes in the root\n    // element.\n    // same applies to above watch for searchActive()\n    if (root && root.parentElement) {\n      root.parentElement.classList.add('quick-access', 'piwikSelector');\n    }\n\n    if (typeof window.initTopControls !== 'undefined' && window.initTopControls) {\n      window.initTopControls();\n    }\n\n    Matomo.helper.registerShortcut('f', translate('CoreHome_ShortcutSearch'), (event) => {\n      if (event.altKey) {\n        return;\n      }\n\n      event.preventDefault();\n\n      scrollFirstElementIntoView(this.$refs.root as HTMLElement);\n\n      this.activateSearch();\n    });\n  },\n  data(): QuickAccessState {\n    const hasSegmentSelector = !!document.querySelector('.segmentEditorPanel');\n\n    return {\n      menuItems: [],\n      numMenuItems: 0,\n      searchActive: false,\n      searchTerm: '',\n      searchIndex: 0,\n      menuIndexCounter: -1,\n      topMenuItems: null,\n      leftMenuItems: null,\n      segmentItems: null,\n      hasSegmentSelector,\n      sites: [],\n      isLoading: false,\n    };\n  },\n  created() {\n    this.searchMenu = debounce(this.searchMenu.bind(this));\n  },\n  computed: {\n    hasSitesSelector() {\n      return !!document.querySelector(\n        '.top_controls .siteSelector,.top_controls [vue-entry=\"CoreHome.SiteSelector\"]',\n      );\n    },\n    quickAccessTitle() {\n      const searchAreas = [translate('CoreHome_MenuEntries')];\n\n      if (this.hasSegmentSelector) {\n        searchAreas.push(translate('CoreHome_Segments'));\n      }\n\n      if (this.hasSitesSelector) {\n        searchAreas.push(translate('SitesManager_Sites'));\n      }\n\n      return translate('CoreHome_QuickAccessTitle', ListingFormatter.formatAnd(searchAreas));\n    },\n  },\n  emits: ['itemSelected', 'blur'],\n  methods: {\n    onKeypress(event: KeyboardEvent) {\n      const areSearchResultsDisplayed = this.searchTerm && this.searchActive;\n      const isTabKey = event.which === 9;\n      const isEscKey = event.which === 27;\n\n      if (event.which === 38) {\n        this.highlightPreviousItem();\n        event.preventDefault();\n      } else if (event.which === 40) {\n        this.highlightNextItem();\n        event.preventDefault();\n      } else if (event.which === 13) {\n        this.clickQuickAccessMenuItem();\n      } else if (isTabKey && areSearchResultsDisplayed) {\n        this.deactivateSearch();\n      } else if (isEscKey && areSearchResultsDisplayed) {\n        this.deactivateSearch();\n      } else {\n        setTimeout(() => {\n          this.searchActive = true;\n          this.searchMenu(this.searchTerm);\n        });\n      }\n    },\n    highlightPreviousItem() {\n      if ((this.searchIndex - 1) < 0) {\n        this.searchIndex = 0;\n      } else {\n        this.searchIndex -= 1;\n      }\n      this.makeSureSelectedItemIsInViewport();\n    },\n    highlightNextItem() {\n      const numTotal = (this.$refs.root as HTMLElement).querySelectorAll('li.result').length;\n\n      if (numTotal <= (this.searchIndex + 1)) {\n        this.searchIndex = numTotal - 1;\n      } else {\n        this.searchIndex += 1;\n      }\n\n      this.makeSureSelectedItemIsInViewport();\n    },\n    clickQuickAccessMenuItem() {\n      const selectedMenuElement = this.getCurrentlySelectedElement();\n      if (selectedMenuElement) {\n        setTimeout(() => {\n          selectedMenuElement.click();\n          this.$emit('itemSelected', selectedMenuElement);\n        }, 20);\n      }\n    },\n    deactivateSearch() {\n      this.searchTerm = '';\n      this.searchActive = false;\n      if (this.$refs.input) {\n        (this.$refs.input as HTMLElement).blur();\n      }\n    },\n    makeSureSelectedItemIsInViewport() {\n      const element = this.getCurrentlySelectedElement();\n\n      if (element && !isElementInViewport(element)) {\n        scrollFirstElementIntoView(element);\n      }\n    },\n    getCurrentlySelectedElement(): HTMLElement|undefined {\n      const results = (this.$refs.root as HTMLElement).querySelectorAll('li.result');\n      if (results && results.length && results.item(this.searchIndex)) {\n        return results.item(this.searchIndex) as HTMLElement;\n      }\n      return undefined;\n    },\n    searchMenu(unprocessedSearchTerm: string) {\n      const searchTerm = unprocessedSearchTerm.toLowerCase();\n\n      let index = -1;\n      const menuItemsIndex: Record<string, number> = {};\n      const menuItems: MenuItem[] = [];\n\n      const moveToCategory = (theSubmenuItem: SubMenuItem) => {\n        // force rerender of element to prevent weird side effects\n        const submenuItem = { ...theSubmenuItem };\n        // needed for proper highlighting with arrow keys\n        index += 1;\n        submenuItem.menuIndex = index;\n\n        const { category } = submenuItem;\n        if (!(category in menuItemsIndex)) {\n          menuItems.push({ title: category, items: [] });\n          menuItemsIndex[category] = menuItems.length - 1;\n        }\n\n        const indexOfCategory = menuItemsIndex[category];\n        menuItems[indexOfCategory].items.push(submenuItem);\n      };\n\n      this.resetSearchIndex();\n\n      if (this.hasSitesSelector) {\n        this.isLoading = true;\n        SitesStore.searchSite(searchTerm).then((sites) => {\n          if (sites) {\n            this.sites = sites;\n          }\n        }).finally(() => {\n          this.isLoading = false;\n        });\n      }\n\n      const menuItemMatches = (i: SubMenuItem) => i.name.toLowerCase().indexOf(searchTerm) !== -1\n        || i.category.toLowerCase().indexOf(searchTerm) !== -1;\n\n      // get the menu items on first search since this component can be mounted\n      // before the menus are\n      if (this.topMenuItems === null) {\n        this.topMenuItems = this.getTopMenuItems();\n      }\n      if (this.leftMenuItems === null) {\n        this.leftMenuItems = this.getLeftMenuItems();\n      }\n      if (this.segmentItems === null) {\n        this.segmentItems = this.getSegmentItems();\n      }\n\n      const topMenuItems = this.topMenuItems.filter(menuItemMatches);\n      const leftMenuItems = this.leftMenuItems.filter(menuItemMatches);\n      const segmentItems = this.segmentItems.filter(menuItemMatches);\n\n      topMenuItems.forEach(moveToCategory);\n      leftMenuItems.forEach(moveToCategory);\n      segmentItems.forEach(moveToCategory);\n\n      this.numMenuItems = topMenuItems.length + leftMenuItems.length + segmentItems.length;\n      this.menuItems = menuItems;\n    },\n    resetSearchIndex() {\n      this.searchIndex = 0;\n      this.makeSureSelectedItemIsInViewport();\n    },\n    selectSite(idSite: string|number) {\n      SitesStore.loadSite(idSite);\n    },\n    selectMenuItem(index: number) {\n      const target: HTMLElement|null = document.querySelector(`[quick_access='${index}']`);\n      if (target) {\n        this.deactivateSearch();\n\n        const href = target.getAttribute('href');\n        if (href && href.length > 10 && target && target.click) {\n          try {\n            target.click();\n          } catch (e) {\n            window.$(target).click();\n          }\n        } else {\n          // not sure why jquery is used here and above, but only sometimes. keeping for BC.\n          window.$(target).click();\n        }\n      }\n    },\n    onBlur() {\n      this.searchActive = false;\n      this.$emit('blur');\n    },\n    activateSearch() {\n      this.searchActive = true;\n    },\n    getTopMenuItems() {\n      const category = translate('CoreHome_Menu');\n\n      const topMenuItems: SubMenuItem[] = [];\n      document.querySelectorAll('nav .sidenav li > a, nav .sidenav li > div > a').forEach((element) => {\n        let text = element.textContent?.trim();\n\n        if (!text || (element.parentElement != null && element.parentElement.tagName != null\n          && element.parentElement.tagName === 'DIV')) {\n          text = element.getAttribute('title')?.trim(); // possibly a icon, use title instead\n        }\n\n        if (text) {\n          topMenuItems.push({ name: text, index: this.menuIndexCounter += 1, category });\n          element.setAttribute('quick_access', `${this.menuIndexCounter}`);\n        }\n      });\n\n      return topMenuItems;\n    },\n    getLeftMenuItems() {\n      const leftMenuItems: SubMenuItem[] = [];\n\n      document.querySelectorAll('#secondNavBar .menuTab').forEach((element) => {\n        const categoryElement = window.$(element).find('> .item');\n        let category = categoryElement[0]?.innerText.trim() || '';\n\n        if (category && category.lastIndexOf('\\n') !== -1) {\n          // remove \"\\n\\nMenu\"\n          category = category.slice(0, category.lastIndexOf('\\n')).trim();\n        }\n\n        window.$(element).find('li .item').each((i, subElement) => {\n          const text = subElement.textContent?.trim();\n          if (text) {\n            leftMenuItems.push({ name: text, category, index: this.menuIndexCounter += 1 });\n            subElement.setAttribute('quick_access', `${this.menuIndexCounter}`);\n          }\n        });\n      });\n\n      return leftMenuItems;\n    },\n    getSegmentItems() {\n      if (!this.hasSegmentSelector) {\n        return [];\n      }\n\n      const category = translate('CoreHome_Segments');\n\n      const segmentItems: SubMenuItem[] = [];\n      document.querySelectorAll('.segmentList [data-idsegment]').forEach((element) => {\n        const text = element.querySelector('.segname')?.textContent?.trim();\n\n        if (text) {\n          segmentItems.push({ name: text, category, index: this.menuIndexCounter += 1 });\n          element.setAttribute('quick_access', `${this.menuIndexCounter}`);\n        }\n      });\n\n      return segmentItems;\n    },\n  },\n});\n</script>\n","\nimport { DeepReadonly, defineComponent } from 'vue';\nimport FocusAnywhereButHere from '../FocusAnywhereButHere/FocusAnywhereButHere';\nimport FocusIf from '../FocusIf/FocusIf';\nimport { translate } from '../translate';\nimport SitesStore from '../SiteSelector/SitesStore';\nimport Site from '../SiteSelector/Site';\nimport Matomo from '../Matomo/Matomo';\nimport debounce from '../debounce';\n\nconst { ListingFormatter } = window;\n\ninterface SubMenuItem {\n  name: string;\n  index: number;\n  category: string;\n  menuIndex?: number;\n}\n\ninterface MenuItem {\n  title: string;\n  items: SubMenuItem[];\n}\n\ninterface QuickAccessState {\n  menuItems: Array<unknown>;\n  numMenuItems: number;\n  searchActive: boolean;\n  searchTerm: string;\n  searchIndex: number;\n\n  menuIndexCounter: number;\n  topMenuItems: SubMenuItem[]|null;\n  leftMenuItems: SubMenuItem[]|null;\n  segmentItems: SubMenuItem[]|null;\n  hasSegmentSelector: boolean;\n\n  sites: DeepReadonly<Site[]>;\n  isLoading: boolean;\n}\n\nfunction isElementInViewport(element: HTMLElement) {\n  const rect = element.getBoundingClientRect();\n  const $window = window.$(window);\n\n  return rect.top >= 0\n    && rect.left >= 0\n    && rect.bottom <= $window.height()!\n    && rect.right <= $window.width()!;\n}\n\nfunction scrollFirstElementIntoView(element: HTMLElement) {\n  if (element && element.scrollIntoView) {\n    // make sure search is visible\n    element.scrollIntoView();\n  }\n}\n\nexport default defineComponent({\n  directives: {\n    FocusAnywhereButHere,\n    FocusIf,\n  },\n  watch: {\n    searchActive(newValue: boolean) {\n      const root = this.$refs.root as HTMLElement;\n      if (!root || !root.parentElement) {\n        return;\n      }\n\n      const classes = root.parentElement.classList;\n      classes.toggle('active', newValue);\n      classes.toggle('expanded', newValue);\n    },\n  },\n  mounted() {\n    const root = this.$refs.root as HTMLElement;\n\n    // this is currently needed since vue-entry code will render a div, then vue will render a div\n    // within it, but the top controls and CSS expect to have certain CSS classes in the root\n    // element.\n    // same applies to above watch for searchActive()\n    if (root && root.parentElement) {\n      root.parentElement.classList.add('quick-access', 'piwikSelector');\n    }\n\n    if (typeof window.initTopControls !== 'undefined' && window.initTopControls) {\n      window.initTopControls();\n    }\n\n    Matomo.helper.registerShortcut('f', translate('CoreHome_ShortcutSearch'), (event) => {\n      if (event.altKey) {\n        return;\n      }\n\n      event.preventDefault();\n\n      scrollFirstElementIntoView(this.$refs.root as HTMLElement);\n\n      this.activateSearch();\n    });\n  },\n  data(): QuickAccessState {\n    const hasSegmentSelector = !!document.querySelector('.segmentEditorPanel');\n\n    return {\n      menuItems: [],\n      numMenuItems: 0,\n      searchActive: false,\n      searchTerm: '',\n      searchIndex: 0,\n      menuIndexCounter: -1,\n      topMenuItems: null,\n      leftMenuItems: null,\n      segmentItems: null,\n      hasSegmentSelector,\n      sites: [],\n      isLoading: false,\n    };\n  },\n  created() {\n    this.searchMenu = debounce(this.searchMenu.bind(this));\n  },\n  computed: {\n    hasSitesSelector() {\n      return !!document.querySelector(\n        '.top_controls .siteSelector,.top_controls [vue-entry=\"CoreHome.SiteSelector\"]',\n      );\n    },\n    quickAccessTitle() {\n      const searchAreas = [translate('CoreHome_MenuEntries')];\n\n      if (this.hasSegmentSelector) {\n        searchAreas.push(translate('CoreHome_Segments'));\n      }\n\n      if (this.hasSitesSelector) {\n        searchAreas.push(translate('SitesManager_Sites'));\n      }\n\n      return translate('CoreHome_QuickAccessTitle', ListingFormatter.formatAnd(searchAreas));\n    },\n  },\n  emits: ['itemSelected', 'blur'],\n  methods: {\n    onKeypress(event: KeyboardEvent) {\n      const areSearchResultsDisplayed = this.searchTerm && this.searchActive;\n      const isTabKey = event.which === 9;\n      const isEscKey = event.which === 27;\n\n      if (event.which === 38) {\n        this.highlightPreviousItem();\n        event.preventDefault();\n      } else if (event.which === 40) {\n        this.highlightNextItem();\n        event.preventDefault();\n      } else if (event.which === 13) {\n        this.clickQuickAccessMenuItem();\n      } else if (isTabKey && areSearchResultsDisplayed) {\n        this.deactivateSearch();\n      } else if (isEscKey && areSearchResultsDisplayed) {\n        this.deactivateSearch();\n      } else {\n        setTimeout(() => {\n          this.searchActive = true;\n          this.searchMenu(this.searchTerm);\n        });\n      }\n    },\n    highlightPreviousItem() {\n      if ((this.searchIndex - 1) < 0) {\n        this.searchIndex = 0;\n      } else {\n        this.searchIndex -= 1;\n      }\n      this.makeSureSelectedItemIsInViewport();\n    },\n    highlightNextItem() {\n      const numTotal = (this.$refs.root as HTMLElement).querySelectorAll('li.result').length;\n\n      if (numTotal <= (this.searchIndex + 1)) {\n        this.searchIndex = numTotal - 1;\n      } else {\n        this.searchIndex += 1;\n      }\n\n      this.makeSureSelectedItemIsInViewport();\n    },\n    clickQuickAccessMenuItem() {\n      const selectedMenuElement = this.getCurrentlySelectedElement();\n      if (selectedMenuElement) {\n        setTimeout(() => {\n          selectedMenuElement.click();\n          this.$emit('itemSelected', selectedMenuElement);\n        }, 20);\n      }\n    },\n    deactivateSearch() {\n      this.searchTerm = '';\n      this.searchActive = false;\n      if (this.$refs.input) {\n        (this.$refs.input as HTMLElement).blur();\n      }\n    },\n    makeSureSelectedItemIsInViewport() {\n      const element = this.getCurrentlySelectedElement();\n\n      if (element && !isElementInViewport(element)) {\n        scrollFirstElementIntoView(element);\n      }\n    },\n    getCurrentlySelectedElement(): HTMLElement|undefined {\n      const results = (this.$refs.root as HTMLElement).querySelectorAll('li.result');\n      if (results && results.length && results.item(this.searchIndex)) {\n        return results.item(this.searchIndex) as HTMLElement;\n      }\n      return undefined;\n    },\n    searchMenu(unprocessedSearchTerm: string) {\n      const searchTerm = unprocessedSearchTerm.toLowerCase();\n\n      let index = -1;\n      const menuItemsIndex: Record<string, number> = {};\n      const menuItems: MenuItem[] = [];\n\n      const moveToCategory = (theSubmenuItem: SubMenuItem) => {\n        // force rerender of element to prevent weird side effects\n        const submenuItem = { ...theSubmenuItem };\n        // needed for proper highlighting with arrow keys\n        index += 1;\n        submenuItem.menuIndex = index;\n\n        const { category } = submenuItem;\n        if (!(category in menuItemsIndex)) {\n          menuItems.push({ title: category, items: [] });\n          menuItemsIndex[category] = menuItems.length - 1;\n        }\n\n        const indexOfCategory = menuItemsIndex[category];\n        menuItems[indexOfCategory].items.push(submenuItem);\n      };\n\n      this.resetSearchIndex();\n\n      if (this.hasSitesSelector) {\n        this.isLoading = true;\n        SitesStore.searchSite(searchTerm).then((sites) => {\n          if (sites) {\n            this.sites = sites;\n          }\n        }).finally(() => {\n          this.isLoading = false;\n        });\n      }\n\n      const menuItemMatches = (i: SubMenuItem) => i.name.toLowerCase().indexOf(searchTerm) !== -1\n        || i.category.toLowerCase().indexOf(searchTerm) !== -1;\n\n      // get the menu items on first search since this component can be mounted\n      // before the menus are\n      if (this.topMenuItems === null) {\n        this.topMenuItems = this.getTopMenuItems();\n      }\n      if (this.leftMenuItems === null) {\n        this.leftMenuItems = this.getLeftMenuItems();\n      }\n      if (this.segmentItems === null) {\n        this.segmentItems = this.getSegmentItems();\n      }\n\n      const topMenuItems = this.topMenuItems.filter(menuItemMatches);\n      const leftMenuItems = this.leftMenuItems.filter(menuItemMatches);\n      const segmentItems = this.segmentItems.filter(menuItemMatches);\n\n      topMenuItems.forEach(moveToCategory);\n      leftMenuItems.forEach(moveToCategory);\n      segmentItems.forEach(moveToCategory);\n\n      this.numMenuItems = topMenuItems.length + leftMenuItems.length + segmentItems.length;\n      this.menuItems = menuItems;\n    },\n    resetSearchIndex() {\n      this.searchIndex = 0;\n      this.makeSureSelectedItemIsInViewport();\n    },\n    selectSite(idSite: string|number) {\n      SitesStore.loadSite(idSite);\n    },\n    selectMenuItem(index: number) {\n      const target: HTMLElement|null = document.querySelector(`[quick_access='${index}']`);\n      if (target) {\n        this.deactivateSearch();\n\n        const href = target.getAttribute('href');\n        if (href && href.length > 10 && target && target.click) {\n          try {\n            target.click();\n          } catch (e) {\n            window.$(target).click();\n          }\n        } else {\n          // not sure why jquery is used here and above, but only sometimes. keeping for BC.\n          window.$(target).click();\n        }\n      }\n    },\n    onBlur() {\n      this.searchActive = false;\n      this.$emit('blur');\n    },\n    activateSearch() {\n      this.searchActive = true;\n    },\n    getTopMenuItems() {\n      const category = translate('CoreHome_Menu');\n\n      const topMenuItems: SubMenuItem[] = [];\n      document.querySelectorAll('nav .sidenav li > a, nav .sidenav li > div > a').forEach((element) => {\n        let text = element.textContent?.trim();\n\n        if (!text || (element.parentElement != null && element.parentElement.tagName != null\n          && element.parentElement.tagName === 'DIV')) {\n          text = element.getAttribute('title')?.trim(); // possibly a icon, use title instead\n        }\n\n        if (text) {\n          topMenuItems.push({ name: text, index: this.menuIndexCounter += 1, category });\n          element.setAttribute('quick_access', `${this.menuIndexCounter}`);\n        }\n      });\n\n      return topMenuItems;\n    },\n    getLeftMenuItems() {\n      const leftMenuItems: SubMenuItem[] = [];\n\n      document.querySelectorAll('#secondNavBar .menuTab').forEach((element) => {\n        const categoryElement = window.$(element).find('> .item');\n        let category = categoryElement[0]?.innerText.trim() || '';\n\n        if (category && category.lastIndexOf('\\n') !== -1) {\n          // remove \"\\n\\nMenu\"\n          category = category.slice(0, category.lastIndexOf('\\n')).trim();\n        }\n\n        window.$(element).find('li .item').each((i, subElement) => {\n          const text = subElement.textContent?.trim();\n          if (text) {\n            leftMenuItems.push({ name: text, category, index: this.menuIndexCounter += 1 });\n            subElement.setAttribute('quick_access', `${this.menuIndexCounter}`);\n          }\n        });\n      });\n\n      return leftMenuItems;\n    },\n    getSegmentItems() {\n      if (!this.hasSegmentSelector) {\n        return [];\n      }\n\n      const category = translate('CoreHome_Segments');\n\n      const segmentItems: SubMenuItem[] = [];\n      document.querySelectorAll('.segmentList [data-idsegment]').forEach((element) => {\n        const text = element.querySelector('.segname')?.textContent?.trim();\n\n        if (text) {\n          segmentItems.push({ name: text, category, index: this.menuIndexCounter += 1 });\n          element.setAttribute('quick_access', `${this.menuIndexCounter}`);\n        }\n      });\n\n      return segmentItems;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./QuickAccess.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./QuickAccess.vue?vue&type=script&lang=ts\"","import { render } from \"./QuickAccess.vue?vue&type=template&id=bd42bc70\"\nimport script from \"./QuickAccess.vue?vue&type=script&lang=ts\"\nexport * from \"./QuickAccess.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"fieldArray form-group\">\n    <div\n      class=\"fieldArrayTable multiple valign-wrapper\"\n      v-for=\"(item, index) in modelValue\"\n      :class=\"{[`fieldArrayTable${index}`]: true}\"\n      :key=\"index\"\n    >\n      <div\n        v-if=\"field.uiControl\"\n        class=\"fieldUiControl\"\n      >\n        <Field\n          :full-width=\"true\"\n          :model-value=\"item\"\n          :options=\"field.availableValues\"\n          @update:modelValue=\"onEntryChange($event, index)\"\n          :model-modifiers=\"field.modelModifiers\"\n          :placeholder=\"' '\"\n          :uicontrol=\"field.uiControl\"\n          :title=\"field.title\"\n          :name=\"`${name}-${index}`\"\n          :template-file=\"field.templateFile\"\n          :component=\"field.component\"\n        >\n        </Field>\n      </div>\n      <span\n        @click=\"removeEntry(index)\"\n        class=\"icon-minus valign\"\n        v-show=\"index + 1 !== modelValue.length\"\n        :title=\"translate('General_Remove')\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\n// async since this is a a recursive component\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  props: {\n    modelValue: Array,\n    name: String,\n    field: Object,\n    rows: String,\n  },\n  components: {\n    Field,\n  },\n  emits: ['update:modelValue'],\n  watch: {\n    modelValue(newValue) {\n      this.checkEmptyModelValue(newValue);\n    },\n  },\n  mounted() {\n    this.checkEmptyModelValue(this.modelValue);\n  },\n  methods: {\n    checkEmptyModelValue(newValue?: unknown[]) {\n      // make sure there is always an empty new value\n      if ((!newValue || !newValue.length || newValue.slice(-1)[0] !== '')\n        && (!this.rows || (this.modelValue || []).length < parseInt(this.rows, 10))) {\n        this.$emit('update:modelValue', [...(newValue || []), '']);\n      }\n    },\n    onEntryChange(newValue: unknown, index: number) {\n      const newArrayValue = [...(this.modelValue || [])];\n      newArrayValue[index] = newValue;\n\n      this.$emit('update:modelValue', newArrayValue);\n    },\n    removeEntry(index: number) {\n      if (index > -1 && this.modelValue) {\n        const newValue = this.modelValue.filter((x, i) => i !== index);\n        this.$emit('update:modelValue', newValue);\n      }\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\n// async since this is a a recursive component\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  props: {\n    modelValue: Array,\n    name: String,\n    field: Object,\n    rows: String,\n  },\n  components: {\n    Field,\n  },\n  emits: ['update:modelValue'],\n  watch: {\n    modelValue(newValue) {\n      this.checkEmptyModelValue(newValue);\n    },\n  },\n  mounted() {\n    this.checkEmptyModelValue(this.modelValue);\n  },\n  methods: {\n    checkEmptyModelValue(newValue?: unknown[]) {\n      // make sure there is always an empty new value\n      if ((!newValue || !newValue.length || newValue.slice(-1)[0] !== '')\n        && (!this.rows || (this.modelValue || []).length < parseInt(this.rows, 10))) {\n        this.$emit('update:modelValue', [...(newValue || []), '']);\n      }\n    },\n    onEntryChange(newValue: unknown, index: number) {\n      const newArrayValue = [...(this.modelValue || [])];\n      newArrayValue[index] = newValue;\n\n      this.$emit('update:modelValue', newArrayValue);\n    },\n    removeEntry(index: number) {\n      if (index > -1 && this.modelValue) {\n        const newValue = this.modelValue.filter((x, i) => i !== index);\n        this.$emit('update:modelValue', newValue);\n      }\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FieldArray.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FieldArray.vue?vue&type=script&lang=ts\"","import { render } from \"./FieldArray.vue?vue&type=template&id=7ec28fd8\"\nimport script from \"./FieldArray.vue?vue&type=script&lang=ts\"\nexport * from \"./FieldArray.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"multiPairField form-group\">\n    <div\n      v-for=\"(item, index) in modelValue\"\n      class=\"multiPairFieldTable multiple valign-wrapper\"\n      :class=\"{ [`multiPairFieldTable${index}`]: true, [`has${fieldCount}Fields`]: true }\"\n      :key=\"index\"\n    >\n      <div\n        class=\"fieldUiControl fieldUiControl1\"\n        v-if=\"field1\"\n        :class=\"{ hasMultiFields: field1.type && field2.type }\"\n      >\n        <Field\n          :full-width=\"true\"\n          :model-value=\"item[field1.key]\"\n          :options=\"field1.availableValues\"\n          @update:modelValue=\"onEntryChange(index, field1.key, $event)\"\n          :model-modifiers=\"field1.modelModifiers\"\n          :placeholder=\"' '\"\n          :uicontrol=\"field1.uiControl\"\n          :name=\"`${name}-p1-${index}`\"\n          :title=\"field1.title\"\n          :template-file=\"field1.templateFile\"\n          :component=\"field1.component\"\n        >\n        </Field>\n      </div>\n      <div\n        class=\"fieldUiControl fieldUiControl2\"\n        v-if=\"field2\"\n      >\n        <Field\n          :full-width=\"true\"\n          :options=\"field2.availableValues\"\n          @update:modelValue=\"onEntryChange(index, field2.key, $event)\"\n          :model-value=\"item[field2.key]\"\n          :model-modifiers=\"field2.modelModifiers\"\n          :placeholder=\"' '\"\n          :uicontrol=\"field2.uiControl\"\n          :name=\"`${name}-p2-${index}`\"\n          :title=\"field2.title\"\n          :template-file=\"field2.templateFile\"\n          :component=\"field2.component\"\n        >\n        </Field>\n      </div>\n      <div\n        class=\"fieldUiControl fieldUiControl3\"\n        v-if=\"field3\"\n      >\n        <Field\n          :full-width=\"true\"\n          :options=\"field3.availableValues\"\n          @update:modelValue=\"onEntryChange(index, field3.key, $event)\"\n          :model-value=\"item[field3.key]\"\n          :model-modifiers=\"field3.modelModifiers\"\n          :placeholder=\"' '\"\n          :uicontrol=\"field3.uiControl\"\n          :title=\"field3.title\"\n          :template-file=\"field3.templateFile\"\n          :component=\"field3.component\"\n        >\n        </Field>\n      </div>\n      <div\n        class=\"fieldUiControl fieldUiControl4\"\n        v-if=\"field4\"\n      >\n        <Field\n          :full-width=\"true\"\n          :options=\"field4.availableValues\"\n          @update:modelValue=\"onEntryChange(index, field4.key, $event)\"\n          :model-value=\"item[field4.key]\"\n          :model-modifiers=\"field4.modelModifiers\"\n          :placeholder=\"' '\"\n          :uicontrol=\"field4.uiControl\"\n          :title=\"field4.title\"\n          :template-file=\"field4.templateFile\"\n          :component=\"field4.component\"\n        >\n        </Field>\n      </div>\n      <span\n        @click=\"removeEntry(index)\"\n        class=\"icon-minus valign\"\n        v-show=\"index + 1 !== modelValue.length\"\n        :title=\"translate('General_Remove')\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\n// async since this is a recursive component\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  props: {\n    modelValue: Array,\n    name: String,\n    field1: Object,\n    field2: Object,\n    field3: Object,\n    field4: Object,\n    rows: Number,\n  },\n  components: {\n    Field,\n  },\n  computed: {\n    fieldCount() {\n      if (this.field1 && this.field2 && this.field3 && this.field4) {\n        return 4;\n      }\n\n      if (this.field1 && this.field2 && this.field3) {\n        return 3;\n      }\n\n      if (this.field1 && this.field2) {\n        return 2;\n      }\n\n      if (this.field1) {\n        return 1;\n      }\n\n      return 0;\n    },\n  },\n  emits: ['update:modelValue'],\n  watch: {\n    modelValue(newValue?: Record<string, unknown>[]) {\n      this.checkEmptyModelValue(newValue);\n    },\n  },\n  mounted() {\n    this.checkEmptyModelValue(this.modelValue as Record<string, unknown>[]);\n  },\n  methods: {\n    checkEmptyModelValue(newValue?: Record<string, unknown>[]) {\n      // make sure there is always an empty new value\n      if ((!newValue\n        || !newValue.length\n        || this.isEmptyValue(newValue.slice(-1)[0]))\n        && (!this.rows\n          || (this.modelValue as Record<string, unknown>[]).length < this.rows)\n      ) {\n        this.$emit('update:modelValue', [...(newValue || []), this.makeEmptyValue()]);\n      }\n    },\n    onEntryChange(index: number, key: string, newValue: Record<string, unknown>) {\n      const newWholeValue = [...(this.modelValue as Record<string, unknown>[])];\n      newWholeValue[index] = { ...newWholeValue[index], [key]: newValue };\n      this.$emit('update:modelValue', newWholeValue);\n    },\n    removeEntry(index: number) {\n      if (index > -1 && this.modelValue) {\n        const newValue = this.modelValue.filter((x, i) => i !== index);\n        this.$emit('update:modelValue', newValue);\n      }\n    },\n    isEmptyValue(value: Record<string, unknown>) {\n      const { fieldCount } = this;\n\n      if (fieldCount === 4) {\n        if (!value[this.field1!.key]\n          && !value[this.field2!.key]\n          && !value[this.field3!.key]\n          && !value[this.field4!.key]\n        ) {\n          return false;\n        }\n      } else if (fieldCount === 3) {\n        if (!value[this.field1!.key] && !value[this.field2!.key] && !value[this.field3!.key]) {\n          return false;\n        }\n      } else if (fieldCount === 2) {\n        if (!value[this.field1!.key] && !value[this.field2!.key]) {\n          return false;\n        }\n      } else if (fieldCount === 1) {\n        if (!value[this.field1!.key]) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    makeEmptyValue(): Record<string, unknown> {\n      const result: Record<string, unknown> = {};\n      if (this.field1 && this.field1.key) {\n        result[this.field1.key] = '';\n      }\n      if (this.field2 && this.field2.key) {\n        result[this.field2.key] = '';\n      }\n      if (this.field3 && this.field3.key) {\n        result[this.field3.key] = '';\n      }\n      if (this.field4 && this.field4.key) {\n        result[this.field4.key] = '';\n      }\n      return result;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\n// async since this is a recursive component\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  props: {\n    modelValue: Array,\n    name: String,\n    field1: Object,\n    field2: Object,\n    field3: Object,\n    field4: Object,\n    rows: Number,\n  },\n  components: {\n    Field,\n  },\n  computed: {\n    fieldCount() {\n      if (this.field1 && this.field2 && this.field3 && this.field4) {\n        return 4;\n      }\n\n      if (this.field1 && this.field2 && this.field3) {\n        return 3;\n      }\n\n      if (this.field1 && this.field2) {\n        return 2;\n      }\n\n      if (this.field1) {\n        return 1;\n      }\n\n      return 0;\n    },\n  },\n  emits: ['update:modelValue'],\n  watch: {\n    modelValue(newValue?: Record<string, unknown>[]) {\n      this.checkEmptyModelValue(newValue);\n    },\n  },\n  mounted() {\n    this.checkEmptyModelValue(this.modelValue as Record<string, unknown>[]);\n  },\n  methods: {\n    checkEmptyModelValue(newValue?: Record<string, unknown>[]) {\n      // make sure there is always an empty new value\n      if ((!newValue\n        || !newValue.length\n        || this.isEmptyValue(newValue.slice(-1)[0]))\n        && (!this.rows\n          || (this.modelValue as Record<string, unknown>[]).length < this.rows)\n      ) {\n        this.$emit('update:modelValue', [...(newValue || []), this.makeEmptyValue()]);\n      }\n    },\n    onEntryChange(index: number, key: string, newValue: Record<string, unknown>) {\n      const newWholeValue = [...(this.modelValue as Record<string, unknown>[])];\n      newWholeValue[index] = { ...newWholeValue[index], [key]: newValue };\n      this.$emit('update:modelValue', newWholeValue);\n    },\n    removeEntry(index: number) {\n      if (index > -1 && this.modelValue) {\n        const newValue = this.modelValue.filter((x, i) => i !== index);\n        this.$emit('update:modelValue', newValue);\n      }\n    },\n    isEmptyValue(value: Record<string, unknown>) {\n      const { fieldCount } = this;\n\n      if (fieldCount === 4) {\n        if (!value[this.field1!.key]\n          && !value[this.field2!.key]\n          && !value[this.field3!.key]\n          && !value[this.field4!.key]\n        ) {\n          return false;\n        }\n      } else if (fieldCount === 3) {\n        if (!value[this.field1!.key] && !value[this.field2!.key] && !value[this.field3!.key]) {\n          return false;\n        }\n      } else if (fieldCount === 2) {\n        if (!value[this.field1!.key] && !value[this.field2!.key]) {\n          return false;\n        }\n      } else if (fieldCount === 1) {\n        if (!value[this.field1!.key]) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    makeEmptyValue(): Record<string, unknown> {\n      const result: Record<string, unknown> = {};\n      if (this.field1 && this.field1.key) {\n        result[this.field1.key] = '';\n      }\n      if (this.field2 && this.field2.key) {\n        result[this.field2.key] = '';\n      }\n      if (this.field3 && this.field3.key) {\n        result[this.field3.key] = '';\n      }\n      if (this.field4 && this.field4.key) {\n        result[this.field4.key] = '';\n      }\n      return result;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MultiPairField.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MultiPairField.vue?vue&type=script&lang=ts\"","import { render } from \"./MultiPairField.vue?vue&type=template&id=1599cf40\"\nimport script from \"./MultiPairField.vue?vue&type=script&lang=ts\"\nexport * from \"./MultiPairField.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    ref=\"root\"\n    class=\"periodSelector piwikSelector\"\n    v-expand-on-click=\"{ expander: 'title' }\"\n  >\n    <a\n      ref=\"title\"\n      id=\"date\"\n      class=\"title\"\n      tabindex=\"-1\"\n      :title=\"translate('General_ChooseDate', currentlyViewingText)\"\n    >\n      <span class=\"icon icon-calendar\" />\n      {{ currentlyViewingText }}\n    </a>\n    <div\n      id=\"periodMore\"\n      class=\"dropdown\"\n    >\n      <div class=\"flex\">\n        <div>\n          <DateRangePicker\n            v-show=\"selectedPeriod === 'range'\"\n            class=\"period-range\"\n            :start-date=\"startRangeDate\"\n            :end-date=\"endRangeDate\"\n            @range-change=\"onRangeChange($event.start, $event.end)\"\n            @submit=\"onApplyClicked()\"\n          >\n          </DateRangePicker>\n          <div\n            class=\"period-date\"\n            v-if=\"selectedPeriod !== 'range'\"\n          >\n            <PeriodDatePicker\n              id=\"datepicker\"\n              :period=\"selectedPeriod\"\n              :date=\"periodValue === selectedPeriod ? dateValue : null\"\n              @select=\"setPiwikPeriodAndDate(selectedPeriod, $event.date)\"\n            >\n            </PeriodDatePicker>\n          </div>\n        </div>\n        <div class=\"period-type\">\n          <h6>{{ translate('General_Period') }}</h6>\n          <div id=\"otherPeriods\">\n            <p\n              v-for=\"period in periodsFiltered\"\n              :key=\"period\"\n            >\n              <label\n                :class=\"{ 'selected-period-label': period === selectedPeriod }\"\n                @dblclick=\"changeViewedPeriod(period)\"\n                :title=\"period === periodValue\n                  ? ''\n                  : translate('General_DoubleClickToChangePeriod')\"\n              >\n                <input\n                  type=\"radio\"\n                  name=\"period\"\n                  :id=\"`period_id_${ period }`\"\n                  v-model=\"selectedPeriod\"\n                  :checked=\"selectedPeriod === period\"\n                  @change=\"selectedPeriod = period\"\n                  @dblclick=\"changeViewedPeriod(period)\"\n                />\n                <span>{{ getPeriodDisplayText(period) }}</span>\n              </label>\n            </p>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"compare-checkbox\"\n        v-if=\"isComparisonEnabled\"\n      >\n        <label>\n          <input\n            id=\"comparePeriodTo\"\n            type=\"checkbox\"\n            v-model=\"isComparing\"\n          />\n          <span>{{ translate('General_CompareTo') }}</span>\n        </label>\n        <div id=\"comparePeriodToDropdown\">\n          <Field\n            v-model=\"comparePeriodType\"\n            :style=\"{'visibility': isComparing ? 'visible' : 'hidden'}\"\n            :name=\"'comparePeriodToDropdown'\"\n            :uicontrol=\"'select'\"\n            :options=\"comparePeriodDropdownOptions\"\n            :full-width=\"true\"\n            :disabled=\"!isComparing\"\n          />\n        </div>\n      </div>\n      <div\n        class=\"compare-date-range\"\n        v-if=\"isComparing && comparePeriodType === 'custom'\"\n      >\n        <div>\n          <div id=\"comparePeriodStartDate\">\n            <div>\n              <Field\n                v-model=\"compareStartDate\"\n                :name=\"'comparePeriodStartDate'\"\n                :uicontrol=\"'text'\"\n                :full-width=\"true\"\n                :title=\"translate('CoreHome_StartDate')\"\n                :placeholder=\"'YYYY-MM-DD'\"\n              />\n            </div>\n          </div>\n          <span class=\"compare-dates-separator\" />\n          <div id=\"comparePeriodEndDate\">\n            <div>\n              <Field\n                v-model=\"compareEndDate\"\n                :name=\"'comparePeriodEndDate'\"\n                :uicontrol=\"'text'\"\n                :full-width=\"true\"\n                :title=\"translate('CoreHome_EndDate')\"\n                :placeholder=\"'YYYY-MM-DD'\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"apply-button-container\">\n        <input\n          type=\"submit\"\n          id=\"calendarApply\"\n          class=\"btn\"\n          @click=\"onApplyClicked()\"\n          :disabled=\"!isApplyEnabled()\"\n          :value=\"translate('General_Apply')\"\n        />\n      </div>\n      <div\n        id=\"ajaxLoadingCalendar\"\n        v-if=\"isLoadingNewPage\"\n      >\n        <ActivityIndicator\n          :loading=\"true\"\n        />\n        <div class=\"loadingSegment\">\n          {{ translate('SegmentEditor_LoadingSegmentedDataMayTakeSomeTime') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch } from 'vue';\nimport ExpandOnClick from '../ExpandOnClick/ExpandOnClick';\nimport DateRangePicker from '../DateRangePicker/DateRangePicker.vue';\nimport PeriodDatePicker from '../PeriodDatePicker/PeriodDatePicker.vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport Matomo from '../Matomo/Matomo';\nimport { translate } from '../translate';\nimport ComparisonsStore from '../Comparisons/Comparisons.store.instance';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport {\n  Periods,\n  parseDate,\n  Range,\n  format,\n} from '../Periods';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\n\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nconst NBSP = Matomo.helper.htmlDecode('&nbsp;');\n\nconst COMPARE_PERIOD_TYPES = ['custom', 'previousPeriod', 'previousYear'];\n\nconst COMPARE_PERIOD_OPTIONS = [\n  { key: 'custom', value: translate('General_Custom') },\n  {\n    key: 'previousPeriod',\n    value: translate('General_PreviousPeriod').replace(/\\s+/, NBSP),\n  },\n  {\n    key: 'previousYear',\n    value: translate('General_PreviousYear').replace(/\\s+/, NBSP),\n  },\n];\n\nconst piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\nconst piwikMaxDate = new Date(Matomo.maxDateYear, Matomo.maxDateMonth - 1, Matomo.maxDateDay);\n\nfunction isValidDate(d: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\n  if (Object.prototype.toString.call(d) !== '[object Date]') {\n    return false;\n  }\n\n  return !Number.isNaN(d.getTime());\n}\n\ninterface PeriodSelectorState {\n  comparePeriodDropdownOptions: typeof COMPARE_PERIOD_OPTIONS;\n  periodValue: string;\n  dateValue: Date|null;\n  selectedPeriod: string;\n  startRangeDate: string|null;\n  endRangeDate: string|null;\n  isRangeValid: boolean|null;\n  isLoadingNewPage: boolean;\n  isComparing: null|boolean;\n  comparePeriodType: string;\n  compareStartDate: string;\n  compareEndDate: string;\n}\n\nexport default defineComponent({\n  props: {\n    periods: Array,\n  },\n  components: {\n    DateRangePicker,\n    PeriodDatePicker,\n    Field,\n    ActivityIndicator,\n  },\n  directives: {\n    ExpandOnClick,\n  },\n  data(): PeriodSelectorState {\n    const selectedPeriod = MatomoUrl.parsed.value.period as string;\n    return {\n      comparePeriodDropdownOptions: COMPARE_PERIOD_OPTIONS,\n      periodValue: selectedPeriod,\n      dateValue: null,\n      selectedPeriod,\n      startRangeDate: null,\n      endRangeDate: null,\n      isRangeValid: null,\n      isLoadingNewPage: false,\n      isComparing: null,\n      comparePeriodType: 'previousPeriod',\n      compareStartDate: '',\n      compareEndDate: '',\n    };\n  },\n  mounted() {\n    Matomo.on('hidePeriodSelector', () => {\n      window.$(this.$refs.root as HTMLElement).parent('#periodString').hide();\n    });\n\n    // some widgets might hide the period selector using the event above, so ensure it's\n    // shown again when switching the page\n    Matomo.on('matomoPageChange', () => {\n      window.$(this.$refs.root as HTMLElement).parent('#periodString').show();\n    });\n\n    this.isComparing = ComparisonsStore.isComparingPeriods();\n    watch(() => ComparisonsStore.isComparingPeriods(), (newVal) => {\n      this.isComparing = newVal;\n    });\n\n    this.updateSelectedValuesFromHash();\n    watch(() => MatomoUrl.parsed.value, this.updateSelectedValuesFromHash);\n\n    this.updateComparisonValuesFromStore();\n    watch(() => ComparisonsStore.getPeriodComparisons(), this.updateComparisonValuesFromStore);\n\n    window.initTopControls(); // must be called when a top control changes width\n\n    this.handleZIndexPositionRelativeCompareDropdownIssue();\n  },\n  computed: {\n    currentlyViewingText() {\n      let date;\n      if (this.periodValue === 'range') {\n        if (!this.startRangeDate || !this.endRangeDate) {\n          return translate('General_Error');\n        }\n\n        date = `${this.startRangeDate},${this.endRangeDate}`;\n      } else {\n        if (!this.dateValue) {\n          return translate('General_Error');\n        }\n\n        date = format(this.dateValue);\n      }\n\n      try {\n        return Periods.parse(this.periodValue!, date).getPrettyString();\n      } catch (e) {\n        return translate('General_Error');\n      }\n    },\n    isComparisonEnabled() {\n      return ComparisonsStore.isComparisonEnabled();\n    },\n    periodsFiltered() {\n      return (this.periods as string[] || []).filter(\n        (periodLabel) => Periods.isRecognizedPeriod(periodLabel),\n      );\n    },\n    selectedComparisonParams() {\n      if (!this.isComparing) {\n        return {};\n      }\n\n      if (this.comparePeriodType === 'custom') {\n        return {\n          comparePeriods: ['range'],\n          comparePeriodType: 'custom',\n          compareDates: [`${this.compareStartDate},${this.compareEndDate}`],\n        };\n      }\n\n      if (this.comparePeriodType === 'previousPeriod') {\n        return {\n          comparePeriods: [this.selectedPeriod],\n          comparePeriodType: 'previousPeriod',\n          compareDates: [this.previousPeriodDateToSelectedPeriod],\n        };\n      }\n\n      if (this.comparePeriodType === 'previousYear') {\n        const dateStr = this.selectedPeriod === 'range'\n          ? `${this.startRangeDate},${this.endRangeDate}`\n          : format(this.dateValue!);\n\n        const currentDateRange = Periods.parse(\n          this.selectedPeriod as string,\n          dateStr,\n        ).getDateRange();\n        currentDateRange[0].setFullYear(currentDateRange[0].getFullYear() - 1);\n        currentDateRange[1].setFullYear(currentDateRange[1].getFullYear() - 1);\n\n        if (this.selectedPeriod === 'range') {\n          return {\n            comparePeriods: ['range'],\n            comparePeriodType: 'previousYear',\n            compareDates: [`${format(currentDateRange[0])},${format(currentDateRange[1])}`],\n          };\n        }\n\n        return {\n          comparePeriods: [this.selectedPeriod],\n          comparePeriodType: 'previousYear',\n          compareDates: [format(currentDateRange[0])],\n        };\n      }\n\n      console.warn(`Unknown compare period type: ${this.comparePeriodType}`);\n      return {};\n    },\n    previousPeriodDateToSelectedPeriod() {\n      if (this.selectedPeriod === 'range') {\n        const currentStartRange = parseDate(this.startRangeDate!);\n        const currentEndRange = parseDate(this.endRangeDate!);\n        const newEndDate = Range.getLastNRange('day', 2, currentStartRange).startDate;\n\n        const rangeSize = Math.floor(\n          (currentEndRange.valueOf() - currentStartRange.valueOf()) / 86400000,\n        );\n        const newRange = Range.getLastNRange('day', 1 + rangeSize, newEndDate);\n\n        return `${format(newRange.startDate)},${format(newRange.endDate)}`;\n      }\n\n      const newStartDate = Range.getLastNRange(this.selectedPeriod, 2, this.dateValue!).startDate;\n      return format(newStartDate);\n    },\n    selectedDateString() {\n      if (this.selectedPeriod === 'range') {\n        const dateFrom = this.startRangeDate!;\n        const dateTo = this.endRangeDate!;\n        const oDateFrom = parseDate(dateFrom);\n        const oDateTo = parseDate(dateTo);\n\n        if (!isValidDate(oDateFrom)\n          || !isValidDate(oDateTo)\n          || oDateFrom > oDateTo\n        ) {\n          // TODO: use a notification instead?\n          window.$('#alert')\n            .find('h2')\n            .text(translate('General_InvalidDateRange'));\n          Matomo.helper.modalConfirm('#alert', {});\n          return null;\n        }\n\n        return `${dateFrom},${dateTo}`;\n      }\n\n      return format(this.dateValue!);\n    },\n  },\n  methods: {\n    handleZIndexPositionRelativeCompareDropdownIssue() {\n      const $element = window.$(this.$refs.root as HTMLElement);\n      $element.on('focus', '#comparePeriodToDropdown .select-dropdown', () => {\n        $element.addClass('compare-dropdown-open');\n      }).on('blur', '#comparePeriodToDropdown .select-dropdown', () => {\n        $element.removeClass('compare-dropdown-open');\n      });\n    },\n    changeViewedPeriod(period: string) {\n      // only change period if it's different from what's being shown currently\n      if (period === this.periodValue) {\n        return;\n      }\n\n      // can't just change to a range period, w/o setting two new dates\n      if (period === 'range') {\n        return;\n      }\n\n      this.setPiwikPeriodAndDate(period, this.dateValue!);\n    },\n    setPiwikPeriodAndDate(period: string, date: Date) {\n      this.periodValue = period;\n      this.selectedPeriod = period;\n      this.dateValue = date;\n\n      const currentDateString = format(date);\n      this.setRangeStartEndFromPeriod(period, currentDateString);\n\n      this.propagateNewUrlParams(currentDateString, this.selectedPeriod);\n\n      window.initTopControls();\n    },\n    propagateNewUrlParams(date: string, period: string) {\n      const compareParams = this.selectedComparisonParams;\n\n      let baseParams: Record<string, unknown>;\n      if (Matomo.helper.isReportingPage()) {\n        this.closePeriodSelector();\n        baseParams = MatomoUrl.hashParsed.value;\n      } else {\n        this.isLoadingNewPage = true;\n        baseParams = MatomoUrl.parsed.value;\n      }\n\n      // get params without comparePeriods/compareSegments/compareDates\n      const paramsWithoutCompare = { ...baseParams };\n      delete paramsWithoutCompare.comparePeriods;\n      delete paramsWithoutCompare.comparePeriodType;\n      delete paramsWithoutCompare.compareDates;\n\n      MatomoUrl.updateLocation({\n        ...paramsWithoutCompare,\n        date,\n        period,\n        ...compareParams,\n      });\n    },\n    onApplyClicked() {\n      if (this.selectedPeriod === 'range') {\n        const dateString = this.selectedDateString;\n        if (!dateString) {\n          return;\n        }\n\n        this.periodValue = 'range';\n\n        this.propagateNewUrlParams(dateString, 'range');\n        return;\n      }\n\n      this.setPiwikPeriodAndDate(this.selectedPeriod, this.dateValue!);\n    },\n    updateComparisonValuesFromStore() {\n      this.comparePeriodType = 'previousPeriod';\n      this.compareStartDate = '';\n      this.compareEndDate = '';\n\n      // first is selected period, second is period to compare to\n      const comparePeriods = ComparisonsStore.getPeriodComparisons();\n\n      if (comparePeriods.length < 2) {\n        return;\n      }\n\n      const comparePeriodType = MatomoUrl.parsed.value.comparePeriodType as string;\n\n      if (!COMPARE_PERIOD_TYPES.includes(comparePeriodType)) {\n        return;\n      }\n\n      this.comparePeriodType = comparePeriodType;\n\n      if (this.comparePeriodType !== 'custom' || comparePeriods[1].params.period !== 'range') {\n        return;\n      }\n\n      let periodObj;\n\n      try {\n        periodObj = Periods.parse(\n          comparePeriods[1].params.period,\n          comparePeriods[1].params.date,\n        ) as Range;\n      } catch {\n        return;\n      }\n\n      const [startDate, endDate] = periodObj.getDateRange();\n\n      this.compareStartDate = format(startDate);\n      this.compareEndDate = format(endDate);\n    },\n    updateSelectedValuesFromHash() {\n      const date = MatomoUrl.parsed.value.date as string;\n      const period = MatomoUrl.parsed.value.period as string;\n\n      this.periodValue = period;\n      this.selectedPeriod = period;\n\n      this.dateValue = null;\n      this.startRangeDate = null;\n      this.endRangeDate = null;\n\n      try {\n        Periods.parse(period, date);\n      } catch (e) {\n        return;\n      }\n\n      if (period === 'range') {\n        const periodObj = Periods.get(period).parse(date) as Range;\n\n        const [startDate, endDate] = periodObj.getDateRange();\n        this.dateValue = startDate;\n        this.startRangeDate = format(startDate);\n        this.endRangeDate = format(endDate);\n      } else {\n        this.dateValue = parseDate(date);\n        this.setRangeStartEndFromPeriod(period, date);\n      }\n    },\n    setRangeStartEndFromPeriod(period: string, dateStr: string) {\n      const dateRange = Periods.parse(period, dateStr).getDateRange();\n      this.startRangeDate = format(dateRange[0] < piwikMinDate ? piwikMinDate : dateRange[0]);\n      this.endRangeDate = format(dateRange[1] > piwikMaxDate ? piwikMaxDate : dateRange[1]);\n    },\n    getPeriodDisplayText(periodLabel: string) {\n      return Periods.get(periodLabel).getDisplayText();\n    },\n    onRangeChange(start: string, end: string) {\n      if (!start || !end) {\n        this.isRangeValid = false;\n        return;\n      }\n\n      this.isRangeValid = true;\n      this.startRangeDate = start;\n      this.endRangeDate = end;\n    },\n    isApplyEnabled() {\n      if (this.selectedPeriod === 'range'\n        && !this.isRangeValid\n      ) {\n        return false;\n      }\n\n      if (this.isComparing\n        && this.comparePeriodType === 'custom'\n        && !this.isCompareRangeValid()\n      ) {\n        return false;\n      }\n\n      return true;\n    },\n    closePeriodSelector() {\n      (this.$refs.root as HTMLElement).classList.remove('expanded');\n    },\n    isCompareRangeValid() {\n      try {\n        parseDate(this.compareStartDate);\n      } catch (e) {\n        return false;\n      }\n\n      try {\n        parseDate(this.compareEndDate);\n      } catch (e) {\n        return false;\n      }\n\n      return true;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent, watch } from 'vue';\nimport ExpandOnClick from '../ExpandOnClick/ExpandOnClick';\nimport DateRangePicker from '../DateRangePicker/DateRangePicker.vue';\nimport PeriodDatePicker from '../PeriodDatePicker/PeriodDatePicker.vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport Matomo from '../Matomo/Matomo';\nimport { translate } from '../translate';\nimport ComparisonsStore from '../Comparisons/Comparisons.store.instance';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport {\n  Periods,\n  parseDate,\n  Range,\n  format,\n} from '../Periods';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\n\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nconst NBSP = Matomo.helper.htmlDecode('&nbsp;');\n\nconst COMPARE_PERIOD_TYPES = ['custom', 'previousPeriod', 'previousYear'];\n\nconst COMPARE_PERIOD_OPTIONS = [\n  { key: 'custom', value: translate('General_Custom') },\n  {\n    key: 'previousPeriod',\n    value: translate('General_PreviousPeriod').replace(/\\s+/, NBSP),\n  },\n  {\n    key: 'previousYear',\n    value: translate('General_PreviousYear').replace(/\\s+/, NBSP),\n  },\n];\n\nconst piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\nconst piwikMaxDate = new Date(Matomo.maxDateYear, Matomo.maxDateMonth - 1, Matomo.maxDateDay);\n\nfunction isValidDate(d: any) { // eslint-disable-line @typescript-eslint/no-explicit-any\n  if (Object.prototype.toString.call(d) !== '[object Date]') {\n    return false;\n  }\n\n  return !Number.isNaN(d.getTime());\n}\n\ninterface PeriodSelectorState {\n  comparePeriodDropdownOptions: typeof COMPARE_PERIOD_OPTIONS;\n  periodValue: string;\n  dateValue: Date|null;\n  selectedPeriod: string;\n  startRangeDate: string|null;\n  endRangeDate: string|null;\n  isRangeValid: boolean|null;\n  isLoadingNewPage: boolean;\n  isComparing: null|boolean;\n  comparePeriodType: string;\n  compareStartDate: string;\n  compareEndDate: string;\n}\n\nexport default defineComponent({\n  props: {\n    periods: Array,\n  },\n  components: {\n    DateRangePicker,\n    PeriodDatePicker,\n    Field,\n    ActivityIndicator,\n  },\n  directives: {\n    ExpandOnClick,\n  },\n  data(): PeriodSelectorState {\n    const selectedPeriod = MatomoUrl.parsed.value.period as string;\n    return {\n      comparePeriodDropdownOptions: COMPARE_PERIOD_OPTIONS,\n      periodValue: selectedPeriod,\n      dateValue: null,\n      selectedPeriod,\n      startRangeDate: null,\n      endRangeDate: null,\n      isRangeValid: null,\n      isLoadingNewPage: false,\n      isComparing: null,\n      comparePeriodType: 'previousPeriod',\n      compareStartDate: '',\n      compareEndDate: '',\n    };\n  },\n  mounted() {\n    Matomo.on('hidePeriodSelector', () => {\n      window.$(this.$refs.root as HTMLElement).parent('#periodString').hide();\n    });\n\n    // some widgets might hide the period selector using the event above, so ensure it's\n    // shown again when switching the page\n    Matomo.on('matomoPageChange', () => {\n      window.$(this.$refs.root as HTMLElement).parent('#periodString').show();\n    });\n\n    this.isComparing = ComparisonsStore.isComparingPeriods();\n    watch(() => ComparisonsStore.isComparingPeriods(), (newVal) => {\n      this.isComparing = newVal;\n    });\n\n    this.updateSelectedValuesFromHash();\n    watch(() => MatomoUrl.parsed.value, this.updateSelectedValuesFromHash);\n\n    this.updateComparisonValuesFromStore();\n    watch(() => ComparisonsStore.getPeriodComparisons(), this.updateComparisonValuesFromStore);\n\n    window.initTopControls(); // must be called when a top control changes width\n\n    this.handleZIndexPositionRelativeCompareDropdownIssue();\n  },\n  computed: {\n    currentlyViewingText() {\n      let date;\n      if (this.periodValue === 'range') {\n        if (!this.startRangeDate || !this.endRangeDate) {\n          return translate('General_Error');\n        }\n\n        date = `${this.startRangeDate},${this.endRangeDate}`;\n      } else {\n        if (!this.dateValue) {\n          return translate('General_Error');\n        }\n\n        date = format(this.dateValue);\n      }\n\n      try {\n        return Periods.parse(this.periodValue!, date).getPrettyString();\n      } catch (e) {\n        return translate('General_Error');\n      }\n    },\n    isComparisonEnabled() {\n      return ComparisonsStore.isComparisonEnabled();\n    },\n    periodsFiltered() {\n      return (this.periods as string[] || []).filter(\n        (periodLabel) => Periods.isRecognizedPeriod(periodLabel),\n      );\n    },\n    selectedComparisonParams() {\n      if (!this.isComparing) {\n        return {};\n      }\n\n      if (this.comparePeriodType === 'custom') {\n        return {\n          comparePeriods: ['range'],\n          comparePeriodType: 'custom',\n          compareDates: [`${this.compareStartDate},${this.compareEndDate}`],\n        };\n      }\n\n      if (this.comparePeriodType === 'previousPeriod') {\n        return {\n          comparePeriods: [this.selectedPeriod],\n          comparePeriodType: 'previousPeriod',\n          compareDates: [this.previousPeriodDateToSelectedPeriod],\n        };\n      }\n\n      if (this.comparePeriodType === 'previousYear') {\n        const dateStr = this.selectedPeriod === 'range'\n          ? `${this.startRangeDate},${this.endRangeDate}`\n          : format(this.dateValue!);\n\n        const currentDateRange = Periods.parse(\n          this.selectedPeriod as string,\n          dateStr,\n        ).getDateRange();\n        currentDateRange[0].setFullYear(currentDateRange[0].getFullYear() - 1);\n        currentDateRange[1].setFullYear(currentDateRange[1].getFullYear() - 1);\n\n        if (this.selectedPeriod === 'range') {\n          return {\n            comparePeriods: ['range'],\n            comparePeriodType: 'previousYear',\n            compareDates: [`${format(currentDateRange[0])},${format(currentDateRange[1])}`],\n          };\n        }\n\n        return {\n          comparePeriods: [this.selectedPeriod],\n          comparePeriodType: 'previousYear',\n          compareDates: [format(currentDateRange[0])],\n        };\n      }\n\n      console.warn(`Unknown compare period type: ${this.comparePeriodType}`);\n      return {};\n    },\n    previousPeriodDateToSelectedPeriod() {\n      if (this.selectedPeriod === 'range') {\n        const currentStartRange = parseDate(this.startRangeDate!);\n        const currentEndRange = parseDate(this.endRangeDate!);\n        const newEndDate = Range.getLastNRange('day', 2, currentStartRange).startDate;\n\n        const rangeSize = Math.floor(\n          (currentEndRange.valueOf() - currentStartRange.valueOf()) / 86400000,\n        );\n        const newRange = Range.getLastNRange('day', 1 + rangeSize, newEndDate);\n\n        return `${format(newRange.startDate)},${format(newRange.endDate)}`;\n      }\n\n      const newStartDate = Range.getLastNRange(this.selectedPeriod, 2, this.dateValue!).startDate;\n      return format(newStartDate);\n    },\n    selectedDateString() {\n      if (this.selectedPeriod === 'range') {\n        const dateFrom = this.startRangeDate!;\n        const dateTo = this.endRangeDate!;\n        const oDateFrom = parseDate(dateFrom);\n        const oDateTo = parseDate(dateTo);\n\n        if (!isValidDate(oDateFrom)\n          || !isValidDate(oDateTo)\n          || oDateFrom > oDateTo\n        ) {\n          // TODO: use a notification instead?\n          window.$('#alert')\n            .find('h2')\n            .text(translate('General_InvalidDateRange'));\n          Matomo.helper.modalConfirm('#alert', {});\n          return null;\n        }\n\n        return `${dateFrom},${dateTo}`;\n      }\n\n      return format(this.dateValue!);\n    },\n  },\n  methods: {\n    handleZIndexPositionRelativeCompareDropdownIssue() {\n      const $element = window.$(this.$refs.root as HTMLElement);\n      $element.on('focus', '#comparePeriodToDropdown .select-dropdown', () => {\n        $element.addClass('compare-dropdown-open');\n      }).on('blur', '#comparePeriodToDropdown .select-dropdown', () => {\n        $element.removeClass('compare-dropdown-open');\n      });\n    },\n    changeViewedPeriod(period: string) {\n      // only change period if it's different from what's being shown currently\n      if (period === this.periodValue) {\n        return;\n      }\n\n      // can't just change to a range period, w/o setting two new dates\n      if (period === 'range') {\n        return;\n      }\n\n      this.setPiwikPeriodAndDate(period, this.dateValue!);\n    },\n    setPiwikPeriodAndDate(period: string, date: Date) {\n      this.periodValue = period;\n      this.selectedPeriod = period;\n      this.dateValue = date;\n\n      const currentDateString = format(date);\n      this.setRangeStartEndFromPeriod(period, currentDateString);\n\n      this.propagateNewUrlParams(currentDateString, this.selectedPeriod);\n\n      window.initTopControls();\n    },\n    propagateNewUrlParams(date: string, period: string) {\n      const compareParams = this.selectedComparisonParams;\n\n      let baseParams: Record<string, unknown>;\n      if (Matomo.helper.isReportingPage()) {\n        this.closePeriodSelector();\n        baseParams = MatomoUrl.hashParsed.value;\n      } else {\n        this.isLoadingNewPage = true;\n        baseParams = MatomoUrl.parsed.value;\n      }\n\n      // get params without comparePeriods/compareSegments/compareDates\n      const paramsWithoutCompare = { ...baseParams };\n      delete paramsWithoutCompare.comparePeriods;\n      delete paramsWithoutCompare.comparePeriodType;\n      delete paramsWithoutCompare.compareDates;\n\n      MatomoUrl.updateLocation({\n        ...paramsWithoutCompare,\n        date,\n        period,\n        ...compareParams,\n      });\n    },\n    onApplyClicked() {\n      if (this.selectedPeriod === 'range') {\n        const dateString = this.selectedDateString;\n        if (!dateString) {\n          return;\n        }\n\n        this.periodValue = 'range';\n\n        this.propagateNewUrlParams(dateString, 'range');\n        return;\n      }\n\n      this.setPiwikPeriodAndDate(this.selectedPeriod, this.dateValue!);\n    },\n    updateComparisonValuesFromStore() {\n      this.comparePeriodType = 'previousPeriod';\n      this.compareStartDate = '';\n      this.compareEndDate = '';\n\n      // first is selected period, second is period to compare to\n      const comparePeriods = ComparisonsStore.getPeriodComparisons();\n\n      if (comparePeriods.length < 2) {\n        return;\n      }\n\n      const comparePeriodType = MatomoUrl.parsed.value.comparePeriodType as string;\n\n      if (!COMPARE_PERIOD_TYPES.includes(comparePeriodType)) {\n        return;\n      }\n\n      this.comparePeriodType = comparePeriodType;\n\n      if (this.comparePeriodType !== 'custom' || comparePeriods[1].params.period !== 'range') {\n        return;\n      }\n\n      let periodObj;\n\n      try {\n        periodObj = Periods.parse(\n          comparePeriods[1].params.period,\n          comparePeriods[1].params.date,\n        ) as Range;\n      } catch {\n        return;\n      }\n\n      const [startDate, endDate] = periodObj.getDateRange();\n\n      this.compareStartDate = format(startDate);\n      this.compareEndDate = format(endDate);\n    },\n    updateSelectedValuesFromHash() {\n      const date = MatomoUrl.parsed.value.date as string;\n      const period = MatomoUrl.parsed.value.period as string;\n\n      this.periodValue = period;\n      this.selectedPeriod = period;\n\n      this.dateValue = null;\n      this.startRangeDate = null;\n      this.endRangeDate = null;\n\n      try {\n        Periods.parse(period, date);\n      } catch (e) {\n        return;\n      }\n\n      if (period === 'range') {\n        const periodObj = Periods.get(period).parse(date) as Range;\n\n        const [startDate, endDate] = periodObj.getDateRange();\n        this.dateValue = startDate;\n        this.startRangeDate = format(startDate);\n        this.endRangeDate = format(endDate);\n      } else {\n        this.dateValue = parseDate(date);\n        this.setRangeStartEndFromPeriod(period, date);\n      }\n    },\n    setRangeStartEndFromPeriod(period: string, dateStr: string) {\n      const dateRange = Periods.parse(period, dateStr).getDateRange();\n      this.startRangeDate = format(dateRange[0] < piwikMinDate ? piwikMinDate : dateRange[0]);\n      this.endRangeDate = format(dateRange[1] > piwikMaxDate ? piwikMaxDate : dateRange[1]);\n    },\n    getPeriodDisplayText(periodLabel: string) {\n      return Periods.get(periodLabel).getDisplayText();\n    },\n    onRangeChange(start: string, end: string) {\n      if (!start || !end) {\n        this.isRangeValid = false;\n        return;\n      }\n\n      this.isRangeValid = true;\n      this.startRangeDate = start;\n      this.endRangeDate = end;\n    },\n    isApplyEnabled() {\n      if (this.selectedPeriod === 'range'\n        && !this.isRangeValid\n      ) {\n        return false;\n      }\n\n      if (this.isComparing\n        && this.comparePeriodType === 'custom'\n        && !this.isCompareRangeValid()\n      ) {\n        return false;\n      }\n\n      return true;\n    },\n    closePeriodSelector() {\n      (this.$refs.root as HTMLElement).classList.remove('expanded');\n    },\n    isCompareRangeValid() {\n      try {\n        parseDate(this.compareStartDate);\n      } catch (e) {\n        return false;\n      }\n\n      try {\n        parseDate(this.compareEndDate);\n      } catch (e) {\n        return false;\n      }\n\n      return true;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PeriodSelector.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PeriodSelector.vue?vue&type=script&lang=ts\"","import { render } from \"./PeriodSelector.vue?vue&type=template&id=20c87378\"\nimport script from \"./PeriodSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./PeriodSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"reportingMenu\">\n    <ul\n      class=\"navbar hide-on-med-and-down\"\n      role=\"menu\"\n      :aria-label=\"translate('CoreHome_MainNavigation')\"\n    >\n      <li\n        class=\"menuTab\"\n        role=\"menuitem\"\n        v-for=\"category in menu\"\n        :class=\"{ 'active': category.id === activeCategory }\"\n        :key=\"category.id\"\n        :data-category-id=\"category.id\"\n      >\n        <component\n          v-if=\"category.component\"\n          :is=\"category.component\"\n          @action=\"loadCategory(category)\"\n        ></component>\n        <a\n          v-if=\"!category.component\"\n          class=\"item\"\n          tabindex=\"5\"\n          href=\"\"\n          @click.prevent=\"loadCategory(category)\"\n        >\n          <span\n            :class=\"`menu-icon ${category.icon ? category.icon :\n              (category.subcategories && category.id === activeCategory ?\n                'icon-chevron-down' : 'icon-chevron-right')}`\"\n          />{{ category.name }}\n          <span class=\"hidden\">\n            {{ translate('CoreHome_Menu') }}\n          </span>\n        </a>\n        <ul v-if=\"!category.component\" role=\"menu\">\n          <li\n            role=\"menuitem\"\n            :class=\"{\n              'active': (subcategory.id === displayedSubcategory\n                || (subcategory.isGroup && activeSubsubcategory === displayedSubcategory)\n              ) && category.id === displayedCategory,\n            }\"\n            v-for=\"subcategory in category.subcategories\"\n            :key=\"subcategory.id\"\n          >\n            <MenuItemsDropdown\n              v-if=\"subcategory.isGroup\"\n              :show-search=\"true\"\n              :menu-title=\"htmlEntities(subcategory.name)\"\n            >\n              <a\n                class=\"item\"\n                tabindex=\"5\"\n                :class=\"{\n                  active: subcat.id === activeSubsubcategory\n                    && subcategory.id === displayedSubcategory\n                    && category.id === displayedCategory,\n                }\"\n                :href=\"`#?${makeUrl(category, subcat)}`\"\n                @click=\"loadSubcategory(category, subcat, $event)\"\n                v-for=\"subcat in subcategory.subcategories\"\n                :title=\"subcat.tooltip\"\n                :key=\"subcat.id\"\n              >\n                {{ subcat.name }}\n              </a>\n            </MenuItemsDropdown>\n            <a\n              v-if=\"!subcategory.isGroup\"\n              :href=\"`#?${makeUrl(category, subcategory)}`\"\n              class=\"item\"\n              @click=\"loadSubcategory(category, subcategory, $event)\"\n            >\n              {{ subcategory.name }}\n            </a>\n            <a\n              class=\"item-help-icon\"\n              tabindex=\"5\"\n              href=\"javascript:\"\n              v-if=\"subcategory.help\"\n              @click=\"showHelp(category, subcategory, $event)\"\n              :class=\"{active: helpShownCategory\n                && helpShownCategory.subcategory === subcategory.id\n                && helpShownCategory.category === category.id\n                && subcategory.help}\"\n            >\n              <span class=\"icon-help\" />\n            </a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <ul\n      id=\"mobile-left-menu\"\n      class=\"sidenav sidenav--reporting-menu-mobile hide-on-large-only\"\n    >\n      <li\n        class=\"no-padding\"\n        v-for=\"category in menu\"\n        :key=\"category.id\"\n        :data-category-id=\"category.id\"\n      >\n        <component\n          v-if=\"category.component\"\n          :is=\"category.component\"\n          @action=\"loadCategory(category)\"\n        ></component>\n        <ul\n          v-if=\"!category.component\"\n          class=\"collapsible collapsible-accordion\"\n          v-side-nav=\"{ activator: sideNavActivator }\"\n        >\n          <li>\n            <a class=\"collapsible-header\">\n              <i :class=\"category.icon ? category.icon : 'icon-chevron-down'\" />{{ category.name }}\n            </a>\n            <div class=\"collapsible-body\">\n              <ul>\n                <li v-for=\"subcategory in category.subcategories\" :key=\"subcategory.id\">\n                  <template v-if=\"subcategory.isGroup\">\n                    <a\n                      @click=\"loadSubcategory(category, subcat)\"\n                      :href=\"`#?${makeUrl(category, subcat)}`\"\n                      v-for=\"subcat in subcategory.subcategories\"\n                      :key=\"subcat.id\"\n                    >\n                      {{ subcat.name }}\n                    </a>\n                  </template>\n                  <template v-if=\"!subcategory.isGroup\">\n                    <a\n                      @click=\"loadSubcategory(category, subcategory)\"\n                      :href=\"`#?${makeUrl(category, subcategory)}`\"\n                    >\n                      {{ subcategory.name }}\n                    </a>\n                  </template>\n                </li>\n              </ul>\n            </div>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch } from 'vue';\nimport MenuItemsDropdown from '../MenuItemsDropdown/MenuItemsDropdown.vue';\nimport SideNav from '../SideNav/SideNav';\nimport { NotificationsStore } from '../Notification';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport ReportingMenuStoreInstance from './ReportingMenu.store';\nimport Matomo from '../Matomo/Matomo';\nimport { translate } from '../translate';\nimport WidgetsStoreInstance from '../Widget/Widgets.store';\nimport { Category, CategoryContainer } from './Category';\nimport { Subcategory, SubcategoryContainer } from './Subcategory';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\nconst REPORTING_HELP_NOTIFICATION_ID = 'reportingmenu-help';\n\ninterface ReportingMenuState {\n  showSubcategoryHelpOnLoad: { category: Category, subcategory: Subcategory } | null;\n  initialLoad: boolean | null;\n  helpShownCategory: { category: string, subcategory: string } | null;\n}\n\nexport default defineComponent({\n  components: {\n    MenuItemsDropdown,\n  },\n  directives: {\n    SideNav,\n  },\n  props: {},\n  data(): ReportingMenuState {\n    return {\n      showSubcategoryHelpOnLoad: null,\n      initialLoad: true,\n      helpShownCategory: null,\n    };\n  },\n  computed: {\n    sideNavActivator() {\n      return document.querySelector('nav .activateLeftMenu');\n    },\n    menu() {\n      const categories = ReportingMenuStoreInstance.menu.value;\n\n      categories.forEach((category) => {\n        if (category.widget && category.widget.indexOf('.') > 0) {\n          const [widgetPlugin, widgetComponent] = category.widget.split('.');\n          category.component = useExternalPluginComponent(widgetPlugin, widgetComponent);\n        }\n      });\n\n      return categories;\n    },\n    activeCategory() {\n      return ReportingMenuStoreInstance.activeCategory.value;\n    },\n    activeSubcategory() {\n      return ReportingMenuStoreInstance.activeSubcategory.value;\n    },\n    activeSubsubcategory() {\n      return ReportingMenuStoreInstance.activeSubsubcategory.value;\n    },\n    displayedCategory() {\n      return MatomoUrl.parsed.value.category;\n    },\n    displayedSubcategory() {\n      return MatomoUrl.parsed.value.subcategory;\n    },\n  },\n  created() {\n    ReportingMenuStoreInstance.fetchMenuItems().then((menu) => {\n      if (!MatomoUrl.parsed.value.subcategory) {\n        const categoryToLoad = menu[0];\n        const subcategoryToLoad = (categoryToLoad as CategoryContainer).subcategories[0];\n\n        // load first, initial page if no subcategory is present\n        ReportingMenuStoreInstance.enterSubcategory(categoryToLoad, subcategoryToLoad);\n        this.propagateUrlChange(categoryToLoad, subcategoryToLoad);\n      }\n    });\n\n    watch(() => MatomoUrl.parsed.value, (query) => {\n      const found = ReportingMenuStoreInstance.findSubcategory(\n        query.category as string,\n        query.subcategory as string,\n      );\n\n      ReportingMenuStoreInstance.enterSubcategory(\n        found.category,\n        found.subcategory,\n        found.subsubcategory,\n      );\n    });\n\n    Matomo.on('matomoPageChange', () => {\n      if (!this.initialLoad) {\n        window.globalAjaxQueue.abort();\n      }\n\n      this.helpShownCategory = null;\n\n      if (this.showSubcategoryHelpOnLoad) {\n        this.showHelp(\n          this.showSubcategoryHelpOnLoad.category,\n          this.showSubcategoryHelpOnLoad.subcategory,\n        );\n        this.showSubcategoryHelpOnLoad = null;\n      }\n\n      window.$('#loadingError,#loadingRateLimitError').hide();\n\n      this.initialLoad = false;\n    });\n\n    Matomo.on('updateReportingMenu', () => {\n      ReportingMenuStoreInstance.reloadMenuItems().then(() => {\n        const category = MatomoUrl.parsed.value.category as string;\n        const subcategory = MatomoUrl.parsed.value.subcategory as string;\n\n        // we need to make sure to select same categories again\n        if (category && subcategory) {\n          const found = ReportingMenuStoreInstance.findSubcategory(category, subcategory);\n          if (found.category) {\n            ReportingMenuStoreInstance.enterSubcategory(\n              found.category,\n              found.subcategory,\n              found.subsubcategory,\n            );\n          }\n        }\n      });\n\n      WidgetsStoreInstance.reloadAvailableWidgets();\n    });\n  },\n  methods: {\n    propagateUrlChange(category: Category, subcategory: Subcategory) {\n      const queryParams = MatomoUrl.parsed.value;\n      if (queryParams.category === category.id && queryParams.subcategory === subcategory.id) {\n        // we need to manually trigger change as URL would not change and therefore page would not\n        // be reloaded\n        this.loadSubcategory(category, subcategory);\n      } else {\n        MatomoUrl.updateHash({\n          ...MatomoUrl.hashParsed.value,\n          category: category.id,\n          subcategory: subcategory.id,\n        });\n      }\n    },\n    loadCategory(category: Category) {\n      NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n\n      const isActive = ReportingMenuStoreInstance.toggleCategory(category);\n\n      // one subcategory or a widget and some subcategories to allow to load the category\n      const { subcategories } = category as SubcategoryContainer;\n      const categoryCanLoad = (subcategories && subcategories.length === 1)\n        || (category.widget && subcategories && subcategories.length);\n\n      if (isActive && categoryCanLoad) {\n        this.helpShownCategory = null;\n\n        const subcategory = (category as SubcategoryContainer).subcategories[0];\n        this.propagateUrlChange(category, subcategory);\n      }\n    },\n    loadSubcategory(category: Category, subcategory: Subcategory, event?: MouseEvent) {\n      if (event\n        && (event.shiftKey || event.ctrlKey || event.metaKey)\n      ) {\n        return;\n      }\n\n      NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n\n      if (subcategory\n        && subcategory.id === MatomoUrl.parsed.value.subcategory\n        && category.id === MatomoUrl.parsed.value.category\n      ) {\n        this.helpShownCategory = null;\n\n        // this menu item is already active, a location change success would not be triggered,\n        // instead trigger an event (after the URL changes)\n        setTimeout(() => {\n          Matomo.postEvent('loadPage', category.id, subcategory.id);\n        });\n      }\n    },\n    makeUrl(category: Category, subcategory: Subcategory) {\n      const {\n        idSite,\n        period,\n        date,\n        segment,\n        comparePeriods,\n        compareDates,\n        compareSegments,\n      } = MatomoUrl.parsed.value;\n\n      return MatomoUrl.stringify({\n        idSite,\n        period,\n        date,\n        segment,\n        comparePeriods,\n        compareDates,\n        compareSegments,\n        category: category.id,\n        subcategory: subcategory.id,\n      });\n    },\n    htmlEntities(v: string) {\n      return Matomo.helper.htmlEntities(v);\n    },\n    showHelp(category: Category, subcategory: Subcategory, event?: Event) {\n      const parsedUrl = MatomoUrl.parsed.value;\n      const currentCategory = parsedUrl.category;\n      const currentSubcategory = parsedUrl.subcategory;\n\n      if ((currentCategory !== category.id\n        || currentSubcategory !== subcategory.id)\n        && event\n      ) {\n        this.showSubcategoryHelpOnLoad = { category, subcategory };\n        MatomoUrl.updateHash({\n          ...MatomoUrl.hashParsed.value,\n          category: category.id,\n          subcategory: subcategory.id,\n        });\n        return;\n      }\n\n      if (this.helpShownCategory\n        && category.id === this.helpShownCategory.category\n        && subcategory.id === this.helpShownCategory.subcategory\n      ) {\n        NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n        this.helpShownCategory = null;\n        return;\n      }\n\n      const prefixText = translate('CoreHome_ReportingCategoryHelpPrefix',\n        category.name, subcategory.name);\n      const prefix = `<strong>${prefixText}</strong><br/>`;\n\n      NotificationsStore.show({\n        context: 'info',\n        id: REPORTING_HELP_NOTIFICATION_ID,\n        type: 'help',\n        noclear: true,\n        class: 'help-notification',\n        message: prefix + subcategory.help,\n        placeat: '#notificationContainer',\n        prepend: true,\n      });\n\n      this.helpShownCategory = {\n        category: category.id,\n        subcategory: subcategory.id,\n      };\n    },\n  },\n});\n</script>\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  reactive,\n  computed, readonly, DeepReadonly,\n} from 'vue';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { Widget } from '../Widget/types';\n\ninterface CategoryRef {\n  id: string;\n  name: string;\n}\n\ninterface SubcategoryRef {\n  id: string;\n  name: string;\n}\n\nexport interface Page {\n  category: CategoryRef;\n  subcategory: SubcategoryRef;\n  widgets: Widget[];\n}\n\ninterface ReportingPagesStoreState {\n  pages: Page[];\n}\n\nexport class ReportingPagesStore {\n  private privateState = reactive<ReportingPagesStoreState>({\n    pages: [],\n  });\n\n  private state = computed(() => readonly(this.privateState));\n\n  private fetchAllPagesPromise?: Promise<DeepReadonly<Page[]>>;\n\n  readonly pages = computed(() => this.state.value.pages);\n\n  findPageInCategory(categoryId: string): DeepReadonly<Page>|undefined {\n    // happens when user switches between sites, in this case check if the same category exists and\n    // if so, select first entry from that category\n    return this.pages.value.find((p) => p\n      && p.category && p.category.id === categoryId && p.subcategory && p.subcategory.id);\n  }\n\n  findPage(categoryId: string, subcategoryId: string): DeepReadonly<Page>|undefined {\n    return this.pages.value.find((p) => p\n      && p.category && p.subcategory && p.category.id === categoryId\n      && `${p.subcategory.id}` === subcategoryId);\n  }\n\n  reloadAllPages(): Promise<ReportingPagesStore['pages']['value']> {\n    delete this.fetchAllPagesPromise;\n    return this.getAllPages();\n  }\n\n  getAllPages(): Promise<ReportingPagesStore['pages']['value']> {\n    if (!this.fetchAllPagesPromise) {\n      this.fetchAllPagesPromise = AjaxHelper.fetch({\n        method: 'API.getReportPagesMetadata',\n        filter_limit: '-1',\n      }).then((response) => {\n        this.privateState.pages = response;\n        return this.pages.value;\n      });\n    }\n\n    return this.fetchAllPagesPromise.then(() => this.pages.value);\n  }\n}\n\nexport default new ReportingPagesStore();\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nexport interface Orderable {\n  order: number;\n}\n\nexport function sortOrderables<T extends Orderable>(menu?: ReadonlyArray<T>): T[] {\n  const result = [...(menu || [])];\n  result.sort((lhs, rhs) => {\n    if (lhs.order < rhs.order) {\n      return -1;\n    }\n\n    if (lhs.order > rhs.order) {\n      return 1;\n    }\n\n    return 0;\n  });\n  return result;\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { defineAsyncComponent } from 'vue';\nimport { Orderable } from '../Orderable';\nimport { Subcategory } from './Subcategory';\n\nexport interface Category extends Orderable {\n  id: string;\n  name: string;\n  icon?: string;\n  tooltip?: string;\n  widget?: string;\n  component?: typeof defineAsyncComponent;\n\n  /**\n   * @deprecated exists for BC, should be removed in Matomo 5\n   */\n  active?: boolean;\n}\n\nexport interface CategoryContainer extends Category {\n  subcategories: Subcategory[];\n}\n\nexport function getCategoryChildren(category: Category): Subcategory[] {\n  const container = category as CategoryContainer;\n  if (container.subcategories) {\n    return container.subcategories;\n  }\n  return [];\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { Orderable } from '../Orderable';\n\nexport interface Subcategory extends Orderable {\n  id: string;\n  name: string;\n  isGroup: boolean;\n  icon?: string;\n  tooltip?: string;\n  help?: string;\n\n  /**\n   * @deprecated exists for BC, should be removed in Matomo 5\n   */\n  active?: boolean;\n}\n\nexport interface SubcategoryContainer extends Subcategory {\n  subcategories: Subcategory[];\n}\n\nexport function getSubcategoryChildren(subcategory: Subcategory): Subcategory[] {\n  const container = subcategory as SubcategoryContainer;\n  if (container.subcategories) {\n    return container.subcategories;\n  }\n  return [];\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { computed, reactive, readonly } from 'vue';\nimport ReportingPagesStoreInstance from '../ReportingPages/ReportingPages.store';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\nimport { sortOrderables } from '../Orderable';\nimport { Category, CategoryContainer, getCategoryChildren } from './Category';\nimport { getSubcategoryChildren, Subcategory, SubcategoryContainer } from './Subcategory';\n\ninterface ReportingMenuStoreState {\n  activeCategoryId?: string|null;\n  activeSubcategoryId: string|null;\n  activeSubsubcategoryId: string|null;\n}\n\ninterface SubcategoryFindResult {\n  category?: Category;\n  subcategory?: Subcategory;\n  subsubcategory?: Subcategory;\n}\n\nfunction isNumeric(text: string) {\n  const n = parseFloat(text);\n  return !Number.isNaN(n) && Number.isFinite(n);\n}\n\nexport class ReportingMenuStore {\n  private privateState = reactive<ReportingMenuStoreState>({\n    activeSubcategoryId: null,\n    activeSubsubcategoryId: null,\n  });\n\n  private state = computed(() => readonly(this.privateState));\n\n  readonly activeCategory = computed(\n    () => (typeof this.state.value.activeCategoryId !== 'undefined'\n      ? this.state.value.activeCategoryId\n      : MatomoUrl.parsed.value.category as string),\n  );\n\n  readonly activeSubcategory = computed(\n    () => this.state.value.activeSubcategoryId || MatomoUrl.parsed.value.subcategory as string,\n  );\n\n  readonly activeSubsubcategory = computed(() => {\n    const manuallySetId = this.state.value.activeSubsubcategoryId;\n    if (manuallySetId) {\n      return manuallySetId;\n    }\n\n    // default to activeSubcategory if the activeSubcategory is part of a group\n    const foundCategory = this.findSubcategory(\n      this.activeCategory.value,\n      this.activeSubcategory.value,\n    );\n\n    if (foundCategory.subsubcategory\n      && foundCategory.subsubcategory.id === this.activeSubcategory.value\n    ) {\n      return foundCategory.subsubcategory.id;\n    }\n\n    return null;\n  });\n\n  readonly menu = computed(() => this.buildMenuFromPages());\n\n  fetchMenuItems(): Promise<ReportingMenuStore['menu']['value']> {\n    return ReportingPagesStoreInstance.getAllPages().then(() => this.menu.value);\n  }\n\n  reloadMenuItems(): Promise<ReportingMenuStore['menu']['value']> {\n    return ReportingPagesStoreInstance.reloadAllPages().then(() => this.menu.value);\n  }\n\n  findSubcategory(categoryId: string|null, subcategoryId: string): SubcategoryFindResult {\n    let foundCategory: Category|undefined = undefined;\n    let foundSubcategory: Subcategory|undefined = undefined;\n    let foundSubSubcategory: Subcategory|undefined = undefined;\n\n    this.menu.value.forEach((category) => {\n      if (category.id !== categoryId) {\n        return;\n      }\n\n      (getCategoryChildren(category) || []).forEach((subcategory) => {\n        if (subcategory.id === subcategoryId) {\n          foundCategory = category;\n          foundSubcategory = subcategory;\n        }\n\n        if (subcategory.isGroup) {\n          (getSubcategoryChildren(subcategory) || []).forEach((subcat) => {\n            if (subcat.id === subcategoryId) {\n              foundCategory = category;\n              foundSubcategory = subcategory;\n              foundSubSubcategory = subcat;\n            }\n          });\n        }\n      });\n    });\n\n    return {\n      category: foundCategory,\n      subcategory: foundSubcategory,\n      subsubcategory: foundSubSubcategory,\n    };\n  }\n\n  private buildMenuFromPages() {\n    const menu: Category[] = [];\n\n    const displayedCategory = MatomoUrl.parsed.value.category as string;\n    const displayedSubcategory = MatomoUrl.parsed.value.subcategory as string;\n\n    const pages = ReportingPagesStoreInstance.pages.value;\n\n    const categoriesHandled: Record<string, boolean> = {};\n    pages.forEach((page) => {\n      const category = { ...page.category } as Category;\n      const categoryId = category.id;\n      const isCategoryDisplayed = categoryId === displayedCategory;\n\n      if (categoriesHandled[categoryId]) {\n        return;\n      }\n\n      categoriesHandled[categoryId] = true;\n\n      (category as CategoryContainer).subcategories = [];\n\n      let categoryGroups: Subcategory|null = null;\n\n      const pagesWithCategory = pages.filter((p) => p.category.id === categoryId);\n      pagesWithCategory.forEach((p) => {\n        const subcategory = { ...p.subcategory } as Subcategory;\n        const isSubcategoryDisplayed = subcategory.id === displayedSubcategory\n          && isCategoryDisplayed;\n\n        if (p.widgets && p.widgets[0] && isNumeric(p.subcategory.id)) {\n          // we handle a goal or something like it\n          if (!categoryGroups) {\n            categoryGroups = { ...subcategory } as Subcategory;\n            categoryGroups.name = translate('CoreHome_ChooseX', [category.name]);\n            categoryGroups.isGroup = true;\n            (categoryGroups as SubcategoryContainer).subcategories = [];\n            categoryGroups.order = 10;\n          }\n\n          if (isSubcategoryDisplayed) {\n            categoryGroups.name = subcategory.name;\n          }\n\n          const entityId = subcategory.id;\n          subcategory.tooltip = `${subcategory.name} (id = ${entityId})`;\n\n          (categoryGroups as SubcategoryContainer).subcategories.push(subcategory);\n          return;\n        }\n\n        (category as CategoryContainer).subcategories.push(subcategory);\n      });\n\n      if (categoryGroups\n        && (categoryGroups as SubcategoryContainer).subcategories\n        && (categoryGroups as SubcategoryContainer).subcategories.length <= 5\n      ) {\n        (categoryGroups as SubcategoryContainer).subcategories.forEach(\n          (sub) => (category as CategoryContainer).subcategories.push(sub),\n        );\n      } else if (categoryGroups) {\n        (category as CategoryContainer).subcategories.push(categoryGroups);\n      }\n\n      (category as CategoryContainer).subcategories = sortOrderables(getCategoryChildren(category));\n\n      menu.push(category);\n    });\n\n    return sortOrderables(menu);\n  }\n\n  toggleCategory(category: Category): boolean {\n    this.privateState.activeSubcategoryId = null;\n    this.privateState.activeSubsubcategoryId = null;\n\n    if (this.activeCategory.value === category.id) {\n      this.privateState.activeCategoryId = null;\n      return false;\n    }\n\n    this.privateState.activeCategoryId = category.id;\n    return true;\n  }\n\n  enterSubcategory(\n    category?: Category,\n    subcategory?: Subcategory,\n    subsubcategory?: Subcategory,\n  ): void {\n    if (!category || !subcategory) {\n      return;\n    }\n\n    this.privateState.activeCategoryId = category.id;\n    this.privateState.activeSubcategoryId = subcategory.id;\n\n    if (subsubcategory) {\n      this.privateState.activeSubsubcategoryId = subsubcategory.id;\n    }\n  }\n}\n\nexport default new ReportingMenuStore();\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  reactive,\n  readonly,\n  computed,\n  DeepReadonly,\n} from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { Widget, WidgetContainer } from './types';\n\ninterface WidgetsStoreState {\n  isFetchedFirstTime: boolean;\n  categorizedWidgets: Record<string, Widget[]>;\n}\n\nexport function getWidgetChildren(widget: Widget): Widget[] {\n  const container = widget as WidgetContainer;\n  if (container.widgets) {\n    return container.widgets;\n  }\n  return [];\n}\n\nclass WidgetsStore {\n  private privateState = reactive<WidgetsStoreState>({\n    isFetchedFirstTime: false,\n    categorizedWidgets: {},\n  });\n\n  private state = computed((): DeepReadonly<WidgetsStoreState> => {\n    if (!this.privateState.isFetchedFirstTime) {\n      // initiating a side effect in a computed property seems wrong, but it needs to be\n      // executed after knowing a user's logged in and it will succeed.\n      this.fetchAvailableWidgets();\n    }\n\n    return readonly(this.privateState);\n  });\n\n  readonly widgets = computed(() => this.state.value.categorizedWidgets);\n\n  private fetchAvailableWidgets(): Promise<WidgetsStore['widgets']['value']> {\n    // if there's no idSite, don't make the request since it will just fail\n    if (!MatomoUrl.parsed.value.idSite) {\n      return Promise.resolve(this.widgets.value);\n    }\n\n    this.privateState.isFetchedFirstTime = true;\n    return new Promise((resolve, reject) => {\n      try {\n        window.widgetsHelper.getAvailableWidgets((widgets: Record<string, unknown[]>) => {\n          const casted = widgets as unknown as Record<string, Widget[]>;\n          this.privateState.categorizedWidgets = casted;\n          resolve(this.widgets.value);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  reloadAvailableWidgets(): Promise<WidgetsStore['widgets']['value']> {\n    if (typeof window.widgetsHelper === 'object' && window.widgetsHelper.availableWidgets) {\n      // lets also update widgetslist so will be easier to update list of available widgets in\n      // dashboard selector immediately\n      delete window.widgetsHelper.availableWidgets;\n    }\n\n    return this.fetchAvailableWidgets();\n  }\n}\n\nexport default new WidgetsStore();\n","\nimport { defineComponent, watch } from 'vue';\nimport MenuItemsDropdown from '../MenuItemsDropdown/MenuItemsDropdown.vue';\nimport SideNav from '../SideNav/SideNav';\nimport { NotificationsStore } from '../Notification';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport ReportingMenuStoreInstance from './ReportingMenu.store';\nimport Matomo from '../Matomo/Matomo';\nimport { translate } from '../translate';\nimport WidgetsStoreInstance from '../Widget/Widgets.store';\nimport { Category, CategoryContainer } from './Category';\nimport { Subcategory, SubcategoryContainer } from './Subcategory';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\n\nconst REPORTING_HELP_NOTIFICATION_ID = 'reportingmenu-help';\n\ninterface ReportingMenuState {\n  showSubcategoryHelpOnLoad: { category: Category, subcategory: Subcategory } | null;\n  initialLoad: boolean | null;\n  helpShownCategory: { category: string, subcategory: string } | null;\n}\n\nexport default defineComponent({\n  components: {\n    MenuItemsDropdown,\n  },\n  directives: {\n    SideNav,\n  },\n  props: {},\n  data(): ReportingMenuState {\n    return {\n      showSubcategoryHelpOnLoad: null,\n      initialLoad: true,\n      helpShownCategory: null,\n    };\n  },\n  computed: {\n    sideNavActivator() {\n      return document.querySelector('nav .activateLeftMenu');\n    },\n    menu() {\n      const categories = ReportingMenuStoreInstance.menu.value;\n\n      categories.forEach((category) => {\n        if (category.widget && category.widget.indexOf('.') > 0) {\n          const [widgetPlugin, widgetComponent] = category.widget.split('.');\n          category.component = useExternalPluginComponent(widgetPlugin, widgetComponent);\n        }\n      });\n\n      return categories;\n    },\n    activeCategory() {\n      return ReportingMenuStoreInstance.activeCategory.value;\n    },\n    activeSubcategory() {\n      return ReportingMenuStoreInstance.activeSubcategory.value;\n    },\n    activeSubsubcategory() {\n      return ReportingMenuStoreInstance.activeSubsubcategory.value;\n    },\n    displayedCategory() {\n      return MatomoUrl.parsed.value.category;\n    },\n    displayedSubcategory() {\n      return MatomoUrl.parsed.value.subcategory;\n    },\n  },\n  created() {\n    ReportingMenuStoreInstance.fetchMenuItems().then((menu) => {\n      if (!MatomoUrl.parsed.value.subcategory) {\n        const categoryToLoad = menu[0];\n        const subcategoryToLoad = (categoryToLoad as CategoryContainer).subcategories[0];\n\n        // load first, initial page if no subcategory is present\n        ReportingMenuStoreInstance.enterSubcategory(categoryToLoad, subcategoryToLoad);\n        this.propagateUrlChange(categoryToLoad, subcategoryToLoad);\n      }\n    });\n\n    watch(() => MatomoUrl.parsed.value, (query) => {\n      const found = ReportingMenuStoreInstance.findSubcategory(\n        query.category as string,\n        query.subcategory as string,\n      );\n\n      ReportingMenuStoreInstance.enterSubcategory(\n        found.category,\n        found.subcategory,\n        found.subsubcategory,\n      );\n    });\n\n    Matomo.on('matomoPageChange', () => {\n      if (!this.initialLoad) {\n        window.globalAjaxQueue.abort();\n      }\n\n      this.helpShownCategory = null;\n\n      if (this.showSubcategoryHelpOnLoad) {\n        this.showHelp(\n          this.showSubcategoryHelpOnLoad.category,\n          this.showSubcategoryHelpOnLoad.subcategory,\n        );\n        this.showSubcategoryHelpOnLoad = null;\n      }\n\n      window.$('#loadingError,#loadingRateLimitError').hide();\n\n      this.initialLoad = false;\n    });\n\n    Matomo.on('updateReportingMenu', () => {\n      ReportingMenuStoreInstance.reloadMenuItems().then(() => {\n        const category = MatomoUrl.parsed.value.category as string;\n        const subcategory = MatomoUrl.parsed.value.subcategory as string;\n\n        // we need to make sure to select same categories again\n        if (category && subcategory) {\n          const found = ReportingMenuStoreInstance.findSubcategory(category, subcategory);\n          if (found.category) {\n            ReportingMenuStoreInstance.enterSubcategory(\n              found.category,\n              found.subcategory,\n              found.subsubcategory,\n            );\n          }\n        }\n      });\n\n      WidgetsStoreInstance.reloadAvailableWidgets();\n    });\n  },\n  methods: {\n    propagateUrlChange(category: Category, subcategory: Subcategory) {\n      const queryParams = MatomoUrl.parsed.value;\n      if (queryParams.category === category.id && queryParams.subcategory === subcategory.id) {\n        // we need to manually trigger change as URL would not change and therefore page would not\n        // be reloaded\n        this.loadSubcategory(category, subcategory);\n      } else {\n        MatomoUrl.updateHash({\n          ...MatomoUrl.hashParsed.value,\n          category: category.id,\n          subcategory: subcategory.id,\n        });\n      }\n    },\n    loadCategory(category: Category) {\n      NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n\n      const isActive = ReportingMenuStoreInstance.toggleCategory(category);\n\n      // one subcategory or a widget and some subcategories to allow to load the category\n      const { subcategories } = category as SubcategoryContainer;\n      const categoryCanLoad = (subcategories && subcategories.length === 1)\n        || (category.widget && subcategories && subcategories.length);\n\n      if (isActive && categoryCanLoad) {\n        this.helpShownCategory = null;\n\n        const subcategory = (category as SubcategoryContainer).subcategories[0];\n        this.propagateUrlChange(category, subcategory);\n      }\n    },\n    loadSubcategory(category: Category, subcategory: Subcategory, event?: MouseEvent) {\n      if (event\n        && (event.shiftKey || event.ctrlKey || event.metaKey)\n      ) {\n        return;\n      }\n\n      NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n\n      if (subcategory\n        && subcategory.id === MatomoUrl.parsed.value.subcategory\n        && category.id === MatomoUrl.parsed.value.category\n      ) {\n        this.helpShownCategory = null;\n\n        // this menu item is already active, a location change success would not be triggered,\n        // instead trigger an event (after the URL changes)\n        setTimeout(() => {\n          Matomo.postEvent('loadPage', category.id, subcategory.id);\n        });\n      }\n    },\n    makeUrl(category: Category, subcategory: Subcategory) {\n      const {\n        idSite,\n        period,\n        date,\n        segment,\n        comparePeriods,\n        compareDates,\n        compareSegments,\n      } = MatomoUrl.parsed.value;\n\n      return MatomoUrl.stringify({\n        idSite,\n        period,\n        date,\n        segment,\n        comparePeriods,\n        compareDates,\n        compareSegments,\n        category: category.id,\n        subcategory: subcategory.id,\n      });\n    },\n    htmlEntities(v: string) {\n      return Matomo.helper.htmlEntities(v);\n    },\n    showHelp(category: Category, subcategory: Subcategory, event?: Event) {\n      const parsedUrl = MatomoUrl.parsed.value;\n      const currentCategory = parsedUrl.category;\n      const currentSubcategory = parsedUrl.subcategory;\n\n      if ((currentCategory !== category.id\n        || currentSubcategory !== subcategory.id)\n        && event\n      ) {\n        this.showSubcategoryHelpOnLoad = { category, subcategory };\n        MatomoUrl.updateHash({\n          ...MatomoUrl.hashParsed.value,\n          category: category.id,\n          subcategory: subcategory.id,\n        });\n        return;\n      }\n\n      if (this.helpShownCategory\n        && category.id === this.helpShownCategory.category\n        && subcategory.id === this.helpShownCategory.subcategory\n      ) {\n        NotificationsStore.remove(REPORTING_HELP_NOTIFICATION_ID);\n        this.helpShownCategory = null;\n        return;\n      }\n\n      const prefixText = translate('CoreHome_ReportingCategoryHelpPrefix',\n        category.name, subcategory.name);\n      const prefix = `<strong>${prefixText}</strong><br/>`;\n\n      NotificationsStore.show({\n        context: 'info',\n        id: REPORTING_HELP_NOTIFICATION_ID,\n        type: 'help',\n        noclear: true,\n        class: 'help-notification',\n        message: prefix + subcategory.help,\n        placeat: '#notificationContainer',\n        prepend: true,\n      });\n\n      this.helpShownCategory = {\n        category: category.id,\n        subcategory: subcategory.id,\n      };\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportingMenu.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportingMenu.vue?vue&type=script&lang=ts\"","import { render } from \"./ReportingMenu.vue?vue&type=template&id=1107cb5a\"\nimport script from \"./ReportingMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./ReportingMenu.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  reactive,\n  computed,\n  readonly,\n  DeepReadonly,\n} from 'vue';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport Matomo from '../Matomo/Matomo';\n\ninterface ReportRef {\n  module: string;\n  action: string;\n}\n\ninterface Report {\n  relatedReports: ReportRef[];\n  module: string;\n  action: string;\n  documentation?: string;\n}\n\ninterface ReportMetadataStoreState {\n  reports: Report[];\n}\n\nexport class ReportMetadataStore {\n  private privateState = reactive<ReportMetadataStoreState>({\n    reports: [],\n  });\n\n  private state = readonly(this.privateState);\n\n  readonly reports = computed(() => this.state.reports);\n\n  private reportsPromise?: Promise<Report[]>;\n\n  // TODO: it used to return an empty array when nothing was found, will that be an issue?\n  findReport(reportModule?: string, reportAction?: string): DeepReadonly<Report>|undefined {\n    return this.reports.value.find((r) => r.module === reportModule && r.action === reportAction);\n  }\n\n  fetchReportMetadata(): Promise<ReportMetadataStore['reports']['value']> {\n    if (!this.reportsPromise) {\n      this.reportsPromise = AjaxHelper.fetch({\n        method: 'API.getReportMetadata',\n        filter_limit: '-1',\n        idSite: Matomo.idSite || MatomoUrl.parsed.value.idSite,\n      }).then((response) => {\n        this.privateState.reports = response;\n        return response;\n      });\n    }\n\n    return this.reportsPromise.then(() => this.reports.value);\n  }\n}\n\nexport default new ReportMetadataStore();\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"widgetLoader\">\n    <ActivityIndicator\n      :loading-message=\"finalLoadingMessage\"\n      :loading=\"loading\"\n    />\n    <div v-show=\"loadingFailed\">\n      <h2 v-if=\"widgetName\">{{ widgetName }}</h2>\n      <div v-if=\"!loadingFailedRateLimit\" class=\"notification system notification-error\">\n        {{ translate('General_ErrorRequest', '', '') }}\n        <a\n          rel=\"noreferrer noopener\"\n          target=\"_blank\"\n          :href=\"externalRawLink('https://matomo.org/faq/troubleshooting/faq_19489/')\"\n          v-if=\"hasErrorFaqLink\"\n        >\n          {{ translate('General_ErrorRequestFaqLink') }}\n        </a>\n      </div>\n      <div v-else class=\"notification system notification-error\">\n        {{ translate('General_ErrorRateLimit') }}\n      </div>\n    </div>\n    <div class=\"theWidgetContent\" ref=\"widgetContent\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport { translate } from '../translate';\nimport Matomo from '../Matomo/Matomo';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { NotificationsStore } from '../Notification';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport ComparisonsStoreInstance from '../Comparisons/Comparisons.store.instance';\n\ninterface WidgetLoaderState {\n  loading: boolean;\n  loadingFailed: boolean;\n  loadingFailedRateLimit: boolean;\n  changeCounter: number;\n  lastWidgetAbortController: null|AbortController;\n}\n\n/**\n * Loads any custom widget or URL based on the given parameters.\n *\n * The currently active idSite, period, date and segment (if needed) is automatically\n * appended to the parameters. If this widget is removed from the DOM and requests are in\n * progress, these requests will be aborted. A loading message or an error message on failure\n * is shown as well. It's kinda similar to ng-include but there it is not possible to\n * listen to HTTP errors etc.\n *\n * Example:\n * <WidgetLoader :widget-params=\"{module: '', action: '', ...}\"/>\n */\nexport default defineComponent({\n  props: {\n    widgetParams: Object,\n    widgetName: String,\n    loadingMessage: String,\n  },\n  components: {\n    ActivityIndicator,\n  },\n  data(): WidgetLoaderState {\n    return {\n      loading: false,\n      loadingFailed: false,\n      loadingFailedRateLimit: false,\n      changeCounter: 0,\n      lastWidgetAbortController: null,\n    };\n  },\n  watch: {\n    widgetParams(parameters: QueryParameters) {\n      if (parameters) {\n        this.loadWidgetUrl(parameters, this.changeCounter += 1);\n      }\n    },\n  },\n  computed: {\n    finalLoadingMessage() {\n      if (this.loadingMessage) {\n        return this.loadingMessage;\n      }\n\n      if (!this.widgetName) {\n        return translate('General_LoadingData');\n      }\n\n      return translate('General_LoadingPopover', this.widgetName);\n    },\n    hasErrorFaqLink() {\n      const isGeneralSettingsAdminEnabled = Matomo.config.enable_general_settings_admin;\n      const isPluginsAdminEnabled = Matomo.config.enable_plugins_admin;\n\n      return Matomo.hasSuperUserAccess\n        && (isGeneralSettingsAdminEnabled\n          || isPluginsAdminEnabled);\n    },\n  },\n  mounted() {\n    if (this.widgetParams) {\n      this.loadWidgetUrl(this.widgetParams as QueryParameters, this.changeCounter += 1);\n    }\n  },\n  beforeUnmount() {\n    this.cleanupLastWidgetContent();\n  },\n  methods: {\n    abortHttpRequestIfNeeded() {\n      if (this.lastWidgetAbortController) {\n        this.lastWidgetAbortController.abort();\n        this.lastWidgetAbortController = null;\n      }\n    },\n    cleanupLastWidgetContent() {\n      const widgetContent = this.$refs.widgetContent as HTMLElement;\n      Matomo.helper.destroyVueComponent(widgetContent);\n      if (widgetContent) {\n        widgetContent.innerHTML = '';\n      }\n    },\n    getWidgetUrl(parameters?: QueryParameters): QueryParameters {\n      const urlParams = MatomoUrl.parsed.value;\n\n      let fullParameters: QueryParameters = { ...(parameters || {}) };\n\n      const paramsToForward = Object.keys({\n        ...MatomoUrl.hashParsed.value,\n        idSite: '',\n        period: '',\n        date: '',\n        segment: '',\n        widget: '',\n      });\n\n      paramsToForward.forEach((key) => {\n        if (key === 'category' || key === 'subcategory') {\n          return;\n        }\n\n        if (!(key in fullParameters)) {\n          fullParameters[key] = urlParams[key];\n        }\n      });\n\n      if (ComparisonsStoreInstance.isComparisonEnabled()) {\n        fullParameters = {\n          ...fullParameters,\n          comparePeriods: urlParams.comparePeriods,\n          compareDates: urlParams.compareDates,\n          compareSegments: urlParams.compareSegments,\n        };\n      }\n\n      if (!parameters || !('showtitle' in parameters)) {\n        fullParameters.showtitle = '1';\n      }\n\n      if (Matomo.shouldPropagateTokenAuth\n        && urlParams.token_auth\n      ) {\n        if (!Matomo.broadcast.isWidgetizeRequestWithoutSession()) {\n          fullParameters.force_api_session = '1';\n        }\n        fullParameters.token_auth = urlParams.token_auth;\n      }\n\n      fullParameters.random = Math.floor(Math.random() * 10000);\n\n      return fullParameters;\n    },\n    loadWidgetUrl(parameters: QueryParameters, thisChangeId: number) {\n      this.loading = true;\n\n      this.abortHttpRequestIfNeeded();\n      this.cleanupLastWidgetContent();\n\n      this.lastWidgetAbortController = new AbortController();\n\n      AjaxHelper.fetch(this.getWidgetUrl(parameters), {\n        format: 'html',\n        abortController: this.lastWidgetAbortController,\n      }).then((response) => {\n        if (thisChangeId !== this.changeCounter || typeof response !== 'string') {\n          // another widget was requested meanwhile, ignore this response\n          return;\n        }\n\n        this.lastWidgetAbortController = null;\n        this.loading = false;\n        this.loadingFailed = false;\n\n        const widgetContent = this.$refs.widgetContent as HTMLElement;\n        window.$(widgetContent).html(response);\n        const $content = window.$(widgetContent).children();\n\n        if (this.widgetName) {\n          // we need to respect the widget title, which overwrites a possibly set report title\n          let $title = $content.find('> .card-content .card-title');\n          if (!$title.length) {\n            $title = $content.find('> h2');\n          }\n\n          if ($title.length) {\n            // required to use htmlEntities since it also escapes '{{' format items\n            $title.html(Matomo.helper.htmlEntities(this.widgetName));\n          }\n        }\n\n        Matomo.helper.compileVueEntryComponents($content);\n\n        NotificationsStore.parseNotificationDivs();\n\n        setTimeout(() => {\n          Matomo.postEvent('widget:loaded', {\n            parameters,\n            element: $content,\n          });\n        });\n      }).catch((response) => {\n        if (thisChangeId !== this.changeCounter) {\n          // another widget was requested meanwhile, ignore this response\n          return;\n        }\n\n        this.lastWidgetAbortController = null;\n        this.cleanupLastWidgetContent();\n\n        this.loading = false;\n\n        if (response.xhrStatus === 'abort') {\n          return;\n        }\n\n        if (response.status === 429) {\n          this.loadingFailedRateLimit = true;\n        }\n\n        this.loadingFailed = true;\n      });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport { translate } from '../translate';\nimport Matomo from '../Matomo/Matomo';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { NotificationsStore } from '../Notification';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport ComparisonsStoreInstance from '../Comparisons/Comparisons.store.instance';\n\ninterface WidgetLoaderState {\n  loading: boolean;\n  loadingFailed: boolean;\n  loadingFailedRateLimit: boolean;\n  changeCounter: number;\n  lastWidgetAbortController: null|AbortController;\n}\n\n/**\n * Loads any custom widget or URL based on the given parameters.\n *\n * The currently active idSite, period, date and segment (if needed) is automatically\n * appended to the parameters. If this widget is removed from the DOM and requests are in\n * progress, these requests will be aborted. A loading message or an error message on failure\n * is shown as well. It's kinda similar to ng-include but there it is not possible to\n * listen to HTTP errors etc.\n *\n * Example:\n * <WidgetLoader :widget-params=\"{module: '', action: '', ...}\"/>\n */\nexport default defineComponent({\n  props: {\n    widgetParams: Object,\n    widgetName: String,\n    loadingMessage: String,\n  },\n  components: {\n    ActivityIndicator,\n  },\n  data(): WidgetLoaderState {\n    return {\n      loading: false,\n      loadingFailed: false,\n      loadingFailedRateLimit: false,\n      changeCounter: 0,\n      lastWidgetAbortController: null,\n    };\n  },\n  watch: {\n    widgetParams(parameters: QueryParameters) {\n      if (parameters) {\n        this.loadWidgetUrl(parameters, this.changeCounter += 1);\n      }\n    },\n  },\n  computed: {\n    finalLoadingMessage() {\n      if (this.loadingMessage) {\n        return this.loadingMessage;\n      }\n\n      if (!this.widgetName) {\n        return translate('General_LoadingData');\n      }\n\n      return translate('General_LoadingPopover', this.widgetName);\n    },\n    hasErrorFaqLink() {\n      const isGeneralSettingsAdminEnabled = Matomo.config.enable_general_settings_admin;\n      const isPluginsAdminEnabled = Matomo.config.enable_plugins_admin;\n\n      return Matomo.hasSuperUserAccess\n        && (isGeneralSettingsAdminEnabled\n          || isPluginsAdminEnabled);\n    },\n  },\n  mounted() {\n    if (this.widgetParams) {\n      this.loadWidgetUrl(this.widgetParams as QueryParameters, this.changeCounter += 1);\n    }\n  },\n  beforeUnmount() {\n    this.cleanupLastWidgetContent();\n  },\n  methods: {\n    abortHttpRequestIfNeeded() {\n      if (this.lastWidgetAbortController) {\n        this.lastWidgetAbortController.abort();\n        this.lastWidgetAbortController = null;\n      }\n    },\n    cleanupLastWidgetContent() {\n      const widgetContent = this.$refs.widgetContent as HTMLElement;\n      Matomo.helper.destroyVueComponent(widgetContent);\n      if (widgetContent) {\n        widgetContent.innerHTML = '';\n      }\n    },\n    getWidgetUrl(parameters?: QueryParameters): QueryParameters {\n      const urlParams = MatomoUrl.parsed.value;\n\n      let fullParameters: QueryParameters = { ...(parameters || {}) };\n\n      const paramsToForward = Object.keys({\n        ...MatomoUrl.hashParsed.value,\n        idSite: '',\n        period: '',\n        date: '',\n        segment: '',\n        widget: '',\n      });\n\n      paramsToForward.forEach((key) => {\n        if (key === 'category' || key === 'subcategory') {\n          return;\n        }\n\n        if (!(key in fullParameters)) {\n          fullParameters[key] = urlParams[key];\n        }\n      });\n\n      if (ComparisonsStoreInstance.isComparisonEnabled()) {\n        fullParameters = {\n          ...fullParameters,\n          comparePeriods: urlParams.comparePeriods,\n          compareDates: urlParams.compareDates,\n          compareSegments: urlParams.compareSegments,\n        };\n      }\n\n      if (!parameters || !('showtitle' in parameters)) {\n        fullParameters.showtitle = '1';\n      }\n\n      if (Matomo.shouldPropagateTokenAuth\n        && urlParams.token_auth\n      ) {\n        if (!Matomo.broadcast.isWidgetizeRequestWithoutSession()) {\n          fullParameters.force_api_session = '1';\n        }\n        fullParameters.token_auth = urlParams.token_auth;\n      }\n\n      fullParameters.random = Math.floor(Math.random() * 10000);\n\n      return fullParameters;\n    },\n    loadWidgetUrl(parameters: QueryParameters, thisChangeId: number) {\n      this.loading = true;\n\n      this.abortHttpRequestIfNeeded();\n      this.cleanupLastWidgetContent();\n\n      this.lastWidgetAbortController = new AbortController();\n\n      AjaxHelper.fetch(this.getWidgetUrl(parameters), {\n        format: 'html',\n        abortController: this.lastWidgetAbortController,\n      }).then((response) => {\n        if (thisChangeId !== this.changeCounter || typeof response !== 'string') {\n          // another widget was requested meanwhile, ignore this response\n          return;\n        }\n\n        this.lastWidgetAbortController = null;\n        this.loading = false;\n        this.loadingFailed = false;\n\n        const widgetContent = this.$refs.widgetContent as HTMLElement;\n        window.$(widgetContent).html(response);\n        const $content = window.$(widgetContent).children();\n\n        if (this.widgetName) {\n          // we need to respect the widget title, which overwrites a possibly set report title\n          let $title = $content.find('> .card-content .card-title');\n          if (!$title.length) {\n            $title = $content.find('> h2');\n          }\n\n          if ($title.length) {\n            // required to use htmlEntities since it also escapes '{{' format items\n            $title.html(Matomo.helper.htmlEntities(this.widgetName));\n          }\n        }\n\n        Matomo.helper.compileVueEntryComponents($content);\n\n        NotificationsStore.parseNotificationDivs();\n\n        setTimeout(() => {\n          Matomo.postEvent('widget:loaded', {\n            parameters,\n            element: $content,\n          });\n        });\n      }).catch((response) => {\n        if (thisChangeId !== this.changeCounter) {\n          // another widget was requested meanwhile, ignore this response\n          return;\n        }\n\n        this.lastWidgetAbortController = null;\n        this.cleanupLastWidgetContent();\n\n        this.loading = false;\n\n        if (response.xhrStatus === 'abort') {\n          return;\n        }\n\n        if (response.status === 429) {\n          this.loadingFailedRateLimit = true;\n        }\n\n        this.loadingFailed = true;\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetLoader.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetLoader.vue?vue&type=script&lang=ts\"","import { render } from \"./WidgetLoader.vue?vue&type=template&id=57210b14\"\nimport script from \"./WidgetLoader.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetLoader.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"widget-container\">\n    <div\n      v-for=\"(widget, index) in actualContainer\"\n      :key=\"index\"\n    >\n      <div>\n        <Widget\n          :widget=\"widget\"\n          :prevent-recursion=\"true\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport { Widget as WidgetData } from '../Widget/types';\n\n// since we're recursing, don't import the plugin directly\nconst Widget = useExternalPluginComponent('CoreHome', 'Widget');\n\nexport default defineComponent({\n  props: {\n    container: {\n      type: Array,\n      required: true,\n    },\n  },\n  components: {\n    Widget,\n  },\n  computed: {\n    actualContainer() {\n      const container = this.container as WidgetData[];\n\n      if (!container?.[0]?.parameters) {\n        return container;\n      }\n\n      const [widget] = container;\n      const isWidgetized = widget.parameters?.widget === '1' || widget.parameters?.widget === 1;\n\n      const isGraphEvolution = isWidgetized && widget.viewDataTable === 'graphEvolution';\n\n      // we hide the first title for Visits Overview with Graph and Goal Overview\n      const firstWidget = isGraphEvolution\n        ? { ...widget, parameters: { ...widget.parameters, showtitle: '0' } }\n        : widget;\n\n      return [\n        firstWidget,\n        ...container.slice(1),\n      ];\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport { Widget as WidgetData } from '../Widget/types';\n\n// since we're recursing, don't import the plugin directly\nconst Widget = useExternalPluginComponent('CoreHome', 'Widget');\n\nexport default defineComponent({\n  props: {\n    container: {\n      type: Array,\n      required: true,\n    },\n  },\n  components: {\n    Widget,\n  },\n  computed: {\n    actualContainer() {\n      const container = this.container as WidgetData[];\n\n      if (!container?.[0]?.parameters) {\n        return container;\n      }\n\n      const [widget] = container;\n      const isWidgetized = widget.parameters?.widget === '1' || widget.parameters?.widget === 1;\n\n      const isGraphEvolution = isWidgetized && widget.viewDataTable === 'graphEvolution';\n\n      // we hide the first title for Visits Overview with Graph and Goal Overview\n      const firstWidget = isGraphEvolution\n        ? { ...widget, parameters: { ...widget.parameters, showtitle: '0' } }\n        : widget;\n\n      return [\n        firstWidget,\n        ...container.slice(1),\n      ];\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetContainer.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetContainer.vue?vue&type=script&lang=ts\"","import { render } from \"./WidgetContainer.vue?vue&type=template&id=24121adc\"\nimport script from \"./WidgetContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetContainer.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"reportsByDimensionView\">\n    <div class=\"entityList\">\n      <div\n        class=\"dimensionCategory\"\n        v-for=\"category in widgetsByCategory\"\n        :key=\"category.name\"\n      >\n        {{ category.name }}\n        <ul class=\"listCircle\">\n          <li\n            class=\"reportDimension\"\n            v-for=\"widget in category.widgets\"\n            :key=\"widget.uniqueId\"\n            :class=\"{ activeDimension: selectedWidget.uniqueId === widget.uniqueId }\"\n            @click=\"selectWidget(widget)\"\n          >\n            <span class=\"dimension\">{{ widget.name }}</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"reportContainer\">\n      <WidgetLoader\n        v-if=\"selectedWidget.parameters\"\n        :widget-params=\"selectedWidget.parameters\"\n        class=\"dimensionReport\"\n      />\n    </div>\n    <div class=\"clear\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport WidgetLoader from '../WidgetLoader/WidgetLoader.vue';\nimport { Widget } from '../Widget/types';\nimport { sortOrderables } from '../Orderable';\n\ninterface WidgetByDimensionContainerState {\n  selectedWidget: Widget|null;\n}\n\ninterface WidgetCategory {\n  name: string;\n  order: number;\n  widgets: Widget[];\n}\n\nexport default defineComponent({\n  props: {\n    widgets: Array,\n  },\n  components: {\n    WidgetLoader,\n  },\n  data(): WidgetByDimensionContainerState {\n    return {\n      selectedWidget: null,\n    };\n  },\n  created() {\n    [this.selectedWidget] = this.widgetsSorted;\n  },\n  computed: {\n    widgetsSorted(): Widget[] {\n      return sortOrderables(this.widgets as Widget[]);\n    },\n    widgetsByCategory() {\n      const byCategory: Record<string, WidgetCategory> = {};\n\n      this.widgetsSorted.forEach((widget) => {\n        const category = widget.subcategory?.name;\n        if (!category) {\n          return;\n        }\n\n        if (!byCategory[category]) {\n          byCategory[category] = { name: category, order: widget.order, widgets: [] };\n        }\n\n        byCategory[category].widgets!.push(widget);\n      });\n\n      return sortOrderables(Object.values(byCategory));\n    },\n  },\n  methods: {\n    selectWidget(widget: Widget) {\n      // we copy to force rerender if selecting same widget\n      this.selectedWidget = { ...widget };\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport WidgetLoader from '../WidgetLoader/WidgetLoader.vue';\nimport { Widget } from '../Widget/types';\nimport { sortOrderables } from '../Orderable';\n\ninterface WidgetByDimensionContainerState {\n  selectedWidget: Widget|null;\n}\n\ninterface WidgetCategory {\n  name: string;\n  order: number;\n  widgets: Widget[];\n}\n\nexport default defineComponent({\n  props: {\n    widgets: Array,\n  },\n  components: {\n    WidgetLoader,\n  },\n  data(): WidgetByDimensionContainerState {\n    return {\n      selectedWidget: null,\n    };\n  },\n  created() {\n    [this.selectedWidget] = this.widgetsSorted;\n  },\n  computed: {\n    widgetsSorted(): Widget[] {\n      return sortOrderables(this.widgets as Widget[]);\n    },\n    widgetsByCategory() {\n      const byCategory: Record<string, WidgetCategory> = {};\n\n      this.widgetsSorted.forEach((widget) => {\n        const category = widget.subcategory?.name;\n        if (!category) {\n          return;\n        }\n\n        if (!byCategory[category]) {\n          byCategory[category] = { name: category, order: widget.order, widgets: [] };\n        }\n\n        byCategory[category].widgets!.push(widget);\n      });\n\n      return sortOrderables(Object.values(byCategory));\n    },\n  },\n  methods: {\n    selectWidget(widget: Widget) {\n      // we copy to force rerender if selecting same widget\n      this.selectedWidget = { ...widget };\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetByDimensionContainer.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetByDimensionContainer.vue?vue&type=script&lang=ts\"","import { render } from \"./WidgetByDimensionContainer.vue?vue&type=template&id=3681f928\"\nimport script from \"./WidgetByDimensionContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetByDimensionContainer.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div\n    v-if=\"actualWidget && showWidget\"\n    class=\"matomo-widget\"\n    :class=\"{'isFirstWidgetInPage': actualWidget.isFirstInPage}\"\n    :id=\"actualWidget.uniqueId\"\n    v-tooltips=\"{ content: tooltipContent }\"\n  >\n    <WidgetLoader\n      v-if=\"!actualWidget.isContainer && actualWidget.parameters\"\n      :widget-params=\"actualWidget.parameters\"\n      :widget-name=\"actualWidget.name\"\n    />\n    <div v-if=\"actualWidget.isContainer\n      && actualWidget.layout !== 'ByDimension'\n      && !this.preventRecursion\"\n    >\n      <div>\n        <WidgetContainer :container=\"actualWidget.widgets\" />\n      </div>\n    </div>\n    <div v-if=\"actualWidget.isContainer && actualWidget.layout === 'ByDimension'\">\n      <div>\n        <WidgetByDimensionContainer :widgets=\"actualWidget.widgets\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { DeepReadonly, defineComponent } from 'vue';\nimport WidgetLoader from '../WidgetLoader/WidgetLoader.vue';\nimport WidgetContainer from '../WidgetContainer/WidgetContainer.vue';\nimport WidgetByDimensionContainer from '../WidgetByDimensionContainer/WidgetByDimensionContainer.vue';\nimport WidgetsStoreInstance, { getWidgetChildren } from './Widgets.store';\nimport {\n  Widget as WidgetData,\n  WidgetContainer as WidgetDataContainer,\n} from './types';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport ReportMetadataStoreInstance from '../ReportMetadata/ReportMetadata.store';\nimport Tooltips from '../Tooltips/Tooltips';\n\nfunction findContainer(\n  widgetsByCategory: typeof WidgetsStoreInstance.widgets.value,\n  containerId: string,\n): DeepReadonly<WidgetData>|undefined {\n  let widget: DeepReadonly<WidgetData>|undefined = undefined;\n  Object.values(widgetsByCategory || {}).some((widgets: DeepReadonly<WidgetData[]>) => {\n    widget = widgets.find((w) => w && w.isContainer && w.parameters?.containerId === containerId);\n    return widget;\n  });\n  return widget;\n}\n\n/**\n * Renders any kind of widget. If you have a widget and you want to have it rendered, use this\n * directive. It will display a name on top and the actual widget below. It can handle any kind\n * of widget, no matter whether it is a regular widget or a container.\n *\n * @param {Object} piwikWidget  A widget object as returned by the WidgetMetadata API.\n * @param {Object} piwikWidget.middlewareParameters   If present, we will request a URL using the\n *                                                    given parameters and only if this URL\n *                                                    returns a JSON `true` the widget will be\n *                                                    shown. Otherwise the widget won't be shown.\n * @param {String} containerId  If you do not have a widget object but a containerId we will find\n *                              the correct widget object based on the given containerId. Be aware\n *                              that we might not find the widget if it is for example not\n *                              available for the current user or period/date.\n * @param {Boolean} widgetized  true if the widget is widgetized (eg in Dashboard or exported).\n *                              In this case we will add a URL parameter widget=1 to all widgets.\n *                              Eg sparklines will be then displayed one after another\n *                              (vertically aligned) instead of two next to each other.\n *\n * Example:\n * <Widget :widget=\"widget\"></Widget>\n * // in this case we will find the correct widget automatically\n * <Widget :containerid=\"widgetGoalsOverview\"></Widget>\n * // disables rating feature, no initial headline\n * <Widget :widget=\"widget\" :widetized=\"true\"></Widget>\n */\nexport default defineComponent({\n  props: {\n    widget: Object,\n    widgetized: Boolean,\n    containerid: String,\n    preventRecursion: Boolean,\n  },\n  components: {\n    WidgetLoader,\n    WidgetContainer,\n    WidgetByDimensionContainer,\n  },\n  directives: {\n    Tooltips,\n  },\n  data() {\n    return {\n      showWidget: false,\n    };\n  },\n  setup() {\n    function tooltipContent(this: HTMLElement) {\n      const $this = window.$(this) as JQuery;\n      if ($this.hasClass('matomo-form-field')) {\n        // do not show it for form fields\n        return '';\n      }\n\n      const title = window.$(this).attr('title') || '';\n      return window.vueSanitize(title.replace(/\\n/g, '<br />'));\n    }\n\n    return {\n      tooltipContent,\n    };\n  },\n  created() {\n    const { actualWidget } = this;\n\n    if (actualWidget && actualWidget.middlewareParameters) {\n      const params = actualWidget.middlewareParameters as unknown as QueryParameters;\n      AjaxHelper.fetch(params).then((response) => {\n        this.showWidget = !!response;\n      });\n    } else {\n      this.showWidget = true;\n    }\n  },\n  computed: {\n    allWidgets() {\n      return WidgetsStoreInstance.widgets.value;\n    },\n    actualWidget() {\n      const widget = this.widget as WidgetData;\n\n      if (widget) {\n        const result = { ...widget };\n\n        if (widget && widget.isReport && !widget.documentation) {\n          const report = ReportMetadataStoreInstance.findReport(widget.module, widget.action);\n          if (report && report.documentation) {\n            result.documentation = report.documentation;\n          }\n        }\n\n        return widget;\n      }\n\n      if (this.containerid) {\n        const containerWidget = findContainer(this.allWidgets, this.containerid);\n        if (containerWidget) {\n          const result = { ...containerWidget };\n\n          if (this.widgetized) {\n            result.isFirstInPage = true;\n            result.parameters = { ...result.parameters, widget: '1' };\n\n            const widgets = getWidgetChildren(result);\n            if (widgets) {\n              (result as WidgetDataContainer).widgets = widgets.map((w) => ({\n                ...w,\n                parameters: {\n                  ...w.parameters,\n                  widget: '1',\n                  containerId: this.containerid!,\n                },\n              }));\n            }\n          }\n\n          return result;\n        }\n      }\n\n      return null;\n    },\n  },\n});\n</script>\n","\nimport { DeepReadonly, defineComponent } from 'vue';\nimport WidgetLoader from '../WidgetLoader/WidgetLoader.vue';\nimport WidgetContainer from '../WidgetContainer/WidgetContainer.vue';\nimport WidgetByDimensionContainer from '../WidgetByDimensionContainer/WidgetByDimensionContainer.vue';\nimport WidgetsStoreInstance, { getWidgetChildren } from './Widgets.store';\nimport {\n  Widget as WidgetData,\n  WidgetContainer as WidgetDataContainer,\n} from './types';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport ReportMetadataStoreInstance from '../ReportMetadata/ReportMetadata.store';\nimport Tooltips from '../Tooltips/Tooltips';\n\nfunction findContainer(\n  widgetsByCategory: typeof WidgetsStoreInstance.widgets.value,\n  containerId: string,\n): DeepReadonly<WidgetData>|undefined {\n  let widget: DeepReadonly<WidgetData>|undefined = undefined;\n  Object.values(widgetsByCategory || {}).some((widgets: DeepReadonly<WidgetData[]>) => {\n    widget = widgets.find((w) => w && w.isContainer && w.parameters?.containerId === containerId);\n    return widget;\n  });\n  return widget;\n}\n\n/**\n * Renders any kind of widget. If you have a widget and you want to have it rendered, use this\n * directive. It will display a name on top and the actual widget below. It can handle any kind\n * of widget, no matter whether it is a regular widget or a container.\n *\n * @param {Object} piwikWidget  A widget object as returned by the WidgetMetadata API.\n * @param {Object} piwikWidget.middlewareParameters   If present, we will request a URL using the\n *                                                    given parameters and only if this URL\n *                                                    returns a JSON `true` the widget will be\n *                                                    shown. Otherwise the widget won't be shown.\n * @param {String} containerId  If you do not have a widget object but a containerId we will find\n *                              the correct widget object based on the given containerId. Be aware\n *                              that we might not find the widget if it is for example not\n *                              available for the current user or period/date.\n * @param {Boolean} widgetized  true if the widget is widgetized (eg in Dashboard or exported).\n *                              In this case we will add a URL parameter widget=1 to all widgets.\n *                              Eg sparklines will be then displayed one after another\n *                              (vertically aligned) instead of two next to each other.\n *\n * Example:\n * <Widget :widget=\"widget\"></Widget>\n * // in this case we will find the correct widget automatically\n * <Widget :containerid=\"widgetGoalsOverview\"></Widget>\n * // disables rating feature, no initial headline\n * <Widget :widget=\"widget\" :widetized=\"true\"></Widget>\n */\nexport default defineComponent({\n  props: {\n    widget: Object,\n    widgetized: Boolean,\n    containerid: String,\n    preventRecursion: Boolean,\n  },\n  components: {\n    WidgetLoader,\n    WidgetContainer,\n    WidgetByDimensionContainer,\n  },\n  directives: {\n    Tooltips,\n  },\n  data() {\n    return {\n      showWidget: false,\n    };\n  },\n  setup() {\n    function tooltipContent(this: HTMLElement) {\n      const $this = window.$(this) as JQuery;\n      if ($this.hasClass('matomo-form-field')) {\n        // do not show it for form fields\n        return '';\n      }\n\n      const title = window.$(this).attr('title') || '';\n      return window.vueSanitize(title.replace(/\\n/g, '<br />'));\n    }\n\n    return {\n      tooltipContent,\n    };\n  },\n  created() {\n    const { actualWidget } = this;\n\n    if (actualWidget && actualWidget.middlewareParameters) {\n      const params = actualWidget.middlewareParameters as unknown as QueryParameters;\n      AjaxHelper.fetch(params).then((response) => {\n        this.showWidget = !!response;\n      });\n    } else {\n      this.showWidget = true;\n    }\n  },\n  computed: {\n    allWidgets() {\n      return WidgetsStoreInstance.widgets.value;\n    },\n    actualWidget() {\n      const widget = this.widget as WidgetData;\n\n      if (widget) {\n        const result = { ...widget };\n\n        if (widget && widget.isReport && !widget.documentation) {\n          const report = ReportMetadataStoreInstance.findReport(widget.module, widget.action);\n          if (report && report.documentation) {\n            result.documentation = report.documentation;\n          }\n        }\n\n        return widget;\n      }\n\n      if (this.containerid) {\n        const containerWidget = findContainer(this.allWidgets, this.containerid);\n        if (containerWidget) {\n          const result = { ...containerWidget };\n\n          if (this.widgetized) {\n            result.isFirstInPage = true;\n            result.parameters = { ...result.parameters, widget: '1' };\n\n            const widgets = getWidgetChildren(result);\n            if (widgets) {\n              (result as WidgetDataContainer).widgets = widgets.map((w) => ({\n                ...w,\n                parameters: {\n                  ...w.parameters,\n                  widget: '1',\n                  containerId: this.containerid!,\n                },\n              }));\n            }\n          }\n\n          return result;\n        }\n      }\n\n      return null;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Widget.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Widget.vue?vue&type=script&lang=ts\"","import { render } from \"./Widget.vue?vue&type=template&id=adfeebbe\"\nimport script from \"./Widget.vue?vue&type=script&lang=ts\"\nexport * from \"./Widget.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"reporting-page\">\n    <ActivityIndicator\n      :loading=\"loading\"\n    />\n    <div v-show=\"hasNoPage\">{{ translate('CoreHome_NoSuchPage') }}</div>\n    <div\n      class=\"row\"\n      v-for=\"widget in widgets\"\n      :key=\"widget.uniqueId\"\n    >\n      <Widget\n        class=\"col s12 fullWidgetColumn\"\n        v-if=\"!widget.group\"\n        :widget=\"widget\"\n      />\n      <div\n        v-if=\"widget.group\"\n        class=\"col s12 l6 leftWidgetColumn\"\n      >\n        <Widget\n          v-for=\"widgetInGroup in widget.left\"\n          :widget=\"widgetInGroup\"\n          :key=\"widgetInGroup.uniqueId\"\n        />\n      </div>\n      <div\n        v-if=\"widget.group\"\n        class=\"col s12 l6 rightWidgetColumn\"\n      >\n        <Widget\n          v-for=\"widgetInGroup in widget.right\"\n          :widget=\"widgetInGroup\"\n          :key=\"widgetInGroup.uniqueId\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch } from 'vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport Widget from '../Widget/Widget.vue';\nimport ReportingPageStoreInstance from './ReportingPage.store';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { Periods } from '../Periods';\nimport { NotificationsStore } from '../Notification';\nimport { translate } from '../translate';\nimport Matomo from '../Matomo/Matomo';\nimport ReportingPagesStoreInstance from '../ReportingPages/ReportingPages.store';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\n\nfunction showOnlyRawDataNotification() {\n  const params = 'category=General_Visitors&subcategory=Live_VisitorLog';\n  const url = window.broadcast.buildReportingUrl(params);\n  NotificationsStore.show({\n    id: 'onlyRawData',\n    animate: false,\n    context: 'info',\n    message: translate('CoreHome_PeriodHasOnlyRawData', `<a href=\"${url}\">`, '</a>'),\n    type: 'transient',\n  });\n}\n\nfunction hideOnlyRawDataNoticifation() {\n  NotificationsStore.remove('onlyRawData');\n}\n\ninterface ReportingPageState {\n  loading: boolean;\n  hasRawData: boolean;\n  hasNoVisits: boolean;\n  dateLastChecked: Date|null;\n  hasNoPage: boolean;\n}\n\ninterface LoadPageArgs {\n  category: string;\n  subcategory: string;\n  promise?: Promise<void>;\n}\n\nexport default defineComponent({\n  components: {\n    ActivityIndicator,\n    Widget,\n  },\n  data(): ReportingPageState {\n    return {\n      loading: false,\n      hasRawData: false,\n      hasNoVisits: false,\n      dateLastChecked: null,\n      hasNoPage: false,\n    };\n  },\n  created() {\n    ReportingPageStoreInstance.resetPage();\n\n    this.loading = true; // we only set loading on initial load\n    this.renderInitialPage();\n\n    watch(() => MatomoUrl.parsed.value, (newValue, oldValue) => {\n      if (newValue.category === oldValue.category\n        && newValue.subcategory === oldValue.subcategory\n        && newValue.period === oldValue.period\n        && newValue.date === oldValue.date\n        && newValue.segment === oldValue.segment\n        && JSON.stringify(newValue.compareDates) === JSON.stringify(oldValue.compareDates)\n        && JSON.stringify(newValue.comparePeriods) === JSON.stringify(oldValue.comparePeriods)\n        && JSON.stringify(newValue.compareSegments) === JSON.stringify(oldValue.compareSegments)\n        && JSON.stringify(newValue.columns || '') === JSON.stringify(oldValue.columns || '')\n      ) {\n        // this page is already loaded\n        return;\n      }\n\n      if (newValue.date !== oldValue.date || newValue.period !== oldValue.period) {\n        hideOnlyRawDataNoticifation();\n        this.dateLastChecked = null;\n        this.hasRawData = false;\n        this.hasNoVisits = false;\n      }\n\n      this.renderPage(newValue.category as string, newValue.subcategory as string);\n    });\n\n    Matomo.on('loadPage', (category: string, subcategory: string) => {\n      this.renderPage(category, subcategory);\n    });\n  },\n  computed: {\n    widgets() {\n      return ReportingPageStoreInstance.widgets.value;\n    },\n  },\n  methods: {\n    renderPage(category: string, subcategory: string) {\n      if (!category || !subcategory) {\n        ReportingPageStoreInstance.resetPage();\n        this.loading = false;\n        return;\n      }\n\n      const parsedUrl = MatomoUrl.parsed.value;\n      const currentPeriod = parsedUrl.period as string;\n      const currentDate = parsedUrl.date as string;\n\n      try {\n        Periods.parse(currentPeriod, currentDate);\n      } catch (e) {\n        NotificationsStore.show({\n          id: 'invalidDate',\n          animate: false,\n          context: 'error',\n          message: translate('CoreHome_DateInvalid'),\n          type: 'transient',\n        });\n\n        ReportingPageStoreInstance.resetPage();\n        this.loading = false;\n        return;\n      }\n\n      NotificationsStore.remove('invalidDate');\n\n      Matomo.postEvent('matomoPageChange', {});\n\n      NotificationsStore.clearTransientNotifications();\n\n      if (Periods.parse(currentPeriod, currentDate).containsToday()) {\n        this.showOnlyRawDataMessageIfRequired();\n      }\n\n      const params: LoadPageArgs = { category, subcategory };\n      Matomo.postEvent('ReportingPage.loadPage', params);\n      if (params.promise) {\n        this.loading = true;\n        Promise.resolve(params.promise).finally(() => {\n          this.loading = false;\n        });\n        return;\n      }\n\n      ReportingPageStoreInstance.fetchPage(category, subcategory).then(() => {\n        const hasNoPage = !ReportingPageStoreInstance.page.value;\n        if (hasNoPage) {\n          const page = ReportingPagesStoreInstance.findPageInCategory(category);\n          if (page && page.subcategory) {\n            MatomoUrl.updateHash({\n              ...MatomoUrl.hashParsed.value,\n              subcategory: page.subcategory.id,\n            });\n            return;\n          }\n        }\n\n        this.hasNoPage = hasNoPage;\n        this.loading = false;\n      });\n    },\n    renderInitialPage() {\n      const parsed = MatomoUrl.parsed.value;\n      this.renderPage(parsed.category as string, parsed.subcategory as string);\n    },\n    showOnlyRawDataMessageIfRequired() {\n      if (!Matomo.visitorLogEnabled) {\n        return;\n      }\n\n      if (this.hasRawData && this.hasNoVisits) {\n        showOnlyRawDataNotification();\n      }\n\n      const parsedUrl = MatomoUrl.parsed.value;\n\n      const { segment } = parsedUrl;\n      if (segment) {\n        hideOnlyRawDataNoticifation();\n        return;\n      }\n\n      const subcategoryExceptions = [\n        'Live_VisitorLog',\n        'General_RealTime',\n        'UserCountryMap_RealTimeMap',\n        'MediaAnalytics_TypeAudienceLog',\n        'MediaAnalytics_TypeRealTime',\n        'FormAnalytics_TypeRealTime',\n        'Goals_AddNewGoal',\n      ];\n\n      const categoryExceptions = [\n        'HeatmapSessionRecording_Heatmaps',\n        'HeatmapSessionRecording_SessionRecordings',\n        'Marketplace_Marketplace',\n      ];\n\n      const subcategory = parsedUrl.subcategory as string;\n      const category = parsedUrl.category as string;\n      if (subcategoryExceptions.indexOf(subcategory) !== -1\n        || categoryExceptions.indexOf(category) !== -1\n        || subcategory.toLowerCase().indexOf('manage') !== -1\n      ) {\n        hideOnlyRawDataNoticifation();\n        return;\n      }\n\n      const minuteInMilliseconds = 60000;\n      if (this.dateLastChecked\n        && ((new Date()).valueOf() - this.dateLastChecked.valueOf()) < minuteInMilliseconds\n      ) {\n        return;\n      }\n\n      AjaxHelper.fetch({ method: 'VisitsSummary.getVisits' }).then((json) => {\n        this.dateLastChecked = new Date();\n\n        if (json.value > 0) {\n          this.hasNoVisits = false;\n          hideOnlyRawDataNoticifation();\n          return undefined;\n        }\n\n        this.hasNoVisits = true;\n\n        if (this.hasRawData) {\n          showOnlyRawDataNotification();\n          return undefined;\n        }\n\n        return AjaxHelper.fetch({\n          method: 'Live.getLastVisitsDetails',\n          filter_limit: 1,\n          doNotFetchActions: 1,\n        }).then((lastVisits) => {\n          if (!lastVisits || lastVisits.length === 0) {\n            this.hasRawData = false;\n            hideOnlyRawDataNoticifation();\n            return;\n          }\n\n          this.hasRawData = true;\n          showOnlyRawDataNotification();\n        });\n      });\n    },\n  },\n});\n</script>\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport {\n  computed,\n  DeepReadonly,\n  reactive,\n  readonly,\n} from 'vue';\nimport ReportingPagesStoreInstance, { Page } from '../ReportingPages/ReportingPages.store';\nimport ReportMetadataStoreInstance from '../ReportMetadata/ReportMetadata.store';\nimport { sortOrderables } from '../Orderable';\nimport { getWidgetChildren } from '../Widget/Widgets.store';\nimport {\n  GroupedWidgets,\n  Widget,\n  WidgetContainer,\n} from '../Widget/types';\n\ninterface ReportingMenuStoreState {\n  page?: DeepReadonly<Page>;\n}\n\nfunction shouldBeRenderedWithFullWidth(widget: Widget) {\n  // rather controller logic\n  if ((widget.isContainer && widget.layout && widget.layout === 'ByDimension')\n    || widget.viewDataTable === 'bydimension'\n  ) {\n    return true;\n  }\n\n  if (widget.isWide) {\n    return true;\n  }\n\n  return widget.viewDataTable\n    && (widget.viewDataTable === 'tableAllColumns'\n      || widget.viewDataTable === 'sparklines'\n      || widget.viewDataTable === 'graphEvolution');\n}\n\nfunction markWidgetsInFirstRowOfPage(widgets: (Widget|GroupedWidgets)[]) {\n  if (widgets && widgets[0]) {\n    const newWidgets: (Widget|GroupedWidgets)[] = [...widgets];\n\n    const groupedWidgets = widgets[0] as GroupedWidgets;\n    if (groupedWidgets.group) {\n      newWidgets[0] = {\n        ...newWidgets[0],\n        left: markWidgetsInFirstRowOfPage(groupedWidgets.left || []),\n        right: markWidgetsInFirstRowOfPage(groupedWidgets.right || []),\n      } as GroupedWidgets;\n    } else {\n      newWidgets[0] = { ...newWidgets[0], isFirstInPage: true };\n    }\n\n    return newWidgets;\n  }\n\n  return widgets;\n}\n\nexport class ReportingPageStore {\n  private privateState = reactive<ReportingMenuStoreState>({});\n\n  private state = computed(() => readonly(this.privateState));\n\n  readonly page = computed(() => this.state.value.page);\n\n  readonly widgets = computed(() => {\n    const page = this.page.value;\n    if (!page) {\n      return [];\n    }\n\n    let widgets: Widget[] = [];\n    const reportsToIgnore: Record<string, unknown> = {};\n\n    const isIgnoredReport = (widget: Widget) => widget.isReport\n      && reportsToIgnore[`${widget.module}.${widget.action}`];\n\n    const getRelatedReports = (widget: Widget) => {\n      if (!widget.isReport) {\n        return [];\n      }\n\n      const report = ReportMetadataStoreInstance.findReport(widget.module, widget.action);\n      if (!report || !report.relatedReports) {\n        return [];\n      }\n\n      return report.relatedReports;\n    };\n\n    (page.widgets || []).forEach((widget) => {\n      if (isIgnoredReport(widget)) {\n        return;\n      }\n\n      getRelatedReports(widget).forEach((report) => {\n        reportsToIgnore[`${report.module}.${report.action}`] = true;\n      });\n\n      widgets.push(widget);\n    });\n\n    widgets = sortOrderables(widgets);\n\n    if (widgets.length === 1) {\n      // if there is only one widget, we always display it full width\n      return markWidgetsInFirstRowOfPage(widgets);\n    }\n\n    const groupedWidgets: (Widget|GroupedWidgets)[] = [];\n    for (let i = 0; i < widgets.length; i += 1) {\n      const widget = widgets[i];\n\n      if (shouldBeRenderedWithFullWidth(widget)\n        || (widgets[i + 1] && shouldBeRenderedWithFullWidth(widgets[i + 1]))\n      ) {\n        groupedWidgets.push({\n          ...widget,\n          widgets: sortOrderables(getWidgetChildren(widget)),\n        } as WidgetContainer);\n      } else {\n        let counter = 0;\n        const left = [widget];\n        const right = [];\n\n        while (widgets[i + 1] && !shouldBeRenderedWithFullWidth(widgets[i + 1])) {\n          i += 1;\n          counter += 1;\n          if (counter % 2 === 0) {\n            left.push(widgets[i]);\n          } else {\n            right.push(widgets[i]);\n          }\n        }\n\n        groupedWidgets.push({ group: true, left, right } as GroupedWidgets);\n      }\n    }\n\n    const sortedWidgets = markWidgetsInFirstRowOfPage(groupedWidgets);\n    return sortedWidgets;\n  });\n\n  fetchPage(category: string, subcategory: string): Promise<ReportingPageStore['page']['value']> {\n    this.resetPage();\n\n    return Promise.all([\n      ReportingPagesStoreInstance.getAllPages(),\n      ReportMetadataStoreInstance.fetchReportMetadata(),\n    ]).then(() => {\n      this.privateState.page = ReportingPagesStoreInstance.findPage(category, subcategory);\n      return this.page.value;\n    });\n  }\n\n  resetPage(): void {\n    this.privateState.page = undefined;\n  }\n}\n\nexport default new ReportingPageStore();\n","\nimport { defineComponent, watch } from 'vue';\nimport ActivityIndicator from '../ActivityIndicator/ActivityIndicator.vue';\nimport Widget from '../Widget/Widget.vue';\nimport ReportingPageStoreInstance from './ReportingPage.store';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { Periods } from '../Periods';\nimport { NotificationsStore } from '../Notification';\nimport { translate } from '../translate';\nimport Matomo from '../Matomo/Matomo';\nimport ReportingPagesStoreInstance from '../ReportingPages/ReportingPages.store';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\n\nfunction showOnlyRawDataNotification() {\n  const params = 'category=General_Visitors&subcategory=Live_VisitorLog';\n  const url = window.broadcast.buildReportingUrl(params);\n  NotificationsStore.show({\n    id: 'onlyRawData',\n    animate: false,\n    context: 'info',\n    message: translate('CoreHome_PeriodHasOnlyRawData', `<a href=\"${url}\">`, '</a>'),\n    type: 'transient',\n  });\n}\n\nfunction hideOnlyRawDataNoticifation() {\n  NotificationsStore.remove('onlyRawData');\n}\n\ninterface ReportingPageState {\n  loading: boolean;\n  hasRawData: boolean;\n  hasNoVisits: boolean;\n  dateLastChecked: Date|null;\n  hasNoPage: boolean;\n}\n\ninterface LoadPageArgs {\n  category: string;\n  subcategory: string;\n  promise?: Promise<void>;\n}\n\nexport default defineComponent({\n  components: {\n    ActivityIndicator,\n    Widget,\n  },\n  data(): ReportingPageState {\n    return {\n      loading: false,\n      hasRawData: false,\n      hasNoVisits: false,\n      dateLastChecked: null,\n      hasNoPage: false,\n    };\n  },\n  created() {\n    ReportingPageStoreInstance.resetPage();\n\n    this.loading = true; // we only set loading on initial load\n    this.renderInitialPage();\n\n    watch(() => MatomoUrl.parsed.value, (newValue, oldValue) => {\n      if (newValue.category === oldValue.category\n        && newValue.subcategory === oldValue.subcategory\n        && newValue.period === oldValue.period\n        && newValue.date === oldValue.date\n        && newValue.segment === oldValue.segment\n        && JSON.stringify(newValue.compareDates) === JSON.stringify(oldValue.compareDates)\n        && JSON.stringify(newValue.comparePeriods) === JSON.stringify(oldValue.comparePeriods)\n        && JSON.stringify(newValue.compareSegments) === JSON.stringify(oldValue.compareSegments)\n        && JSON.stringify(newValue.columns || '') === JSON.stringify(oldValue.columns || '')\n      ) {\n        // this page is already loaded\n        return;\n      }\n\n      if (newValue.date !== oldValue.date || newValue.period !== oldValue.period) {\n        hideOnlyRawDataNoticifation();\n        this.dateLastChecked = null;\n        this.hasRawData = false;\n        this.hasNoVisits = false;\n      }\n\n      this.renderPage(newValue.category as string, newValue.subcategory as string);\n    });\n\n    Matomo.on('loadPage', (category: string, subcategory: string) => {\n      this.renderPage(category, subcategory);\n    });\n  },\n  computed: {\n    widgets() {\n      return ReportingPageStoreInstance.widgets.value;\n    },\n  },\n  methods: {\n    renderPage(category: string, subcategory: string) {\n      if (!category || !subcategory) {\n        ReportingPageStoreInstance.resetPage();\n        this.loading = false;\n        return;\n      }\n\n      const parsedUrl = MatomoUrl.parsed.value;\n      const currentPeriod = parsedUrl.period as string;\n      const currentDate = parsedUrl.date as string;\n\n      try {\n        Periods.parse(currentPeriod, currentDate);\n      } catch (e) {\n        NotificationsStore.show({\n          id: 'invalidDate',\n          animate: false,\n          context: 'error',\n          message: translate('CoreHome_DateInvalid'),\n          type: 'transient',\n        });\n\n        ReportingPageStoreInstance.resetPage();\n        this.loading = false;\n        return;\n      }\n\n      NotificationsStore.remove('invalidDate');\n\n      Matomo.postEvent('matomoPageChange', {});\n\n      NotificationsStore.clearTransientNotifications();\n\n      if (Periods.parse(currentPeriod, currentDate).containsToday()) {\n        this.showOnlyRawDataMessageIfRequired();\n      }\n\n      const params: LoadPageArgs = { category, subcategory };\n      Matomo.postEvent('ReportingPage.loadPage', params);\n      if (params.promise) {\n        this.loading = true;\n        Promise.resolve(params.promise).finally(() => {\n          this.loading = false;\n        });\n        return;\n      }\n\n      ReportingPageStoreInstance.fetchPage(category, subcategory).then(() => {\n        const hasNoPage = !ReportingPageStoreInstance.page.value;\n        if (hasNoPage) {\n          const page = ReportingPagesStoreInstance.findPageInCategory(category);\n          if (page && page.subcategory) {\n            MatomoUrl.updateHash({\n              ...MatomoUrl.hashParsed.value,\n              subcategory: page.subcategory.id,\n            });\n            return;\n          }\n        }\n\n        this.hasNoPage = hasNoPage;\n        this.loading = false;\n      });\n    },\n    renderInitialPage() {\n      const parsed = MatomoUrl.parsed.value;\n      this.renderPage(parsed.category as string, parsed.subcategory as string);\n    },\n    showOnlyRawDataMessageIfRequired() {\n      if (!Matomo.visitorLogEnabled) {\n        return;\n      }\n\n      if (this.hasRawData && this.hasNoVisits) {\n        showOnlyRawDataNotification();\n      }\n\n      const parsedUrl = MatomoUrl.parsed.value;\n\n      const { segment } = parsedUrl;\n      if (segment) {\n        hideOnlyRawDataNoticifation();\n        return;\n      }\n\n      const subcategoryExceptions = [\n        'Live_VisitorLog',\n        'General_RealTime',\n        'UserCountryMap_RealTimeMap',\n        'MediaAnalytics_TypeAudienceLog',\n        'MediaAnalytics_TypeRealTime',\n        'FormAnalytics_TypeRealTime',\n        'Goals_AddNewGoal',\n      ];\n\n      const categoryExceptions = [\n        'HeatmapSessionRecording_Heatmaps',\n        'HeatmapSessionRecording_SessionRecordings',\n        'Marketplace_Marketplace',\n      ];\n\n      const subcategory = parsedUrl.subcategory as string;\n      const category = parsedUrl.category as string;\n      if (subcategoryExceptions.indexOf(subcategory) !== -1\n        || categoryExceptions.indexOf(category) !== -1\n        || subcategory.toLowerCase().indexOf('manage') !== -1\n      ) {\n        hideOnlyRawDataNoticifation();\n        return;\n      }\n\n      const minuteInMilliseconds = 60000;\n      if (this.dateLastChecked\n        && ((new Date()).valueOf() - this.dateLastChecked.valueOf()) < minuteInMilliseconds\n      ) {\n        return;\n      }\n\n      AjaxHelper.fetch({ method: 'VisitsSummary.getVisits' }).then((json) => {\n        this.dateLastChecked = new Date();\n\n        if (json.value > 0) {\n          this.hasNoVisits = false;\n          hideOnlyRawDataNoticifation();\n          return undefined;\n        }\n\n        this.hasNoVisits = true;\n\n        if (this.hasRawData) {\n          showOnlyRawDataNotification();\n          return undefined;\n        }\n\n        return AjaxHelper.fetch({\n          method: 'Live.getLastVisitsDetails',\n          filter_limit: 1,\n          doNotFetchActions: 1,\n        }).then((lastVisits) => {\n          if (!lastVisits || lastVisits.length === 0) {\n            this.hasRawData = false;\n            hideOnlyRawDataNoticifation();\n            return;\n          }\n\n          this.hasRawData = true;\n          showOnlyRawDataNotification();\n        });\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportingPage.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportingPage.vue?vue&type=script&lang=ts\"","import { render } from \"./ReportingPage.vue?vue&type=template&id=e7476c22\"\nimport script from \"./ReportingPage.vue?vue&type=script&lang=ts\"\nexport * from \"./ReportingPage.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"report-export-popover row\" id=\"reportExport\">\n\n    <div class=\"col l6\">\n      <div name=\"format\">\n        <Field\n          :uicontrol=\"'radio'\"\n          :name=\"'format'\"\n          :title=\"translate('CoreHome_ExportFormat')\"\n          v-model=\"reportFormat\"\n          :full-width=\"true\"\n          :options=\"availableReportFormats[reportType]\"\n        />\n      </div>\n\n      <div>\n        <div name=\"option_flat\">\n          <Field\n            :uicontrol=\"'checkbox'\"\n            :name=\"'option_flat'\"\n            :title=\"translate('CoreHome_FlattenReport')\"\n            v-model=\"optionFlat\"\n            v-show=\"hasSubtables\"\n          >\n          </Field>\n        </div>\n      </div>\n      <div>\n        <div name=\"option_expanded\">\n          <Field\n            :uicontrol=\"'checkbox'\"\n            :name=\"'option_expanded'\"\n            :title=\"translate('CoreHome_ExpandSubtables')\"\n            v-model=\"optionExpanded\"\n            v-show=\"hasSubtables && !optionFlat\"\n          >\n          </Field>\n        </div>\n      </div>\n      <div>\n        <div name=\"option_format_metrics\">\n          <Field\n            :uicontrol=\"'checkbox'\"\n            :name=\"'option_format_metrics'\"\n            :title=\"translate('CoreHome_FormatMetrics')\"\n            v-model=\"optionFormatMetrics\"\n          >\n          </Field>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col l6\">\n      <div>\n        <div name=\"filter_type\">\n          <Field\n            :uicontrol=\"'radio'\"\n            :name=\"'filter_type'\"\n            :title=\"translate('CoreHome_ReportType')\"\n            v-model=\"reportType\"\n            :full-width=\"true\"\n            :options=\"availableReportTypes\"\n          >\n          </Field>\n        </div>\n      </div>\n\n      <div class=\"filter_limit\">\n        <div v-show=\"!maxFilterLimit || maxFilterLimit <= 0\" name=\"filter_limit_all\">\n          <Field\n            :uicontrol=\"'radio'\"\n            :name=\"'filter_limit_all'\"\n            :title=\"translate('CoreHome_RowLimit')\"\n            v-model=\"reportLimitAll\"\n\n            :full-width=\"true\"\n            :options=\"limitAllOptions\"\n          >\n          </Field>\n        </div>\n\n        <div v-if=\"reportLimitAll === 'no' && maxFilterLimit <= 0\" name=\"filter_limit\">\n          <Field\n            :uicontrol=\"'number'\"\n            name=\"filter_limit\"\n            :min=\"1\"\n            v-model=\"reportLimit\"\n            :full-width=\"true\"\n          >\n          </Field>\n        </div>\n\n        <div v-if=\"reportLimitAll === 'no' && maxFilterLimit > 0\" name=\"filter_limit\">\n          <Field\n            :uicontrol=\"'number'\"\n            :name=\"'filter_limit'\"\n            :min=\"1\"\n            :max=\"maxFilterLimit\"\n            v-model=\"reportLimit\"\n            :value=\"reportLimit\"\n            :full-width=\"true\"\n            :title=\"filterLimitTooltip\"\n          >\n          </Field>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col l12\" v-show=\"showUrl\">\n      <textarea\n        v-select-on-focus=\"{}\"\n        readonly\n        class=\"exportFullUrl\"\n        :value=\"exportLinkWithoutToken\"\n      >\n      </textarea>\n      <div class=\"tooltip\" v-html=\"$sanitize(translate(\n        'CoreHome_ExportTooltipWithLink',\n        '<a target=_blank href=\\'?module=UsersManager&action=userSecurity\\'>',\n        '</a>',\n        'ENTER_YOUR_TOKEN_AUTH_HERE',\n      ))\"></div>\n    </div>\n\n    <div class=\"col l12\">\n      <a\n        class=\"btn\"\n        :href=\"exportLink\"\n        target=\"_new\"\n        :title=\"translate('CoreHome_ExportTooltip')\"\n      >{{ translate('General_Export') }}</a>\n      <a href=\"javascript:\" @click=\"showUrl=!showUrl\" class=\"toggle-export-url\">\n        <span v-show=\"!showUrl\">{{ translate('CoreHome_ShowExportUrl') }}</span>\n        <span v-show=\"showUrl\">{{ translate('CoreHome_HideExportUrl') }}</span>\n      </a>\n    </div>\n\n    <div class=\"col l12 report-export-popover-footer\"\n         v-if=\"additionalContent\" v-html=\"$sanitize(additionalContent)\"></div>\n\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport SelectOnFocus from '../SelectOnFocus/SelectOnFocus';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\n\ninterface DataTable {\n  param: Record<string, string|string[]>;\n  props: Record<string, string|string[]>;\n}\n\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  components: {\n    Field,\n  },\n  directives: {\n    SelectOnFocus,\n  },\n  props: {\n    hasSubtables: Boolean,\n    availableReportTypes: Object,\n    availableReportFormats: {\n      type: Object,\n      required: true,\n    },\n    maxFilterLimit: Number,\n    limitAllOptions: Object,\n    dataTable: {\n      type: Object,\n      required: true,\n    },\n    requestParams: [Object, String],\n    apiMethod: {\n      type: String,\n      required: true,\n    },\n    initialReportType: {\n      type: String,\n      default: 'default',\n    },\n    initialReportLimit: {\n      type: [String, Number],\n      default: 100,\n    },\n    initialReportLimitAll: {\n      type: String,\n      default: 'yes',\n    },\n    initialOptionFlat: {\n      type: Boolean,\n      default: false,\n    },\n    initialOptionExpanded: {\n      type: Boolean,\n      default: true,\n    },\n    initialOptionFormatMetrics: {\n      type: Boolean,\n      default: false,\n    },\n    initialReportFormat: {\n      type: String,\n      default: 'XML',\n    },\n  },\n  mounted() {\n    // pass data as object, so it can be manipulated by subscribers\n    const parameters = { content: this.additionalContent, dataTable: this.dataTable };\n    Matomo.postEvent('ReportExportPopover.additionalContent', parameters);\n    this.additionalContent = parameters.content;\n  },\n  data() {\n    return {\n      showUrl: false,\n      reportFormat: this.initialReportFormat,\n      optionFlat: this.initialOptionFlat,\n      optionExpanded: this.initialOptionExpanded,\n      optionFormatMetrics: this.initialOptionFormatMetrics,\n      reportType: this.initialReportType,\n      reportLimitAll: this.initialReportLimitAll,\n      reportLimit: typeof this.initialReportLimit === 'string'\n        ? parseInt(this.initialReportLimit, 10)\n        : this.initialReportLimit,\n      additionalContent: '',\n    };\n  },\n  watch: {\n    reportType(newVal) {\n      if (!this.availableReportFormats[newVal][this.reportFormat]) {\n        this.reportFormat = 'XML';\n      }\n    },\n    reportLimit(newVal, oldVal) {\n      if (this.maxFilterLimit && this.maxFilterLimit > 0 && newVal > this.maxFilterLimit) {\n        this.reportLimit = oldVal;\n      }\n    },\n  },\n  computed: {\n    filterLimitTooltip() {\n      const rowLimit = translate('CoreHome_RowLimit');\n      const computedMetricMax = this.maxFilterLimit\n        ? translate(\n          'General_ComputedMetricMax',\n          this.maxFilterLimit.toString(),\n        )\n        : '';\n      return `${rowLimit} (${computedMetricMax})`;\n    },\n    exportLink() {\n      return this.getExportLink(true);\n    },\n    exportLinkWithoutToken() {\n      return this.getExportLink(false);\n    },\n  },\n  methods: {\n    getExportLink(withToken = true) {\n      const {\n        reportFormat,\n        apiMethod,\n        reportType,\n      } = this;\n\n      const dataTable: DataTable = this.dataTable as DataTable;\n\n      if (!reportFormat) {\n        return undefined;\n      }\n\n      let requestParams: Record<string, unknown> = {};\n\n      const limit = this.reportLimitAll === 'yes' ? -1 : this.reportLimit;\n\n      if (this.requestParams && typeof this.requestParams === 'string') {\n        requestParams = JSON.parse(this.requestParams);\n      } else if (this.requestParams && typeof this.requestParams === 'object') {\n        requestParams = this.requestParams as Record<string, unknown>;\n      }\n\n      const {\n        segment,\n        label,\n        idGoal,\n        idDimension,\n        idSite,\n      } = dataTable.param;\n\n      let { date, period } = dataTable.param;\n\n      if (reportFormat === 'RSS') {\n        date = 'last10';\n      }\n      if (typeof dataTable.param.dateUsedInGraph !== 'undefined') {\n        date = dataTable.param.dateUsedInGraph;\n      }\n\n      const formatsUseDayNotRange = (Matomo.config.datatable_export_range_as_day as string)\n        .toLowerCase();\n\n      if (formatsUseDayNotRange.indexOf(reportFormat.toLowerCase()) !== -1\n        && dataTable.param.period === 'range'\n      ) {\n        period = 'day';\n      }\n\n      // Below evolution graph, show daily exports\n      if (dataTable.param.period === 'range'\n        && dataTable.param.viewDataTable === 'graphEvolution'\n      ) {\n        period = 'day';\n      }\n\n      const exportUrlParams: QueryParameters = {\n        module: 'API',\n        format: reportFormat,\n        idSite,\n        period,\n        date,\n      };\n\n      if (reportType === 'processed') {\n        exportUrlParams.method = 'API.getProcessedReport';\n        [exportUrlParams.apiModule, exportUrlParams.apiAction] = apiMethod.split('.');\n      } else {\n        exportUrlParams.method = apiMethod;\n      }\n\n      if (dataTable.param.compareDates\n        && dataTable.param.compareDates.length\n      ) {\n        exportUrlParams.compareDates = dataTable.param.compareDates;\n        exportUrlParams.compare = '1';\n      }\n\n      if (dataTable.param.comparePeriods\n        && dataTable.param.comparePeriods.length\n      ) {\n        exportUrlParams.comparePeriods = dataTable.param.comparePeriods;\n        exportUrlParams.compare = '1';\n      }\n\n      if (dataTable.param.compareSegments\n        && dataTable.param.compareSegments.length\n      ) {\n        exportUrlParams.compareSegments = dataTable.param.compareSegments;\n        exportUrlParams.compare = '1';\n      }\n\n      if (typeof dataTable.param.filter_pattern !== 'undefined') {\n        exportUrlParams.filter_pattern = dataTable.param.filter_pattern;\n      }\n\n      if (typeof dataTable.param.filter_pattern_recursive !== 'undefined') {\n        exportUrlParams.filter_pattern_recursive = dataTable.param.filter_pattern_recursive;\n      }\n\n      if (window.$.isPlainObject(requestParams)) {\n        Object.entries(requestParams).forEach(([index, param]) => {\n          let value = param;\n          if (value === true) {\n            value = 1;\n          } else if (value === false) {\n            value = 0;\n          }\n          exportUrlParams[index] = value as QueryParameterValue;\n        });\n      }\n\n      if (this.optionFlat) {\n        exportUrlParams.flat = 1;\n        if (typeof dataTable.param.include_aggregate_rows !== 'undefined'\n          && dataTable.param.include_aggregate_rows === '1'\n        ) {\n          exportUrlParams.include_aggregate_rows = 1;\n        }\n      }\n\n      if (!this.optionFlat && this.optionExpanded) {\n        exportUrlParams.expanded = 1;\n      }\n\n      if (this.optionFormatMetrics) {\n        exportUrlParams.format_metrics = 1;\n      }\n\n      if (dataTable.param.pivotBy) {\n        exportUrlParams.pivotBy = dataTable.param.pivotBy;\n        exportUrlParams.pivotByColumnLimit = 20;\n\n        if (dataTable.props.pivot_by_column) {\n          exportUrlParams.pivotByColumn = dataTable.props.pivot_by_column;\n        }\n      }\n\n      if (reportFormat === 'CSV' || reportFormat === 'TSV' || reportFormat === 'RSS') {\n        exportUrlParams.translateColumnNames = 1;\n        exportUrlParams.language = Matomo.language;\n      }\n\n      if (typeof segment !== 'undefined') {\n        exportUrlParams.segment = decodeURIComponent(segment as string);\n      }\n\n      // Export Goals specific reports\n      if (typeof idGoal !== 'undefined'\n        && idGoal !== '-1'\n      ) {\n        exportUrlParams.idGoal = idGoal;\n      }\n\n      // Export Dimension specific reports\n      if (typeof idDimension !== 'undefined'\n        && idDimension !== '-1'\n      ) {\n        exportUrlParams.idDimension = idDimension;\n      }\n\n      if (label) {\n        const labelParts = (label as string).split(',');\n\n        if (labelParts.length > 1) {\n          exportUrlParams.label = labelParts;\n        } else {\n          [exportUrlParams.label] = labelParts;\n        }\n      }\n\n      exportUrlParams.token_auth = 'ENTER_YOUR_TOKEN_AUTH_HERE';\n\n      if (withToken === true) {\n        exportUrlParams.token_auth = Matomo.token_auth;\n        exportUrlParams.force_api_session = 1;\n      }\n\n      exportUrlParams.filter_limit = limit;\n\n      const prefix = window.location.href.split('?')[0];\n      return `${prefix}?${MatomoUrl.stringify(exportUrlParams)}`;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport useExternalPluginComponent from '../useExternalPluginComponent';\nimport SelectOnFocus from '../SelectOnFocus/SelectOnFocus';\nimport Matomo from '../Matomo/Matomo';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\n\ninterface DataTable {\n  param: Record<string, string|string[]>;\n  props: Record<string, string|string[]>;\n}\n\nconst Field = useExternalPluginComponent('CorePluginsAdmin', 'Field');\n\nexport default defineComponent({\n  components: {\n    Field,\n  },\n  directives: {\n    SelectOnFocus,\n  },\n  props: {\n    hasSubtables: Boolean,\n    availableReportTypes: Object,\n    availableReportFormats: {\n      type: Object,\n      required: true,\n    },\n    maxFilterLimit: Number,\n    limitAllOptions: Object,\n    dataTable: {\n      type: Object,\n      required: true,\n    },\n    requestParams: [Object, String],\n    apiMethod: {\n      type: String,\n      required: true,\n    },\n    initialReportType: {\n      type: String,\n      default: 'default',\n    },\n    initialReportLimit: {\n      type: [String, Number],\n      default: 100,\n    },\n    initialReportLimitAll: {\n      type: String,\n      default: 'yes',\n    },\n    initialOptionFlat: {\n      type: Boolean,\n      default: false,\n    },\n    initialOptionExpanded: {\n      type: Boolean,\n      default: true,\n    },\n    initialOptionFormatMetrics: {\n      type: Boolean,\n      default: false,\n    },\n    initialReportFormat: {\n      type: String,\n      default: 'XML',\n    },\n  },\n  mounted() {\n    // pass data as object, so it can be manipulated by subscribers\n    const parameters = { content: this.additionalContent, dataTable: this.dataTable };\n    Matomo.postEvent('ReportExportPopover.additionalContent', parameters);\n    this.additionalContent = parameters.content;\n  },\n  data() {\n    return {\n      showUrl: false,\n      reportFormat: this.initialReportFormat,\n      optionFlat: this.initialOptionFlat,\n      optionExpanded: this.initialOptionExpanded,\n      optionFormatMetrics: this.initialOptionFormatMetrics,\n      reportType: this.initialReportType,\n      reportLimitAll: this.initialReportLimitAll,\n      reportLimit: typeof this.initialReportLimit === 'string'\n        ? parseInt(this.initialReportLimit, 10)\n        : this.initialReportLimit,\n      additionalContent: '',\n    };\n  },\n  watch: {\n    reportType(newVal) {\n      if (!this.availableReportFormats[newVal][this.reportFormat]) {\n        this.reportFormat = 'XML';\n      }\n    },\n    reportLimit(newVal, oldVal) {\n      if (this.maxFilterLimit && this.maxFilterLimit > 0 && newVal > this.maxFilterLimit) {\n        this.reportLimit = oldVal;\n      }\n    },\n  },\n  computed: {\n    filterLimitTooltip() {\n      const rowLimit = translate('CoreHome_RowLimit');\n      const computedMetricMax = this.maxFilterLimit\n        ? translate(\n          'General_ComputedMetricMax',\n          this.maxFilterLimit.toString(),\n        )\n        : '';\n      return `${rowLimit} (${computedMetricMax})`;\n    },\n    exportLink() {\n      return this.getExportLink(true);\n    },\n    exportLinkWithoutToken() {\n      return this.getExportLink(false);\n    },\n  },\n  methods: {\n    getExportLink(withToken = true) {\n      const {\n        reportFormat,\n        apiMethod,\n        reportType,\n      } = this;\n\n      const dataTable: DataTable = this.dataTable as DataTable;\n\n      if (!reportFormat) {\n        return undefined;\n      }\n\n      let requestParams: Record<string, unknown> = {};\n\n      const limit = this.reportLimitAll === 'yes' ? -1 : this.reportLimit;\n\n      if (this.requestParams && typeof this.requestParams === 'string') {\n        requestParams = JSON.parse(this.requestParams);\n      } else if (this.requestParams && typeof this.requestParams === 'object') {\n        requestParams = this.requestParams as Record<string, unknown>;\n      }\n\n      const {\n        segment,\n        label,\n        idGoal,\n        idDimension,\n        idSite,\n      } = dataTable.param;\n\n      let { date, period } = dataTable.param;\n\n      if (reportFormat === 'RSS') {\n        date = 'last10';\n      }\n      if (typeof dataTable.param.dateUsedInGraph !== 'undefined') {\n        date = dataTable.param.dateUsedInGraph;\n      }\n\n      const formatsUseDayNotRange = (Matomo.config.datatable_export_range_as_day as string)\n        .toLowerCase();\n\n      if (formatsUseDayNotRange.indexOf(reportFormat.toLowerCase()) !== -1\n        && dataTable.param.period === 'range'\n      ) {\n        period = 'day';\n      }\n\n      // Below evolution graph, show daily exports\n      if (dataTable.param.period === 'range'\n        && dataTable.param.viewDataTable === 'graphEvolution'\n      ) {\n        period = 'day';\n      }\n\n      const exportUrlParams: QueryParameters = {\n        module: 'API',\n        format: reportFormat,\n        idSite,\n        period,\n        date,\n      };\n\n      if (reportType === 'processed') {\n        exportUrlParams.method = 'API.getProcessedReport';\n        [exportUrlParams.apiModule, exportUrlParams.apiAction] = apiMethod.split('.');\n      } else {\n        exportUrlParams.method = apiMethod;\n      }\n\n      if (dataTable.param.compareDates\n        && dataTable.param.compareDates.length\n      ) {\n        exportUrlParams.compareDates = dataTable.param.compareDates;\n        exportUrlParams.compare = '1';\n      }\n\n      if (dataTable.param.comparePeriods\n        && dataTable.param.comparePeriods.length\n      ) {\n        exportUrlParams.comparePeriods = dataTable.param.comparePeriods;\n        exportUrlParams.compare = '1';\n      }\n\n      if (dataTable.param.compareSegments\n        && dataTable.param.compareSegments.length\n      ) {\n        exportUrlParams.compareSegments = dataTable.param.compareSegments;\n        exportUrlParams.compare = '1';\n      }\n\n      if (typeof dataTable.param.filter_pattern !== 'undefined') {\n        exportUrlParams.filter_pattern = dataTable.param.filter_pattern;\n      }\n\n      if (typeof dataTable.param.filter_pattern_recursive !== 'undefined') {\n        exportUrlParams.filter_pattern_recursive = dataTable.param.filter_pattern_recursive;\n      }\n\n      if (window.$.isPlainObject(requestParams)) {\n        Object.entries(requestParams).forEach(([index, param]) => {\n          let value = param;\n          if (value === true) {\n            value = 1;\n          } else if (value === false) {\n            value = 0;\n          }\n          exportUrlParams[index] = value as QueryParameterValue;\n        });\n      }\n\n      if (this.optionFlat) {\n        exportUrlParams.flat = 1;\n        if (typeof dataTable.param.include_aggregate_rows !== 'undefined'\n          && dataTable.param.include_aggregate_rows === '1'\n        ) {\n          exportUrlParams.include_aggregate_rows = 1;\n        }\n      }\n\n      if (!this.optionFlat && this.optionExpanded) {\n        exportUrlParams.expanded = 1;\n      }\n\n      if (this.optionFormatMetrics) {\n        exportUrlParams.format_metrics = 1;\n      }\n\n      if (dataTable.param.pivotBy) {\n        exportUrlParams.pivotBy = dataTable.param.pivotBy;\n        exportUrlParams.pivotByColumnLimit = 20;\n\n        if (dataTable.props.pivot_by_column) {\n          exportUrlParams.pivotByColumn = dataTable.props.pivot_by_column;\n        }\n      }\n\n      if (reportFormat === 'CSV' || reportFormat === 'TSV' || reportFormat === 'RSS') {\n        exportUrlParams.translateColumnNames = 1;\n        exportUrlParams.language = Matomo.language;\n      }\n\n      if (typeof segment !== 'undefined') {\n        exportUrlParams.segment = decodeURIComponent(segment as string);\n      }\n\n      // Export Goals specific reports\n      if (typeof idGoal !== 'undefined'\n        && idGoal !== '-1'\n      ) {\n        exportUrlParams.idGoal = idGoal;\n      }\n\n      // Export Dimension specific reports\n      if (typeof idDimension !== 'undefined'\n        && idDimension !== '-1'\n      ) {\n        exportUrlParams.idDimension = idDimension;\n      }\n\n      if (label) {\n        const labelParts = (label as string).split(',');\n\n        if (labelParts.length > 1) {\n          exportUrlParams.label = labelParts;\n        } else {\n          [exportUrlParams.label] = labelParts;\n        }\n      }\n\n      exportUrlParams.token_auth = 'ENTER_YOUR_TOKEN_AUTH_HERE';\n\n      if (withToken === true) {\n        exportUrlParams.token_auth = Matomo.token_auth;\n        exportUrlParams.force_api_session = 1;\n      }\n\n      exportUrlParams.filter_limit = limit;\n\n      const prefix = window.location.href.split('?')[0];\n      return `${prefix}?${MatomoUrl.stringify(exportUrlParams)}`;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportExportPopover.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReportExportPopover.vue?vue&type=script&lang=ts\"","import { render } from \"./ReportExportPopover.vue?vue&type=template&id=750b5580\"\nimport script from \"./ReportExportPopover.vue?vue&type=script&lang=ts\"\nexport * from \"./ReportExportPopover.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { DirectiveBinding } from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport { translate } from '../translate';\nimport ReportExportPopover from './ReportExportPopover.vue';\nimport Matomo from '../Matomo/Matomo';\nimport createVueApp from '../createVueApp';\n\ninterface ReportExportArgs {\n  reportTitle: string;\n  requestParams: QueryParameters;\n  reportFormats: Record<string, unknown>;\n  apiMethod: string;\n  maxFilterLimit: number;\n  onClose?: () => void;\n}\n\nconst { $ } = window;\n\nexport default {\n  mounted(el: HTMLElement, binding: DirectiveBinding<ReportExportArgs>): void {\n    el.addEventListener('click', () => {\n      const popoverParamBackup = MatomoUrl.hashParsed.value.popover;\n\n      const dataTable = $(el).closest('[data-report]').data('uiControlObject');\n      const popover = window.Piwik_Popover.showLoading('Export');\n\n      const formats = binding.value.reportFormats;\n\n      let reportLimit = dataTable.param.filter_limit;\n      if (binding.value.maxFilterLimit > 0) {\n        reportLimit = Math.min(reportLimit, binding.value.maxFilterLimit);\n      }\n\n      const optionFlat = dataTable.param.flat === true\n        || dataTable.param.flat === 1\n        || dataTable.param.flat === '1';\n\n      const props = {\n        initialReportType: 'default',\n        initialReportLimit: reportLimit > 0 ? reportLimit : 100,\n        initialReportLimitAll: reportLimit === -1 ? 'yes' : 'no',\n        initialOptionFlat: optionFlat,\n        initialOptionExpanded: true,\n        initialOptionFormatMetrics: false,\n        hasSubtables: optionFlat || dataTable.numberOfSubtables > 0,\n        availableReportFormats: {\n          default: formats,\n          processed: {\n            XML: formats.XML,\n            JSON: formats.JSON,\n          },\n        },\n        availableReportTypes: {\n          default: translate('CoreHome_StandardReport'),\n          processed: translate('CoreHome_ReportWithMetadata'),\n        },\n        limitAllOptions: {\n          yes: translate('General_All'),\n          no: translate('CoreHome_CustomLimit'),\n        },\n        maxFilterLimit: binding.value.maxFilterLimit,\n        dataTable,\n        requestParams: binding.value.requestParams,\n        apiMethod: binding.value.apiMethod,\n      };\n\n      const app = createVueApp({\n        template: `\n          <popover v-bind=\"bind\"/>`,\n        data() {\n          return {\n            bind: props,\n          };\n        },\n      });\n      app.component('popover', ReportExportPopover);\n\n      const mountPoint = document.createElement('div');\n      app.mount(mountPoint);\n\n      const { reportTitle } = binding.value;\n      window.Piwik_Popover.setTitle(\n        `${translate('General_Export')} ${Matomo.helper.htmlEntities(reportTitle)}`,\n      );\n      window.Piwik_Popover.setContent(mountPoint);\n\n      window.Piwik_Popover.onClose(() => {\n        app.unmount();\n\n        if (popoverParamBackup !== '') {\n          setTimeout(() => {\n            MatomoUrl.updateHash({\n              ...MatomoUrl.hashParsed.value,\n              popover: popoverParamBackup,\n            });\n\n            if (binding.value.onClose) {\n              binding.value.onClose();\n            }\n          }, 100);\n        }\n      });\n\n      setTimeout(() => {\n        popover.dialog();\n\n        $('.exportFullUrl, .btn', popover).tooltip({\n          track: true,\n          show: false,\n          hide: false,\n        });\n      }, 100);\n    });\n  },\n};\n","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <img\n    class=\"sparklineImg\"\n    loading=\"lazy\"\n    alt=\"\"\n    :src=\"sparklineUrl\"\n    :width=\"width\"\n    :height=\"height\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport RangePeriod from '../Periods/Range';\nimport { format } from '../Periods';\n\nexport default defineComponent({\n  props: {\n    seriesIndices: Array,\n    params: [Object, String],\n    width: Number,\n    height: Number,\n  },\n  data() {\n    return {\n      isWidget: false,\n    };\n  },\n  mounted() {\n    this.isWidget = !!this.$el.closest('[widgetId]');\n  },\n  computed: {\n    sparklineUrl() {\n      const { seriesIndices, params } = this;\n\n      const sparklineColors = Matomo.getSparklineColors();\n\n      if (seriesIndices) {\n        sparklineColors.lineColor = sparklineColors.lineColor.filter(\n          (c, index) => seriesIndices.indexOf(index) !== -1,\n        );\n      }\n\n      const colors = JSON.stringify(sparklineColors);\n\n      const defaultParams = {\n        forceView: '1',\n        viewDataTable: 'sparkline',\n        widget: this.isWidget ? '1' : '0',\n        showtitle: '1',\n        colors,\n        random: Date.now(),\n        date: this.defaultDate,\n        // mixinDefaultGetParams() will use the raw, encoded value from the URL (legacy behavior),\n        // which means MatomoUrl.stringify() will end up double encoding it if we don't set it\n        // ourselves here.\n        segment: MatomoUrl.parsed.value.segment as string,\n      };\n\n      const givenParams = typeof params === 'object'\n        ? params as QueryParameters\n        : MatomoUrl.parse((params as string).substring((params as string).indexOf('?') + 1));\n\n      const helper = new AjaxHelper();\n      const urlParams = helper.mixinDefaultGetParams({ ...defaultParams, ...givenParams });\n\n      // Append the token_auth to the URL if it was set (eg. embed dashboard)\n      const token_auth = MatomoUrl.parsed.value.token_auth as string;\n      if (token_auth && token_auth.length && Matomo.shouldPropagateTokenAuth) {\n        urlParams.token_auth = token_auth;\n      }\n\n      return `?${MatomoUrl.stringify(urlParams)}`;\n    },\n    defaultDate() {\n      if (Matomo.period === 'range') {\n        return `${Matomo.startDateString},${Matomo.endDateString}`;\n      }\n\n      const dateRange = RangePeriod.getLastNRange(\n        Matomo.period!,\n        30,\n        Matomo.currentDateString!,\n      ).getDateRange();\n\n      const piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\n      if (dateRange[0] < piwikMinDate) {\n        dateRange[0] = piwikMinDate;\n      }\n\n      const startDateStr = format(dateRange[0]);\n      const endDateStr = format(dateRange[1]);\n\n      return `${startDateStr},${endDateStr}`;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport Matomo from '../Matomo/Matomo';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport RangePeriod from '../Periods/Range';\nimport { format } from '../Periods';\n\nexport default defineComponent({\n  props: {\n    seriesIndices: Array,\n    params: [Object, String],\n    width: Number,\n    height: Number,\n  },\n  data() {\n    return {\n      isWidget: false,\n    };\n  },\n  mounted() {\n    this.isWidget = !!this.$el.closest('[widgetId]');\n  },\n  computed: {\n    sparklineUrl() {\n      const { seriesIndices, params } = this;\n\n      const sparklineColors = Matomo.getSparklineColors();\n\n      if (seriesIndices) {\n        sparklineColors.lineColor = sparklineColors.lineColor.filter(\n          (c, index) => seriesIndices.indexOf(index) !== -1,\n        );\n      }\n\n      const colors = JSON.stringify(sparklineColors);\n\n      const defaultParams = {\n        forceView: '1',\n        viewDataTable: 'sparkline',\n        widget: this.isWidget ? '1' : '0',\n        showtitle: '1',\n        colors,\n        random: Date.now(),\n        date: this.defaultDate,\n        // mixinDefaultGetParams() will use the raw, encoded value from the URL (legacy behavior),\n        // which means MatomoUrl.stringify() will end up double encoding it if we don't set it\n        // ourselves here.\n        segment: MatomoUrl.parsed.value.segment as string,\n      };\n\n      const givenParams = typeof params === 'object'\n        ? params as QueryParameters\n        : MatomoUrl.parse((params as string).substring((params as string).indexOf('?') + 1));\n\n      const helper = new AjaxHelper();\n      const urlParams = helper.mixinDefaultGetParams({ ...defaultParams, ...givenParams });\n\n      // Append the token_auth to the URL if it was set (eg. embed dashboard)\n      const token_auth = MatomoUrl.parsed.value.token_auth as string;\n      if (token_auth && token_auth.length && Matomo.shouldPropagateTokenAuth) {\n        urlParams.token_auth = token_auth;\n      }\n\n      return `?${MatomoUrl.stringify(urlParams)}`;\n    },\n    defaultDate() {\n      if (Matomo.period === 'range') {\n        return `${Matomo.startDateString},${Matomo.endDateString}`;\n      }\n\n      const dateRange = RangePeriod.getLastNRange(\n        Matomo.period!,\n        30,\n        Matomo.currentDateString!,\n      ).getDateRange();\n\n      const piwikMinDate = new Date(Matomo.minDateYear, Matomo.minDateMonth - 1, Matomo.minDateDay);\n      if (dateRange[0] < piwikMinDate) {\n        dateRange[0] = piwikMinDate;\n      }\n\n      const startDateStr = format(dateRange[0]);\n      const endDateStr = format(dateRange[1]);\n\n      return `${startDateStr},${endDateStr}`;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sparkline.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sparkline.vue?vue&type=script&lang=ts\"","import { render } from \"./Sparkline.vue?vue&type=template&id=e9246a38\"\nimport script from \"./Sparkline.vue?vue&type=script&lang=ts\"\nexport * from \"./Sparkline.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div class=\"progressbar\">\n    <div class=\"progress\">\n      <div\n        class=\"determinate\"\n        style=\"width: 0\"\n        :style=\"{ width: `${actualProgress}%` }\"\n      />\n    </div>\n    <span v-show=\"!!label\">\n      <img src=\"plugins/Morpheus/images/loading-blue.gif\" style=\"margin-right: 3.5px\" />\n      <span class=\"label\" v-html=\"$sanitize(label)\" />\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    progress: {\n      type: Number,\n      required: true,\n    },\n    label: String,\n  },\n  computed: {\n    actualProgress() {\n      if (this.progress > 100) {\n        return 100;\n      }\n\n      if (this.progress < 0) {\n        return 0;\n      }\n\n      return this.progress;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: {\n    progress: {\n      type: Number,\n      required: true,\n    },\n    label: String,\n  },\n  computed: {\n    actualProgress() {\n      if (this.progress > 100) {\n        return 100;\n      }\n\n      if (this.progress < 0) {\n        return 0;\n      }\n\n      return this.progress;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Progressbar.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Progressbar.vue?vue&type=script&lang=ts\"","import { render } from \"./Progressbar.vue?vue&type=template&id=0048ddd7\"\nimport script from \"./Progressbar.vue?vue&type=script&lang=ts\"\nexport * from \"./Progressbar.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { nextTick } from 'vue';\n\nexport default {\n  mounted(el: HTMLElement): void {\n    el.classList.add('piwik-content-intro');\n  },\n  updated(el: HTMLElement): void {\n    // classes can be overwritten when elements bind to :class, nextTick + using\n    // updated avoids this problem (and doing in both mounted and updated avoids a temporary\n    // state where the classes aren't added)\n    nextTick(() => {\n      el.classList.add('piwik-content-intro');\n    });\n  },\n};\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { nextTick, DirectiveBinding } from 'vue';\n\ninterface ContentTableValue {\n  off?: boolean; // if set to true, does not apply style\n}\n\nexport default {\n  mounted(el: HTMLElement, binding?: DirectiveBinding<ContentTableValue|undefined>): void {\n    if (binding?.value?.off) {\n      return;\n    }\n\n    el.classList.add('card', 'card-table', 'entityTable');\n  },\n  updated(el: HTMLElement, binding?: DirectiveBinding<ContentTableValue|undefined>): void {\n    if (binding?.value?.off) {\n      return;\n    }\n\n    // classes can be overwritten when elements bind to :class, nextTick + using\n    // updated avoids this problem (and doing in both mounted and updated avoids a temporary\n    // state where the classes aren't added)\n    nextTick(() => {\n      el.classList.add('card', 'card-table', 'entityTable');\n    });\n  },\n};\n","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div ref=\"root\">\n    <slot\n      :form-data=\"formData\"\n      :submit-api-method=\"submitApiMethod\"\n      :send-json-payload=\"sendJsonPayload\"\n      :no-error-notification=\"noErrorNotification\"\n      :no-success-notification=\"noSuccessNotification\"\n      :submit-form=\"submitForm\"\n      :is-submitting=\"isSubmitting\"\n      :successful-post-response=\"successfulPostResponse\"\n      :error-post-response=\"errorPostResponse\"\n    ></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { NotificationsStore } from '../Notification';\n\nconst { $ } = window;\n\n/**\n * Example usage:\n *\n * <AjaxForm :form-data=\"myData\" ...>\n *   <template v-slot:default=\"ajaxForm\">\n *     <Field v-model=\"myData.something\" .../>\n *     <SaveButton @confirm=\"ajaxForm.submitForm()\" :saving=\"ajaxForm.isSubmitting\"/>\n *   </template>\n * </AjaxForm>\n *\n * Data does not flow upwards in any way. :form-data is used for submitForm(), and the\n * containing component binds to properties of the object in controls to fill the object.\n */\nexport default defineComponent({\n  props: {\n    formData: {\n      type: Object,\n      required: true,\n    },\n    submitApiMethod: {\n      type: String,\n      required: true,\n    },\n    sendJsonPayload: Boolean,\n    noErrorNotification: Boolean,\n    noSuccessNotification: Boolean,\n  },\n  data() {\n    return {\n      isSubmitting: false,\n      successfulPostResponse: null,\n      errorPostResponse: null,\n    };\n  },\n  emits: ['update:modelValue'],\n  mounted() {\n    // on submit call controller submit method\n    $(this.$refs.root as HTMLElement).on('click', 'input[type=submit]', () => {\n      this.submitForm();\n    });\n  },\n  methods: {\n    submitForm() {\n      this.successfulPostResponse = null;\n      this.errorPostResponse = null;\n\n      let postParams = this.formData;\n      if (this.sendJsonPayload) {\n        postParams = { data: JSON.stringify(this.formData) };\n      }\n\n      this.isSubmitting = true;\n      AjaxHelper.post(\n        {\n          module: 'API',\n          method: this.submitApiMethod,\n        },\n        postParams,\n        {\n          createErrorNotification: !this.noErrorNotification,\n        },\n      ).then((response) => {\n        this.successfulPostResponse = response;\n\n        if (!this.noSuccessNotification) {\n          const notificationInstanceId = NotificationsStore.show({\n            message: translate('General_YourChangesHaveBeenSaved'),\n            context: 'success',\n            type: 'toast',\n            id: 'ajaxHelper',\n          });\n          NotificationsStore.scrollToNotification(notificationInstanceId);\n        }\n      }).catch((error) => {\n        this.errorPostResponse = error.message;\n      }).finally(() => {\n        this.isSubmitting = false;\n      });\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\nimport AjaxHelper from '../AjaxHelper/AjaxHelper';\nimport { NotificationsStore } from '../Notification';\n\nconst { $ } = window;\n\n/**\n * Example usage:\n *\n * <AjaxForm :form-data=\"myData\" ...>\n *   <template v-slot:default=\"ajaxForm\">\n *     <Field v-model=\"myData.something\" .../>\n *     <SaveButton @confirm=\"ajaxForm.submitForm()\" :saving=\"ajaxForm.isSubmitting\"/>\n *   </template>\n * </AjaxForm>\n *\n * Data does not flow upwards in any way. :form-data is used for submitForm(), and the\n * containing component binds to properties of the object in controls to fill the object.\n */\nexport default defineComponent({\n  props: {\n    formData: {\n      type: Object,\n      required: true,\n    },\n    submitApiMethod: {\n      type: String,\n      required: true,\n    },\n    sendJsonPayload: Boolean,\n    noErrorNotification: Boolean,\n    noSuccessNotification: Boolean,\n  },\n  data() {\n    return {\n      isSubmitting: false,\n      successfulPostResponse: null,\n      errorPostResponse: null,\n    };\n  },\n  emits: ['update:modelValue'],\n  mounted() {\n    // on submit call controller submit method\n    $(this.$refs.root as HTMLElement).on('click', 'input[type=submit]', () => {\n      this.submitForm();\n    });\n  },\n  methods: {\n    submitForm() {\n      this.successfulPostResponse = null;\n      this.errorPostResponse = null;\n\n      let postParams = this.formData;\n      if (this.sendJsonPayload) {\n        postParams = { data: JSON.stringify(this.formData) };\n      }\n\n      this.isSubmitting = true;\n      AjaxHelper.post(\n        {\n          module: 'API',\n          method: this.submitApiMethod,\n        },\n        postParams,\n        {\n          createErrorNotification: !this.noErrorNotification,\n        },\n      ).then((response) => {\n        this.successfulPostResponse = response;\n\n        if (!this.noSuccessNotification) {\n          const notificationInstanceId = NotificationsStore.show({\n            message: translate('General_YourChangesHaveBeenSaved'),\n            context: 'success',\n            type: 'toast',\n            id: 'ajaxHelper',\n          });\n          NotificationsStore.scrollToNotification(notificationInstanceId);\n        }\n      }).catch((error) => {\n        this.errorPostResponse = error.message;\n      }).finally(() => {\n        this.isSubmitting = false;\n      });\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AjaxForm.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AjaxForm.vue?vue&type=script&lang=ts\"","import { render } from \"./AjaxForm.vue?vue&type=template&id=00d5220c\"\nimport script from \"./AjaxForm.vue?vue&type=script&lang=ts\"\nexport * from \"./AjaxForm.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <slot></slot>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({});\n</script>\n","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Passthrough.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Passthrough.vue?vue&type=script&lang=ts\"","import { render } from \"./Passthrough.vue?vue&type=template&id=6f9e3dd3\"\nimport script from \"./Passthrough.vue?vue&type=script&lang=ts\"\nexport * from \"./Passthrough.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <div v-if=\"showFooter && showFooterIcons\">\n    <a\n      v-dropdown-button\n      class=\"dropdown-button dropdownConfigureIcon dataTableAction\"\n      :class=\"{highlighted: isAnyConfigureIconHighlighted}\"\n      href\n      @click.prevent\n      :data-target=\"`dropdownConfigure${randomIdForDropdown}`\"\n      style=\"margin-right:3.5px\"\n      v-if=\"hasConfigItems && (isAnyConfigureIconHighlighted || isTableView)\"\n    >\n      <span class=\"icon-configure\"></span>\n    </a>\n\n    <a v-if=\"hasFooterIconsToShow\"\n      class=\"dropdown-button dataTableAction activateVisualizationSelection\"\n      v-dropdown-button\n      href\n      :data-target=\"`dropdownVisualizations${randomIdForDropdown}`\"\n      style=\"margin-right:3.5px\"\n      @click.prevent\n    >\n      <span\n        v-if=\"/^icon-/.test(activeFooterIcon || '')\"\n        :title=\"translate('CoreHome_ChangeVisualization')\"\n        :class=\"activeFooterIcon\"\n      ></span>\n      <img\n        v-else\n        :title=\"translate('CoreHome_ChangeVisualization')\"\n        width=\"16\"\n        height=\"16\"\n        :src=\"activeFooterIcon\"\n      />\n    </a>\n\n    <ul\n      v-if=\"showFooterIcons\"\n      :id=\"`dropdownVisualizations${randomIdForDropdown}`\"\n      class=\"dropdown-content dataTableFooterIcons\"\n    >\n      <Passthrough v-for=\"(footerIconGroup, index) in footerIcons\" :key=\"index\">\n        <li\n          v-for=\"footerIcon in footerIconGroup.buttons.filter((i) => !!i.icon)\"\n          :key=\"footerIcon.id\"\n        >\n          <a\n            :class=\"`${footerIconGroup.class} tableIcon\n              ${activeFooterIconIds.indexOf(footerIcon.id) !== -1 ? 'activeIcon' : ''}`\"\n            :data-footer-icon-id=\"footerIcon.id\"\n          >\n            <span\n              v-if=\"/^icon-/.test(footerIcon.icon || '')\"\n              :title=\"footerIcon.title\"\n              :class=\"footerIcon.icon\"\n              style=\"margin-right:5.5px\"\n            ></span>\n            <img\n              v-else\n              width=\"16\"\n              height=\"16\"\n              :title=\"footerIcon.title\"\n              :src=\"footerIcon.icon\"\n              style=\"margin-right:5.5px\"\n            />\n            <span v-if=\"footerIcon.title\">{{ footerIcon.title }}</span>\n          </a>\n        </li>\n        <li class=\"divider\"></li>\n      </Passthrough>\n      <li class=\"divider\"></li>\n    </ul>\n\n    <a\n      v-if=\"showExport\"\n      class=\"dataTableAction activateExportSelection\"\n      v-report-export=\"{\n        reportTitle,\n        requestParams,\n        apiMethod: apiMethodToRequestDataTable,\n        reportFormats,\n        maxFilterLimit,\n      }\"\n      :title=\"translate('General_ExportThisReport')\"\n      href=\"\"\n      style=\"margin-right:3.5px\"\n      @click.prevent\n    ><span class=\"icon-export\"></span></a>\n\n    <a\n      v-if=\"showExportAsImageIcon\"\n      class=\"dataTableAction tableIcon\"\n      href\n      id=\"dataTableFooterExportAsImageIcon\"\n      @click.prevent=\"showExportImage($event)\"\n      :title=\"translate('General_ExportAsImage')\"\n      style=\"margin-right:3.5px\"\n    >\n      <span class=\"icon-image\"></span>\n    </a>\n\n    <a\n      v-if=\"showAnnotations\"\n      class=\"dataTableAction annotationView\"\n      href\n      :title=\"translate('Annotations_Annotations')\"\n      @click.prevent\n      style=\"margin-right:3.5px\"\n    ><span class=\"icon-annotation\"></span></a>\n\n    <a\n      v-if=\"showSearch\"\n      class=\"dropdown-button dataTableAction searchAction\"\n      href\n      :title=\"translate('General_Search')\"\n      style=\"margin-right:3.5px\"\n      draggable=\"false\"\n      @click.prevent\n    >\n      <span class=\"icon-search\" draggable=\"false\"></span>\n      <span class=\"icon-close\" draggable=\"false\" :title=\"translate('CoreHome_CloseSearch')\"></span>\n      <input\n        :id=\"`widgetSearch_${reportId}`\"\n        :title=\"translate('CoreHome_DataTableHowToSearch')\"\n        type=\"text\"\n        class=\"dataTableSearchInput\"\n      />\n    </a>\n\n    <a\n      v-for=\"action in dataTableActions\"\n      :key=\"action.id\"\n      :class=\"`dataTableAction ${action.id}`\"\n      href\n      @click.prevent\n      :title=\"action.title\"\n      style=\"margin-right:3.5px\"\n    >\n      <span v-if=\"/^icon-/.test(action.icon || '')\" :class=\"action.icon\"></span>\n      <img v-else width=\"16\" height=\"16\" :title=\"action.title\" :src=\"action.icon\"/>\n    </a>\n\n    <ul\n      :id=\"`dropdownConfigure${randomIdForDropdown}`\"\n      class=\"dropdown-content tableConfiguration\"\n    >\n      <li v-if=\"showFlattenTable\">\n        <div\n          class=\"configItem dataTableFlatten\"\n          v-html=\"$sanitize(flattenItemText)\"\n        ></div>\n      </li>\n      <li\n        v-if=\"showDimensionsConfigItem\"\n      >\n        <div\n          class=\"configItem dataTableShowDimensions\"\n          v-html=\"$sanitize(showDimensionsText)\"\n        ></div>\n      </li>\n      <li v-if=\"showFlatConfigItem\">\n        <div\n          class=\"configItem dataTableIncludeAggregateRows\"\n          v-html=\"$sanitize(includeAggregateRowsText)\"\n        ></div>\n      </li>\n      <li v-if=\"showTotalsConfigItem\">\n        <div\n          class=\"configItem dataTableShowTotalsRow\"\n          v-html=\"$sanitize(keepTotalsRowText)\"\n        ></div>\n      </li>\n      <li v-if=\"showExcludeLowPopulation\">\n        <div\n          class=\"configItem dataTableExcludeLowPopulation\"\n          v-html=\"$sanitize(excludeLowPopText)\"\n        ></div>\n      </li>\n      <li v-if=\"showPivotBySubtable\">\n        <div\n          class=\"configItem dataTablePivotBySubtable\"\n          v-html=\"$sanitize(pivotByText)\"\n        ></div>\n      </li>\n    </ul>\n\n    <a\n      v-if=\"showPeriods\"\n      v-dropdown-button\n      class=\"dropdown-button dataTableAction activatePeriodsSelection\"\n      href=\"\"\n      @click.prevent\n      :title=\"translate('CoreHome_ChangePeriod')\"\n      :data-target=\"`dropdownPeriods${randomIdForDropdown}`\"\n    >\n      <div>\n        <span class=\"icon-calendar\"></span>\n        <span class=\"periodName\">\n          {{ translations[clientSideParameters.period] || clientSideParameters.period }}\n        </span>\n      </div>\n    </a>\n    <ul\n      v-if=\"showPeriods\"\n      :id=\"`dropdownPeriods${randomIdForDropdown}`\"\n      class=\"dropdown-content dataTablePeriods\"\n    >\n      <li v-for=\"selectablePeriod in selectablePeriods\" :key=\"selectablePeriod\">\n        <a\n          :data-period=\"selectablePeriod\"\n          :class=\"`tableIcon ${clientSideParameters.period === selectablePeriod\n            ? 'activeIcon' : ''}`\"\n        >\n          <span>{{ translations[selectablePeriod] || selectablePeriod }}</span>\n        </a>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport Passthrough from '../Passthrough/Passthrough.vue';\nimport DropdownButton from '../DropdownButton/DropdownButton';\nimport ReportExport from '../ReportExport/ReportExport';\nimport { translate } from '../translate';\n\ninterface FooterIcon {\n  id: string;\n  icon?: string;\n}\n\ninterface FooterIconGroup {\n  buttons: FooterIcon[];\n}\n\nconst { $ } = window;\n\nfunction getSingleStateIconText(text: string, addDefault?: boolean, replacement?: string) {\n  if (/(%(.\\$)?s+)/g.test(translate(text))) {\n    const values = ['<br /><span class=\"action\">'];\n    if (replacement) {\n      values.push(replacement);\n    }\n    let result = translate(text, ...values);\n    if (addDefault) {\n      result += ` (${translate('CoreHome_Default')})`;\n    }\n    result += '</span>';\n    return result;\n  }\n\n  return translate(text);\n}\n\nfunction getToggledIconText(toggled: boolean, textToggled: string, textUntoggled: string) {\n  if (toggled) {\n    return getSingleStateIconText(textToggled, true);\n  }\n\n  return getSingleStateIconText(textUntoggled);\n}\n\nfunction isBooleanLikeSet(value: number|string|boolean) {\n  return !!value && value !== '0';\n}\n\nexport default defineComponent({\n  props: {\n    showPeriods: Boolean,\n    showFooter: Boolean,\n    showFooterIcons: Boolean,\n    showSearch: Boolean,\n    showFlattenTable: Boolean,\n    footerIcons: {\n      type: Array,\n      required: true,\n    },\n    viewDataTable: {\n      type: String,\n      required: true,\n    },\n    reportTitle: String,\n    requestParams: {\n      type: Object,\n      required: true,\n    },\n    apiMethodToRequestDataTable: {\n      type: String,\n      required: true,\n    },\n    maxFilterLimit: {\n      type: Number,\n      required: true,\n    },\n    showExport: Boolean,\n    showExportAsImageIcon: Boolean,\n    showAnnotations: Boolean,\n    reportId: {\n      type: String,\n      required: true,\n    },\n    dataTableActions: {\n      type: Array,\n      required: true,\n    },\n    clientSideParameters: {\n      type: Object,\n      required: true,\n    },\n    hasMultipleDimensions: Boolean,\n    isDataTableEmpty: Boolean,\n    showTotalsRow: Boolean,\n    showExcludeLowPopulation: Boolean,\n    showPivotBySubtable: Boolean,\n    selectablePeriods: Array,\n    translations: {\n      type: Object,\n      required: true,\n    },\n    pivotDimensionName: String,\n  },\n  components: {\n    Passthrough,\n  },\n  directives: {\n    DropdownButton,\n    ReportExport,\n  },\n  methods: {\n    showExportImage(event: Event) {\n      $(event.target as HTMLElement)\n        .closest('.dataTable')\n        .find('div.jqplot-target')\n        .trigger('piwikExportAsImage');\n    },\n  },\n  computed: {\n    randomIdForDropdown(): number {\n      return Math.floor(Math.random() * 999999);\n    },\n    allFooterIcons(): FooterIcon[] {\n      return (this.footerIcons as FooterIconGroup[]).reduce((icons, footerIcon) => {\n        icons.push(...footerIcon.buttons);\n        return icons;\n      }, [] as FooterIcon[]);\n    },\n    activeFooterIcons(): FooterIcon[] {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n\n      const result = [this.viewDataTable];\n      if (params.abandonedCarts === 0 || params.abandonedCarts === '0') {\n        result.push('ecommerceOrder');\n      } else if (params.abandonedCarts === 1 || params.abandonedCarts === '1') {\n        result.push('ecommerceAbandonedCart');\n      }\n\n      return result\n        .map((id) => this.allFooterIcons.find((button) => button.id === id))\n        .filter((icon) => !!icon) as FooterIcon[];\n    },\n    activeFooterIcon(): string|undefined {\n      return this.activeFooterIcons[0]?.icon;\n    },\n    activeFooterIconIds(): string[] {\n      return this.activeFooterIcons.map((icon) => icon.id);\n    },\n    numIcons(): number {\n      return this.allFooterIcons.length;\n    },\n    hasFooterIconsToShow(): boolean {\n      return !!this.activeFooterIcons.length && this.numIcons > 1;\n    },\n    reportFormats(): Record<string, string> {\n      const formats: Record<string, string> = {\n        CSV: 'CSV',\n        TSV: 'TSV (Excel)',\n        XML: 'XML',\n        JSON: 'Json',\n        HTML: 'HTML',\n      };\n      formats.RSS = 'RSS';\n      return formats;\n    },\n    showDimensionsConfigItem() {\n      return this.showFlattenTable\n        && `${this.clientSideParameters.flat}` === '1'\n        && this.hasMultipleDimensions;\n    },\n    showFlatConfigItem() {\n      return this.showFlattenTable && `${this.clientSideParameters.flat}` === '1';\n    },\n    showTotalsConfigItem() {\n      return !this.isDataTableEmpty && this.showTotalsRow;\n    },\n    hasConfigItems() {\n      return this.showFlattenTable\n        || this.showDimensionsConfigItem\n        || this.showFlatConfigItem\n        || this.showTotalsConfigItem\n        || this.showExcludeLowPopulation\n        || this.showPivotBySubtable;\n    },\n    flattenItemText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.flat),\n        'CoreHome_UnFlattenDataTable',\n        'CoreHome_FlattenDataTable',\n      );\n    },\n    keepTotalsRowText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.keep_totals_row),\n        'CoreHome_RemoveTotalsRowDataTable',\n        'CoreHome_AddTotalsRowDataTable',\n      );\n    },\n    includeAggregateRowsText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.include_aggregate_rows),\n        'CoreHome_DataTableExcludeAggregateRows',\n        'CoreHome_DataTableIncludeAggregateRows',\n      );\n    },\n    showDimensionsText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.show_dimensions),\n        'CoreHome_DataTableCombineDimensions',\n        'CoreHome_DataTableShowDimensions',\n      );\n    },\n    pivotByText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      if (isBooleanLikeSet(params.pivotBy)) {\n        return getSingleStateIconText('CoreHome_UndoPivotBySubtable', true);\n      }\n\n      return getSingleStateIconText('CoreHome_PivotBySubtable', false, this.pivotDimensionName);\n    },\n    excludeLowPopText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.enable_filter_excludelowpop),\n        'CoreHome_IncludeRowsWithLowPopulation',\n        'CoreHome_ExcludeRowsWithLowPopulation',\n      );\n    },\n    isAnyConfigureIconHighlighted() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return isBooleanLikeSet(params.flat)\n        || isBooleanLikeSet(params.keep_totals_row)\n        || isBooleanLikeSet(params.include_aggregate_rows)\n        || isBooleanLikeSet(params.show_dimensions)\n        || isBooleanLikeSet(params.pivotBy)\n        || isBooleanLikeSet(params.enable_filter_excludelowpop);\n    },\n    isTableView() {\n      return this.viewDataTable === 'table'\n        || this.viewDataTable === 'tableAllColumns'\n        || this.viewDataTable === 'tableGoals';\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport Passthrough from '../Passthrough/Passthrough.vue';\nimport DropdownButton from '../DropdownButton/DropdownButton';\nimport ReportExport from '../ReportExport/ReportExport';\nimport { translate } from '../translate';\n\ninterface FooterIcon {\n  id: string;\n  icon?: string;\n}\n\ninterface FooterIconGroup {\n  buttons: FooterIcon[];\n}\n\nconst { $ } = window;\n\nfunction getSingleStateIconText(text: string, addDefault?: boolean, replacement?: string) {\n  if (/(%(.\\$)?s+)/g.test(translate(text))) {\n    const values = ['<br /><span class=\"action\">'];\n    if (replacement) {\n      values.push(replacement);\n    }\n    let result = translate(text, ...values);\n    if (addDefault) {\n      result += ` (${translate('CoreHome_Default')})`;\n    }\n    result += '</span>';\n    return result;\n  }\n\n  return translate(text);\n}\n\nfunction getToggledIconText(toggled: boolean, textToggled: string, textUntoggled: string) {\n  if (toggled) {\n    return getSingleStateIconText(textToggled, true);\n  }\n\n  return getSingleStateIconText(textUntoggled);\n}\n\nfunction isBooleanLikeSet(value: number|string|boolean) {\n  return !!value && value !== '0';\n}\n\nexport default defineComponent({\n  props: {\n    showPeriods: Boolean,\n    showFooter: Boolean,\n    showFooterIcons: Boolean,\n    showSearch: Boolean,\n    showFlattenTable: Boolean,\n    footerIcons: {\n      type: Array,\n      required: true,\n    },\n    viewDataTable: {\n      type: String,\n      required: true,\n    },\n    reportTitle: String,\n    requestParams: {\n      type: Object,\n      required: true,\n    },\n    apiMethodToRequestDataTable: {\n      type: String,\n      required: true,\n    },\n    maxFilterLimit: {\n      type: Number,\n      required: true,\n    },\n    showExport: Boolean,\n    showExportAsImageIcon: Boolean,\n    showAnnotations: Boolean,\n    reportId: {\n      type: String,\n      required: true,\n    },\n    dataTableActions: {\n      type: Array,\n      required: true,\n    },\n    clientSideParameters: {\n      type: Object,\n      required: true,\n    },\n    hasMultipleDimensions: Boolean,\n    isDataTableEmpty: Boolean,\n    showTotalsRow: Boolean,\n    showExcludeLowPopulation: Boolean,\n    showPivotBySubtable: Boolean,\n    selectablePeriods: Array,\n    translations: {\n      type: Object,\n      required: true,\n    },\n    pivotDimensionName: String,\n  },\n  components: {\n    Passthrough,\n  },\n  directives: {\n    DropdownButton,\n    ReportExport,\n  },\n  methods: {\n    showExportImage(event: Event) {\n      $(event.target as HTMLElement)\n        .closest('.dataTable')\n        .find('div.jqplot-target')\n        .trigger('piwikExportAsImage');\n    },\n  },\n  computed: {\n    randomIdForDropdown(): number {\n      return Math.floor(Math.random() * 999999);\n    },\n    allFooterIcons(): FooterIcon[] {\n      return (this.footerIcons as FooterIconGroup[]).reduce((icons, footerIcon) => {\n        icons.push(...footerIcon.buttons);\n        return icons;\n      }, [] as FooterIcon[]);\n    },\n    activeFooterIcons(): FooterIcon[] {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n\n      const result = [this.viewDataTable];\n      if (params.abandonedCarts === 0 || params.abandonedCarts === '0') {\n        result.push('ecommerceOrder');\n      } else if (params.abandonedCarts === 1 || params.abandonedCarts === '1') {\n        result.push('ecommerceAbandonedCart');\n      }\n\n      return result\n        .map((id) => this.allFooterIcons.find((button) => button.id === id))\n        .filter((icon) => !!icon) as FooterIcon[];\n    },\n    activeFooterIcon(): string|undefined {\n      return this.activeFooterIcons[0]?.icon;\n    },\n    activeFooterIconIds(): string[] {\n      return this.activeFooterIcons.map((icon) => icon.id);\n    },\n    numIcons(): number {\n      return this.allFooterIcons.length;\n    },\n    hasFooterIconsToShow(): boolean {\n      return !!this.activeFooterIcons.length && this.numIcons > 1;\n    },\n    reportFormats(): Record<string, string> {\n      const formats: Record<string, string> = {\n        CSV: 'CSV',\n        TSV: 'TSV (Excel)',\n        XML: 'XML',\n        JSON: 'Json',\n        HTML: 'HTML',\n      };\n      formats.RSS = 'RSS';\n      return formats;\n    },\n    showDimensionsConfigItem() {\n      return this.showFlattenTable\n        && `${this.clientSideParameters.flat}` === '1'\n        && this.hasMultipleDimensions;\n    },\n    showFlatConfigItem() {\n      return this.showFlattenTable && `${this.clientSideParameters.flat}` === '1';\n    },\n    showTotalsConfigItem() {\n      return !this.isDataTableEmpty && this.showTotalsRow;\n    },\n    hasConfigItems() {\n      return this.showFlattenTable\n        || this.showDimensionsConfigItem\n        || this.showFlatConfigItem\n        || this.showTotalsConfigItem\n        || this.showExcludeLowPopulation\n        || this.showPivotBySubtable;\n    },\n    flattenItemText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.flat),\n        'CoreHome_UnFlattenDataTable',\n        'CoreHome_FlattenDataTable',\n      );\n    },\n    keepTotalsRowText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.keep_totals_row),\n        'CoreHome_RemoveTotalsRowDataTable',\n        'CoreHome_AddTotalsRowDataTable',\n      );\n    },\n    includeAggregateRowsText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.include_aggregate_rows),\n        'CoreHome_DataTableExcludeAggregateRows',\n        'CoreHome_DataTableIncludeAggregateRows',\n      );\n    },\n    showDimensionsText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.show_dimensions),\n        'CoreHome_DataTableCombineDimensions',\n        'CoreHome_DataTableShowDimensions',\n      );\n    },\n    pivotByText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      if (isBooleanLikeSet(params.pivotBy)) {\n        return getSingleStateIconText('CoreHome_UndoPivotBySubtable', true);\n      }\n\n      return getSingleStateIconText('CoreHome_PivotBySubtable', false, this.pivotDimensionName);\n    },\n    excludeLowPopText() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return getToggledIconText(\n        isBooleanLikeSet(params.enable_filter_excludelowpop),\n        'CoreHome_IncludeRowsWithLowPopulation',\n        'CoreHome_ExcludeRowsWithLowPopulation',\n      );\n    },\n    isAnyConfigureIconHighlighted() {\n      const params = this.clientSideParameters as Record<string, string|number|boolean>;\n      return isBooleanLikeSet(params.flat)\n        || isBooleanLikeSet(params.keep_totals_row)\n        || isBooleanLikeSet(params.include_aggregate_rows)\n        || isBooleanLikeSet(params.show_dimensions)\n        || isBooleanLikeSet(params.pivotBy)\n        || isBooleanLikeSet(params.enable_filter_excludelowpop);\n    },\n    isTableView() {\n      return this.viewDataTable === 'table'\n        || this.viewDataTable === 'tableAllColumns'\n        || this.viewDataTable === 'tableGoals';\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DataTableActions.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DataTableActions.vue?vue&type=script&lang=ts\"","import { render } from \"./DataTableActions.vue?vue&type=template&id=7884c39d\"\nimport script from \"./DataTableActions.vue?vue&type=script&lang=ts\"\nexport * from \"./DataTableActions.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n<template>\n  <div\n    v-expand-on-hover=\"{expander: 'expander'}\"\n    id=\"header_message\"\n    class=\"piwikSelector\"\n    :class=\"{\n      header_info: !latestVersionAvailable || lastUpdateCheckFailed,\n      update_available: latestVersionAvailable\n    }\"\n  >\n    <Passthrough v-if=\"latestVersionAvailable && !isPiwikDemo\">\n      <span\n        v-if=\"isMultiServerEnvironment\"\n        class=\"title\"\n        style=\"cursor:pointer;\"\n        ref=\"expander\"\n      >\n        {{ translate('General_NewUpdatePiwikX', latestVersionAvailable) }}\n        <span class=\"icon-warning\"></span>\n      </span>\n      <a\n        v-else\n        class=\"title\"\n        href=\"?module=CoreUpdater&action=newVersionAvailable\"\n        style=\"cursor:pointer;\"\n        ref=\"expander\"\n      >\n        {{ translate('General_NewUpdatePiwikX', latestVersionAvailable) }}\n        <span class=\"icon-warning\"></span>\n      </a>\n    </Passthrough>\n    <Passthrough v-else-if=\"isSuperUser && (isAdminArea || lastUpdateCheckFailed)\">\n      <a v-if=\"isInternetEnabled\" class=\"title\" v-html=\"$sanitize(updateCheck)\"></a>\n      <a\n        v-else\n        class=\"title\"\n        :href=\"externalRawLink('https://matomo.org/changelog/')\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <span id=\"updateCheckLinkContainer\">\n          {{ translate('CoreHome_SeeAvailableVersions') }}\n        </span>\n      </a>\n    </Passthrough>\n\n    <div class=\"dropdown positionInViewport\">\n      <span v-if=\"latestVersionAvailable && isSuperUser\" v-html=\"$sanitize(updateNowText)\"></span>\n      <span\n        v-else-if=\"latestVersionAvailable && !isPiwikDemo && hasSomeViewAccess && !isAnonymous\"\n        v-html=\"$sanitize(updateAvailableText)\"\n      ></span>\n\n      {{ translate('General_YouAreCurrentlyUsing', piwikVersion) }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\nimport ExpandOnHover from '../ExpandOnHover/ExpandOnHover';\nimport Passthrough from '../Passthrough/Passthrough.vue';\nimport { externalLink, externalRawLink } from '../externalLink';\n\nexport default defineComponent({\n  props: {\n    isMultiServerEnvironment: Boolean,\n    lastUpdateCheckFailed: Boolean,\n    latestVersionAvailable: String,\n    isPiwikDemo: Boolean,\n    isSuperUser: Boolean,\n    isAdminArea: Boolean,\n    isInternetEnabled: Boolean,\n    updateCheck: String,\n    isAnonymous: Boolean,\n    hasSomeViewAccess: Boolean,\n    contactEmail: String,\n    piwikVersion: String,\n  },\n  components: {\n    Passthrough,\n  },\n  directives: {\n    ExpandOnHover,\n  },\n  computed: {\n    updateNowText() {\n      let text = '';\n\n      if (this.isMultiServerEnvironment) {\n        const link = externalRawLink(`https://builds.matomo.org/piwik-${this.latestVersionAvailable}.zip`);\n        text = translate(\n          'CoreHome_OneClickUpdateNotPossibleAsMultiServerEnvironment',\n          `<a rel=\"noreferrer noopener\" href=\"${link}\">builds.matomo.org</a>`,\n        );\n      } else {\n        text = translate(\n          'General_PiwikXIsAvailablePleaseUpdateNow',\n          this.latestVersionAvailable || '',\n          '<br /><a href=\"index.php?module=CoreUpdater&amp;action=newVersionAvailable\">',\n          '</a>',\n          externalLink('https://matomo.org/changelog/'),\n          '</a>',\n        );\n      }\n\n      return `${text}<br/>`;\n    },\n    updateAvailableText() {\n      const updateSubject = translate(\n        'General_NewUpdatePiwikX',\n        this.latestVersionAvailable || '',\n      );\n      /* eslint-disable prefer-template */\n      const matomoLink = externalLink('https://matomo.org/') + 'Matomo</a>';\n      const changelogLinkStart = externalLink('https://matomo.org/changelog/');\n\n      const text = translate(\n        'General_PiwikXIsAvailablePleaseNotifyPiwikAdmin',\n        `${matomoLink} ${changelogLinkStart}${this.latestVersionAvailable}</a>`,\n        `<a href=\"mailto:${this.contactEmail}?subject=${encodeURIComponent(updateSubject)}\">`,\n        '</a>',\n      );\n\n      return `${text}<br />`;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport { translate } from '../translate';\nimport ExpandOnHover from '../ExpandOnHover/ExpandOnHover';\nimport Passthrough from '../Passthrough/Passthrough.vue';\nimport { externalLink, externalRawLink } from '../externalLink';\n\nexport default defineComponent({\n  props: {\n    isMultiServerEnvironment: Boolean,\n    lastUpdateCheckFailed: Boolean,\n    latestVersionAvailable: String,\n    isPiwikDemo: Boolean,\n    isSuperUser: Boolean,\n    isAdminArea: Boolean,\n    isInternetEnabled: Boolean,\n    updateCheck: String,\n    isAnonymous: Boolean,\n    hasSomeViewAccess: Boolean,\n    contactEmail: String,\n    piwikVersion: String,\n  },\n  components: {\n    Passthrough,\n  },\n  directives: {\n    ExpandOnHover,\n  },\n  computed: {\n    updateNowText() {\n      let text = '';\n\n      if (this.isMultiServerEnvironment) {\n        const link = externalRawLink(`https://builds.matomo.org/piwik-${this.latestVersionAvailable}.zip`);\n        text = translate(\n          'CoreHome_OneClickUpdateNotPossibleAsMultiServerEnvironment',\n          `<a rel=\"noreferrer noopener\" href=\"${link}\">builds.matomo.org</a>`,\n        );\n      } else {\n        text = translate(\n          'General_PiwikXIsAvailablePleaseUpdateNow',\n          this.latestVersionAvailable || '',\n          '<br /><a href=\"index.php?module=CoreUpdater&amp;action=newVersionAvailable\">',\n          '</a>',\n          externalLink('https://matomo.org/changelog/'),\n          '</a>',\n        );\n      }\n\n      return `${text}<br/>`;\n    },\n    updateAvailableText() {\n      const updateSubject = translate(\n        'General_NewUpdatePiwikX',\n        this.latestVersionAvailable || '',\n      );\n      /* eslint-disable prefer-template */\n      const matomoLink = externalLink('https://matomo.org/') + 'Matomo</a>';\n      const changelogLinkStart = externalLink('https://matomo.org/changelog/');\n\n      const text = translate(\n        'General_PiwikXIsAvailablePleaseNotifyPiwikAdmin',\n        `${matomoLink} ${changelogLinkStart}${this.latestVersionAvailable}</a>`,\n        `<a href=\"mailto:${this.contactEmail}?subject=${encodeURIComponent(updateSubject)}\">`,\n        '</a>',\n      );\n\n      return `${text}<br />`;\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VersionInfoHeaderMessage.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VersionInfoHeaderMessage.vue?vue&type=script&lang=ts\"","import { render } from \"./VersionInfoHeaderMessage.vue?vue&type=template&id=eee30a80\"\nimport script from \"./VersionInfoHeaderMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./VersionInfoHeaderMessage.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\n  Matomo - free/libre analytics platform\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <ul id=\"mobile-left-menu\" class=\"sidenav hide-on-large-only\">\n    <li class=\"no-padding\" v-for=\"(level2, level1) in menuWithSubmenuItems\" :key=\"level1\">\n      <ul class=\"collapsible collapsible-accordion\" v-side-nav=\"{activator: activateLeftMenu}\">\n        <li>\n          <a class=\"collapsible-header\">\n            {{ translate(level1) }}<i :class=\"level2._icon || 'icon-chevron-down'\"></i>\n          </a>\n\n          <div class=\"collapsible-body\">\n            <ul>\n              <li\n                v-for=\"([name, params]) in Object.entries(level2).filter(([n]) => n[0] !== '_')\"\n                :key=\"name\"\n              >\n                <a\n                  :title=\"params._tooltip ? translateIfNecessary(params._tooltip) : ''\"\n                  target=\"_self\"\n                  :href=\"getMenuUrl(params._url)\"\n                >\n                  {{ translateIfNecessary(name) }}\n                </a>\n              </li>\n            </ul>\n          </div>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport SideNav from '../SideNav/SideNav';\nimport { translate } from '../translate';\n\ninterface UrlParamsInfo {\n  _tooltip: string;\n  _url: QueryParameters;\n}\n\ntype Menu = Record<string, Record<string, UrlParamsInfo>>;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    menu: {\n      type: Object,\n      required: true,\n    },\n  },\n  directives: {\n    SideNav,\n  },\n  methods: {\n    getMenuUrl(params: QueryParameters) {\n      return `?${MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        ...params,\n      })}`;\n    },\n    translateIfNecessary(name: string) {\n      if (name.includes('_')) {\n        return translate(name);\n      }\n\n      return name;\n    },\n  },\n  computed: {\n    menuWithSubmenuItems() {\n      const menu = (this.menu || {}) as Menu;\n      return Object.fromEntries(\n        Object.entries(menu)\n          // remove submenus that have no items that do not start w/ '_'\n          .filter(([, level2]) => {\n            const itemsWithoutUnderscore = Object.entries(level2)\n              .filter(([name]) => name[0] !== '_');\n            return Object.keys(itemsWithoutUnderscore).length;\n          }),\n      );\n    },\n    activateLeftMenu() {\n      return $('nav .activateLeftMenu')[0];\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport MatomoUrl from '../MatomoUrl/MatomoUrl';\nimport SideNav from '../SideNav/SideNav';\nimport { translate } from '../translate';\n\ninterface UrlParamsInfo {\n  _tooltip: string;\n  _url: QueryParameters;\n}\n\ntype Menu = Record<string, Record<string, UrlParamsInfo>>;\n\nconst { $ } = window;\n\nexport default defineComponent({\n  props: {\n    menu: {\n      type: Object,\n      required: true,\n    },\n  },\n  directives: {\n    SideNav,\n  },\n  methods: {\n    getMenuUrl(params: QueryParameters) {\n      return `?${MatomoUrl.stringify({\n        ...MatomoUrl.urlParsed.value,\n        ...params,\n      })}`;\n    },\n    translateIfNecessary(name: string) {\n      if (name.includes('_')) {\n        return translate(name);\n      }\n\n      return name;\n    },\n  },\n  computed: {\n    menuWithSubmenuItems() {\n      const menu = (this.menu || {}) as Menu;\n      return Object.fromEntries(\n        Object.entries(menu)\n          // remove submenus that have no items that do not start w/ '_'\n          .filter(([, level2]) => {\n            const itemsWithoutUnderscore = Object.entries(level2)\n              .filter(([name]) => name[0] !== '_');\n            return Object.keys(itemsWithoutUnderscore).length;\n          }),\n      );\n    },\n    activateLeftMenu() {\n      return $('nav .activateLeftMenu')[0];\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MobileLeftMenu.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MobileLeftMenu.vue?vue&type=script&lang=ts\"","import { render } from \"./MobileLeftMenu.vue?vue&type=template&id=727d7002\"\nimport script from \"./MobileLeftMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./MobileLeftMenu.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { nextTick, watch } from 'vue';\nimport MatomoUrl from './MatomoUrl/MatomoUrl';\n\nconst { $ } = window;\n\nfunction scrollToAnchorNode($node: HTMLElement|JQuery|string) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ($ as any).scrollTo($node, 20);\n}\n\nfunction preventDefaultIfEventExists(event: Event|null) {\n  if (event) {\n    event.preventDefault();\n  }\n}\n\nfunction scrollToAnchorIfPossible(hash: string, event: Event|null) {\n  if (!hash) {\n    return;\n  }\n\n  if (hash.indexOf('&') !== -1) {\n    return;\n  }\n\n  let $node: JQuery|null = null;\n  try {\n    $node = $(`#${hash}`);\n  } catch (err) {\n    // on jquery syntax error, ignore so nothing is logged to the console\n    return;\n  }\n\n  if ($node?.length) {\n    scrollToAnchorNode($node);\n    preventDefaultIfEventExists(event);\n    return;\n  }\n\n  $node = $(`a[name=${hash}]`);\n\n  if ($node?.length) {\n    scrollToAnchorNode($node);\n    preventDefaultIfEventExists(event);\n  }\n}\n\nfunction isLinkWithinSamePage(location: URL, newUrl: string) {\n  if (location && location.origin && newUrl.indexOf(location.origin) === -1) {\n    // link to different domain\n    return false;\n  }\n\n  if (location && location.pathname && newUrl.indexOf(location.pathname) === -1) {\n    // link to different path\n    return false;\n  }\n\n  if (location && location.search && newUrl.indexOf(location.search) === -1) {\n    // link with different search\n    return false;\n  }\n\n  return true;\n}\n\nfunction handleScrollToAnchorIfPresentOnPageLoad() {\n  if (window.location.hash.slice(0, 2) === '#/') {\n    const hash = window.location.hash.slice(2);\n    scrollToAnchorIfPossible(hash, null);\n  }\n}\n\nfunction handleScrollToAnchorAfterPageLoad() {\n  watch(() => MatomoUrl.url.value, (newUrl, oldUrl) => {\n    if (!newUrl) {\n      return;\n    }\n\n    const hashPos = newUrl.href.indexOf('#/');\n    if (hashPos === -1) {\n      return;\n    }\n\n    if (oldUrl && !isLinkWithinSamePage(oldUrl, newUrl.href)) {\n      return;\n    }\n\n    const hash = newUrl.href.slice(hashPos + 2);\n\n    scrollToAnchorIfPossible(hash, null);\n  });\n}\n\nhandleScrollToAnchorAfterPageLoad();\n$(handleScrollToAnchorIfPresentOnPageLoad);\n\nexport default function scrollToAnchorInUrl(): void {\n  // may be called when page is only fully loaded after some additional requests\n  // timeout needed to ensure Vue rendered fully\n  nextTick(handleScrollToAnchorIfPresentOnPageLoad);\n}\n","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport './noAdblockFlag';\nimport './Periods/Day';\nimport './Periods/Week';\nimport './Periods/Month';\nimport './Periods/Year';\nimport './Periods/Range';\nimport './AjaxHelper/AjaxHelper.adapter';\nimport './PopoverHandler/PopoverHandler';\nimport './zenMode';\nimport Matomo from './Matomo/Matomo';\n\nexport { default as createVueApp } from './createVueApp';\nexport { default as importPluginUmd } from './importPluginUmd';\nexport { default as useExternalPluginComponent } from './useExternalPluginComponent';\nexport { default as DirectiveUtilities } from './directiveUtilities';\nexport { default as debounce } from './debounce';\nexport { default as getFormattedEvolution } from './getFormattedEvolution';\nexport { default as clone } from './clone';\nexport { default as VueEntryContainer } from './VueEntryContainer/VueEntryContainer.vue';\nexport { default as ActivityIndicator } from './ActivityIndicator/ActivityIndicator.vue';\nexport * from './translate';\nexport * from './externalLink';\nexport { default as Alert } from './Alert/Alert.vue';\nexport { default as AjaxHelper, AjaxOptions } from './AjaxHelper/AjaxHelper';\nexport { setCookie, getCookie, deleteCookie } from './CookieHelper/CookieHelper';\nexport { default as MatomoUrl } from './MatomoUrl/MatomoUrl';\nexport { Matomo };\nexport * from './Periods';\nexport { default as DropdownMenu } from './DropdownMenu/DropdownMenu';\nexport { default as FocusAnywhereButHere } from './FocusAnywhereButHere/FocusAnywhereButHere';\nexport { default as FocusIf } from './FocusIf/FocusIf';\nexport { default as Tooltips } from './Tooltips/Tooltips';\nexport { default as MatomoDialog } from './MatomoDialog/MatomoDialog.vue';\nexport { default as ExpandOnClick } from './ExpandOnClick/ExpandOnClick';\nexport { default as ExpandOnHover } from './ExpandOnHover/ExpandOnHover';\nexport { default as ShowSensitiveData } from './ShowSensitiveData/ShowSensitiveData';\nexport { default as DropdownButton } from './DropdownButton/DropdownButton';\nexport { default as SelectOnFocus } from './SelectOnFocus/SelectOnFocus';\nexport { default as CopyToClipboard } from './CopyToClipboard/CopyToClipboard';\nexport { default as SideNav } from './SideNav/SideNav';\nexport { default as EnrichedHeadline } from './EnrichedHeadline/EnrichedHeadline.vue';\nexport { default as ContentBlock } from './ContentBlock/ContentBlock.vue';\nexport { default as Comparisons } from './Comparisons/Comparisons.vue';\nexport { default as ComparisonsStore } from './Comparisons/Comparisons.store';\nexport { default as ComparisonsStoreInstance } from './Comparisons/Comparisons.store.instance';\nexport { default as MenuItemsDropdown } from './MenuItemsDropdown/MenuItemsDropdown.vue';\nexport { default as DatePicker } from './DatePicker/DatePicker.vue';\nexport { default as DateRangePicker } from './DateRangePicker/DateRangePicker.vue';\nexport { default as PeriodDatePicker } from './PeriodDatePicker/PeriodDatePicker.vue';\nexport * from './Notification';\nexport { default as ShowHelpLink } from './ShowHelpLink/ShowHelpLink.vue';\nexport { default as SitesStore } from './SiteSelector/SitesStore';\nexport { default as Site } from './SiteSelector/Site';\nexport { default as SiteSelector } from './SiteSelector/SiteSelector.vue';\nexport { default as SiteRef } from './SiteSelector/SiteRef';\nexport { default as QuickAccess } from './QuickAccess/QuickAccess.vue';\nexport { default as FieldArray } from './FieldArray/FieldArray.vue';\nexport { default as MultiPairField } from './MultiPairField/MultiPairField.vue';\nexport { default as PeriodSelector } from './PeriodSelector/PeriodSelector.vue';\nexport { default as ReportingMenu } from './ReportingMenu/ReportingMenu.vue';\nexport { default as ReportingMenuStore } from './ReportingMenu/ReportingMenu.store';\nexport { default as ReportingPagesStore } from './ReportingPages/ReportingPages.store';\nexport { default as ReportMetadataStore } from './ReportMetadata/ReportMetadata.store';\nexport { default as WidgetsStore } from './Widget/Widgets.store';\nexport { default as WidgetLoader } from './WidgetLoader/WidgetLoader.vue';\nexport { default as WidgetContainer } from './WidgetContainer/WidgetContainer.vue';\nexport {\n  default as WidgetByDimensionContainer,\n} from './WidgetByDimensionContainer/WidgetByDimensionContainer.vue';\nexport { default as Widget } from './Widget/Widget.vue';\nexport {\n  Widget as WidgetType,\n  WidgetContainer as WidgetContainerType,\n  GroupedWidgets as GroupedWidgetsType,\n} from './Widget/types';\nexport { default as ReportingPage } from './ReportingPage/ReportingPage.vue';\nexport { default as ReportExport } from './ReportExport/ReportExport';\nexport { default as Sparkline } from './Sparkline/Sparkline.vue';\nexport { default as Progressbar } from './Progressbar/Progressbar.vue';\nexport { default as ContentIntro } from './ContentIntro/ContentIntro';\nexport { default as ContentTable } from './ContentTable/ContentTable';\nexport { default as AjaxForm } from './AjaxForm/AjaxForm.vue';\nexport { default as Passthrough } from './Passthrough/Passthrough.vue';\nexport { default as DataTableActions } from './DataTable/DataTableActions.vue';\nexport {\n  default as VersionInfoHeaderMessage,\n} from './VersionInfoHeaderMessage/VersionInfoHeaderMessage.vue';\nexport { default as MobileLeftMenu } from './MobileLeftMenu/MobileLeftMenu.vue';\nexport { default as scrollToAnchorInUrl } from './scrollToAnchorInUrl';\n","\nimport { defineComponent } from 'vue';\nimport {\n  translate,\n  AjaxHelper,\n  MatomoDialog,\n  SiteSelector,\n  SiteRef,\n  Site,\n  Matomo,\n} from '../../../../CoreHome/vue/src/index.ts';\n// } from 'CoreHome';\n\ninterface CsvSectionState {\n  isLoading: boolean;\n  count: number;\n  showDialog: boolean;\n  idSite: string | number;\n  siteName: string;\n  site: SiteRef;\n  sites: Record<string, Site>;\n  tokenAuth: string;\n  login: string;\n  date: string;\n}\n\nexport default defineComponent({\n  props: {\n    defaultSite: {\n      type: Object,\n      required: true,\n    },\n  },\n  components: {\n    MatomoDialog,\n    SiteSelector,\n  },\n  data(): CsvSectionState {\n    return {\n      isLoading: false,\n      count: 12,\n      showDialog: false,\n      idSite: '',\n      siteName: '',\n      site: this.defaultSite as SiteRef,\n      sites: {},\n      tokenAuth: '', // Placeholder for the token_auth\n      login: '',\n      date: '',\n    };\n  },\n  async mounted() {\n    console.log('Mounted...');\n    console.log('Sites:', this.sites);\n  },\n  setup() {\n    console.log('Setup...');\n    const sitesPromise = AjaxHelper.fetch<(string | number)[]>({\n      method: 'SitesManager.getSitesIdWithAdminAccess',\n      filter_limit: '-1',\n    });\n\n    return {\n      translate,\n      getSites() {\n        return sitesPromise;\n      },\n    };\n  },\n  methods: {\n    downloadCSV() {\n      console.log('Download CSV for site ID:', this.site);\n      console.log('Date:', this.date);\n\n      if (!this.site) {\n        console.error('Site ID is undefined or not selected.');\n        return;\n      }\n      const redirectParams = {\n        module: 'DataExport',\n        action: 'selectAllVisitsAndActions',\n        idSite: this.site.id,\n        date: this.date,\n      };\n      // Redirect because download is not possible with ajax\n      Matomo.helper.redirect(redirectParams);\n    },\n    websiteChanged() {\n      console.log('websiteChanged this.site:', this.site);\n      console.log('websiteChanged this.site:', this.site);\n    },\n    dateChanged() {\n      console.log('dateChanged this.date:', this.date);\n    },\n    sendRequest() {\n      console.log('sendRequest: selectAllVisitsAndActionsSiteId');\n    },\n  },\n});\n","export { default } from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CsvSection.vue?vue&type=script&lang=ts\"; export * from \"-!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CsvSection.vue?vue&type=script&lang=ts\"","import { render } from \"./CsvSection.vue?vue&type=template&id=1f77e6ee&scoped=true\"\nimport script from \"./CsvSection.vue?vue&type=script&lang=ts\"\nexport * from \"./CsvSection.vue?vue&type=script&lang=ts\"\n\nimport \"./CsvSection.vue?vue&type=style&index=0&id=1f77e6ee&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1f77e6ee\"\n\nexport default script","// /plugins/DataExport/vue/src/index.ts\n\nexport { default as CsvSection } from './CsvSection/CsvSection.vue';\n","import './setPublicPath'\nexport * from '~entry'\n"],"sourceRoot":""}